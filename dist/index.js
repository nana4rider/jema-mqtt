import { createRequire } from "module"; import url from "url"; const require = createRequire(import.meta.url); const __filename = url.fileURLToPath(import.meta.url); const __dirname = url.fileURLToPath(new URL(".", import.meta.url));
var LT=Object.create;var wp=Object.defineProperty;var jT=Object.getOwnPropertyDescriptor;var DT=Object.getOwnPropertyNames;var BT=Object.getPrototypeOf,FT=Object.prototype.hasOwnProperty;var E=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var p=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var UT=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of DT(e))!FT.call(t,n)&&n!==r&&wp(t,n,{get:()=>e[n],enumerable:!(i=jT(e,n))||i.enumerable});return t};var wn=(t,e,r)=>(r=t!=null?LT(BT(t)):{},UT(e||!t||!t.__esModule?wp(r,"default",{value:t,enumerable:!0}):r,t));var Gs=p((LU,vp)=>{"use strict";var Yl=class t extends Error{constructor(e,...r){super(`env-var: ${e}`,...r),Error.captureStackTrace&&Error.captureStackTrace(this,t),this.name="EnvVarError"}};vp.exports=Yl});var yi=p((jU,Sp)=>{"use strict";Sp.exports=function(e){return e}});var Kl=p((DU,Ep)=>{"use strict";var WT=yi();Ep.exports=function(e,r){return r=r||",",e.length?WT(e).split(r).filter(Boolean):[]}});var Tp=p((BU,xp)=>{"use strict";var $T=Kl();xp.exports=function(e,r){return e.length?new Set($T(e,r)):new Set}});var Op=p((FU,Rp)=>{"use strict";Rp.exports=function(e){let r=e.toLowerCase();if(r!=="false"&&r!=="true")throw new Error('should be either "true", "false", "TRUE", or "FALSE"');return r!=="false"}});var Pp=p((UU,Ap)=>{"use strict";Ap.exports=function(e){let r=e.toLowerCase();if(["false","0","true","1"].indexOf(r)===-1)throw new Error('should be either "true", "false", "TRUE", "FALSE", 1, or 0');return!(r==="0"||r==="false")}});var zs=p((WU,Mp)=>{"use strict";Mp.exports=function(e){let r=parseInt(e,10);if(isNaN(r)||r.toString(10)!==e)throw new Error("should be a valid integer");return r}});var Ql=p(($U,Ip)=>{"use strict";var VT=zs();Ip.exports=function(e){let r=VT(e);if(r<0)throw new Error("should be a positive integer");return r}});var Cp=p((VU,qp)=>{"use strict";var HT=Ql();qp.exports=function(e){var r=HT(e);if(r>65535)throw new Error("cannot assign a port number greater than 65535");return r}});var Np=p((HU,kp)=>{"use strict";var GT=yi();kp.exports=function(e,r){let i=GT(e);if(r.indexOf(i)<0)throw new Error(`should be one of [${r.join(", ")}]`);return i}});var Ys=p((GU,Lp)=>{"use strict";Lp.exports=function(e){let r=parseFloat(e);if(isNaN(r)||isNaN(e))throw new Error("should be a valid float");return r}});var Dp=p((zU,jp)=>{"use strict";var zT=Ys();jp.exports=function(e){let r=zT(e);if(r>0)throw new Error("should be a negative float");return r}});var Fp=p((YU,Bp)=>{"use strict";var YT=Ys();Bp.exports=function(e){let r=YT(e);if(r<0)throw new Error("should be a positive float");return r}});var Wp=p((KU,Up)=>{"use strict";var KT=zs();Up.exports=function(e){let r=KT(e);if(r>0)throw new Error("should be a negative integer");return r}});var Ks=p((QU,$p)=>{"use strict";$p.exports=function(e){try{return JSON.parse(e)}catch{throw new Error("should be valid (parseable) JSON")}}});var Hp=p((JU,Vp)=>{"use strict";var QT=Ks();Vp.exports=function(e){var r=QT(e);if(!Array.isArray(r))throw new Error("should be a parseable JSON Array");return r}});var zp=p((ZU,Gp)=>{"use strict";var JT=Ks();Gp.exports=function(e){var r=JT(e);if(Array.isArray(r))throw new Error("should be a parseable JSON Object");return r}});var Kp=p((XU,Yp)=>{"use strict";Yp.exports=function(e,r){try{RegExp(void 0,r)}catch{throw new Error("invalid regexp flags")}try{return new RegExp(e,r)}catch{throw new Error("should be a valid regexp")}}});var Jl=p((e4,Qp)=>{"use strict";var ZT=yi();Qp.exports=function(e){let r=ZT(e);try{return new URL(r)}catch{throw new Error("should be a valid URL")}}});var Zp=p((t4,Jp)=>{"use strict";var XT=Jl();Jp.exports=function(e){return XT(e).toString()}});var eg=p((r4,Xp)=>{"use strict";var eR=yi(),tR=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\u0001-\u0008\u000b\u000c\u000e-\u001f\u0021\u0023-\u005b\u005d-\u007f]|\\[\u0001-\u0009\u000b\u000c\u000e-\u007f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\u0001-\u0008\u000b\u000c\u000e-\u001f\u0021-\u005a\u0053-\u007f]|\\[\u0001-\u0009\u000b\u000c\u000e-\u007f])+)\])$/;Xp.exports=function(e){let r=eR(e);if(!tR.test(r))throw new Error("should be a valid email address");return r}});var Zl=p((i4,tg)=>{"use strict";tg.exports={asArray:Kl(),asSet:Tp(),asBoolStrict:Op(),asBool:Pp(),asPortNumber:Cp(),asEnum:Np(),asFloatNegative:Dp(),asFloatPositive:Fp(),asFloat:Ys(),asIntNegative:Wp(),asIntPositive:Ql(),asInt:zs(),asJsonArray:Hp(),asJsonObject:zp(),asJson:Ks(),asRegExp:Kp(),asString:yi(),asUrlObject:Jl(),asUrlString:Zp(),asEmailString:eg()}});var ng=p((n4,ig)=>{"use strict";var rg=Gs(),rR=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{4}|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)$/;ig.exports=function(e,r,i,n){let s=!1,o=!1,a,l,u=Zl();function f(d){n(r,d)}function c(d,g){let y=`"${r}" ${g}`;throw d&&(y=`${y}`),l&&(y=`${y}. An example of a valid value would be: ${l}`),new rg(y)}function h(d){return function(){let g=e[r];if(f(`will be read from the environment using "${d.name}" accessor`),typeof g>"u")if(typeof a>"u"&&o)f("was not found in the environment, but is required to be set"),c(void 0,"is a required variable, but it was not set");else if(typeof a<"u")f(`was not found in the environment, parsing default value "${a}" instead`),g=a;else{f("was not found in the environment, but is not required. returning undefined");return}o&&(f("verifying variable value is not an empty string"),g.trim().length===0&&c(void 0,"is a required variable, but its value was empty")),s&&(f("verifying variable is a valid base64 string"),g.match(rR)||c(g,"should be a valid base64 string if using convertFromBase64"),f("converting from base64 to utf8 string"),g=Buffer.from(g,"base64").toString());let y=[g].concat(Array.prototype.slice.call(arguments));try{f(`passing value "${g}" to "${d.name}" accessor`);let _=d.apply(d,y);return f(`parsed successfully, returning ${_}`),_}catch(_){c(g,_.message)}}}let b={convertFromBase64:function(){return f("marking for base64 conversion"),s=!0,b},default:function(d){if(typeof d=="number")a=d.toString();else if(Array.isArray(d)||typeof d=="object"&&d!==null)a=JSON.stringify(d);else{if(typeof d!="string")throw new rg("values passed to default() must be of Number, String, Array, or Object type");a=d}return f(`setting default value to "${a}"`),b},required:function(d){return typeof d>"u"?(f("marked as required"),o=!0):(f(`setting required flag to ${d}`),o=d),b},example:function(d){return l=d,b}};return Object.entries({...u,...i}).forEach(([d,g])=>{b[d]=h(g)}),b}});var og=p((s4,sg)=>{"use strict";sg.exports=function(e,r){return function(n,s){(!r||!r.match(/prod|production/))&&e(`env-var (${n}): ${s}`)}}});var Xl=p((o4,lg)=>{"use strict";var iR=ng(),nR=Gs(),ag=(t,e,r)=>({from:ag,EnvVarError:Gs(),get:function(i){if(!i)return t;if(arguments.length>1)throw new nR("It looks like you passed more than one argument to env.get(). Since env-var@6.0.0 this is no longer supported. To set a default value use env.get(TARGET).default(DEFAULT)");return iR(t,i,e||{},r||function(){})},accessors:Zl(),logger:og()(console.log,t.NODE_ENV)});function sR(){try{return process.env}catch{return{}}}lg.exports=ag(sR())});var Me=p((a4,ug)=>{"use strict";var eu=class t extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${e.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,t)}};ug.exports=t=>{if(t.length>2)throw new eu(t);function e(i={}){this.options=i}e.prototype.transform=t;function r(i){return new e(i)}return r.Format=e,r}});var dg=p((l4,hg)=>{"use strict";var cg={};hg.exports=cg;var fg={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(fg).forEach(function(t){var e=fg[t],r=cg[t]=[];r.open="\x1B["+e[0]+"m",r.close="\x1B["+e[1]+"m"})});var gg=p((u4,pg)=>{"use strict";pg.exports=function(t,e){e=e||process.argv||[];var r=e.indexOf("--"),i=/^-{1,2}/.test(t)?"":"--",n=e.indexOf(i+t);return n!==-1&&(r===-1?!0:n<r)}});var _g=p((f4,bg)=>{"use strict";var oR=E("os"),Xe=gg(),Ee=process.env,mi=void 0;Xe("no-color")||Xe("no-colors")||Xe("color=false")?mi=!1:(Xe("color")||Xe("colors")||Xe("color=true")||Xe("color=always"))&&(mi=!0);"FORCE_COLOR"in Ee&&(mi=Ee.FORCE_COLOR.length===0||parseInt(Ee.FORCE_COLOR,10)!==0);function aR(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function lR(t){if(mi===!1)return 0;if(Xe("color=16m")||Xe("color=full")||Xe("color=truecolor"))return 3;if(Xe("color=256"))return 2;if(t&&!t.isTTY&&mi!==!0)return 0;var e=mi?1:0;if(process.platform==="win32"){var r=oR.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Ee)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(n){return n in Ee})||Ee.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Ee)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ee.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in Ee){var i=parseInt((Ee.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ee.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ee.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(Ee.TERM)||"COLORTERM"in Ee?1:(Ee.TERM==="dumb",e)}function tu(t){var e=lR(t);return aR(e)}bg.exports={supportsColor:tu,stdout:tu(process.stdout),stderr:tu(process.stderr)}});var mg=p((c4,yg)=>{"use strict";yg.exports=function(e,r){var i="";e=e||"Run the trap, drop the bass",e=e.split("");var n={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return e.forEach(function(s){s=s.toLowerCase();var o=n[s]||[" "],a=Math.floor(Math.random()*o.length);typeof n[s]<"u"?i+=n[s][a]:i+=s}),i}});var vg=p((h4,wg)=>{"use strict";wg.exports=function(e,r){e=e||"   he is here   ";var i={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},n=[].concat(i.up,i.down,i.mid);function s(l){var u=Math.floor(Math.random()*l);return u}function o(l){var u=!1;return n.filter(function(f){u=f===l}),u}function a(l,u){var f="",c,h;u=u||{},u.up=typeof u.up<"u"?u.up:!0,u.mid=typeof u.mid<"u"?u.mid:!0,u.down=typeof u.down<"u"?u.down:!0,u.size=typeof u.size<"u"?u.size:"maxi",l=l.split("");for(h in l)if(!o(h)){switch(f=f+l[h],c={up:0,down:0,mid:0},u.size){case"mini":c.up=s(8),c.mid=s(2),c.down=s(8);break;case"maxi":c.up=s(16)+3,c.mid=s(4)+1,c.down=s(64)+3;break;default:c.up=s(8)+1,c.mid=s(6)/2,c.down=s(8)+1;break}var b=["up","mid","down"];for(var d in b)for(var g=b[d],y=0;y<=c[g];y++)u[g]&&(f=f+i[g][s(i[g].length)])}return f}return a(e,r)}});var Eg=p((d4,Sg)=>{"use strict";Sg.exports=function(t){return function(e,r,i){if(e===" ")return e;switch(r%3){case 0:return t.red(e);case 1:return t.white(e);case 2:return t.blue(e)}}}});var Tg=p((p4,xg)=>{"use strict";xg.exports=function(t){return function(e,r,i){return r%2===0?e:t.inverse(e)}}});var Og=p((g4,Rg)=>{"use strict";Rg.exports=function(t){var e=["red","yellow","green","blue","magenta"];return function(r,i,n){return r===" "?r:t[e[i++%e.length]](r)}}});var Pg=p((b4,Ag)=>{"use strict";Ag.exports=function(t){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,i,n){return r===" "?r:t[e[Math.round(Math.random()*(e.length-2))]](r)}}});var Ng=p((y4,kg)=>{"use strict";var B={};kg.exports=B;B.themes={};var uR=E("util"),Rr=B.styles=dg(),Ig=Object.defineProperties,fR=new RegExp(/[\r\n]+/g);B.supportsColor=_g().supportsColor;typeof B.enabled>"u"&&(B.enabled=B.supportsColor()!==!1);B.enable=function(){B.enabled=!0};B.disable=function(){B.enabled=!1};B.stripColors=B.strip=function(t){return(""+t).replace(/\x1B\[\d+m/g,"")};var _4=B.stylize=function(e,r){if(!B.enabled)return e+"";var i=Rr[r];return!i&&r in B?B[r](e):i.open+e+i.close},cR=/[|\\{}()[\]^$+*?.]/g,hR=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(cR,"\\$&")};function qg(t){var e=function r(){return pR.apply(r,arguments)};return e._styles=t,e.__proto__=dR,e}var Cg=function(){var t={};return Rr.grey=Rr.gray,Object.keys(Rr).forEach(function(e){Rr[e].closeRe=new RegExp(hR(Rr[e].close),"g"),t[e]={get:function(){return qg(this._styles.concat(e))}}}),t}(),dR=Ig(function(){},Cg);function pR(){var t=Array.prototype.slice.call(arguments),e=t.map(function(o){return o!=null&&o.constructor===String?o:uR.inspect(o)}).join(" ");if(!B.enabled||!e)return e;for(var r=e.indexOf(`
`)!=-1,i=this._styles,n=i.length;n--;){var s=Rr[i[n]];e=s.open+e.replace(s.closeRe,s.open)+s.close,r&&(e=e.replace(fR,function(o){return s.close+o+s.open}))}return e}B.setTheme=function(t){if(typeof t=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var e in t)(function(r){B[r]=function(i){if(typeof t[r]=="object"){var n=i;for(var s in t[r])n=B[t[r][s]](n);return n}return B[t[r]](i)}})(e)};function gR(){var t={};return Object.keys(Cg).forEach(function(e){t[e]={get:function(){return qg([e])}}}),t}var bR=function(e,r){var i=r.split("");return i=i.map(e),i.join("")};B.trap=mg();B.zalgo=vg();B.maps={};B.maps.america=Eg()(B);B.maps.zebra=Tg()(B);B.maps.rainbow=Og()(B);B.maps.random=Pg()(B);for(Mg in B.maps)(function(t){B[t]=function(e){return bR(B.maps[t],e)}})(Mg);var Mg;Ig(B,gR())});var ru=p((m4,Lg)=>{"use strict";var _R=Ng();Lg.exports=_R});var jg=p(iu=>{"use strict";iu.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};iu.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var Dg=p(nu=>{"use strict";nu.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};nu.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var Bg=p(su=>{"use strict";su.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};su.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var Fg=p(Qs=>{"use strict";Object.defineProperty(Qs,"cli",{value:jg()});Object.defineProperty(Qs,"npm",{value:Dg()});Object.defineProperty(Qs,"syslog",{value:Bg()})});var ae=p(vn=>{"use strict";Object.defineProperty(vn,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(vn,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(vn,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(vn,"configs",{value:Fg()})});var Xs=p((T4,Zs)=>{"use strict";var lu=ru(),{LEVEL:ou,MESSAGE:au}=ae();lu.enabled=!0;var Ug=/\s+/,Js=class t{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){let r=Object.keys(e).reduce((i,n)=>(i[n]=Ug.test(e[n])?e[n].split(Ug):e[n],i),{});return t.allColors=Object.assign({},t.allColors||{},r),t.allColors}addColors(e){return t.addColors(e)}colorize(e,r,i){if(typeof i>"u"&&(i=r),!Array.isArray(t.allColors[e]))return lu[t.allColors[e]](i);for(let n=0,s=t.allColors[e].length;n<s;n++)i=lu[t.allColors[e][n]](i);return i}transform(e,r){return r.all&&typeof e[au]=="string"&&(e[au]=this.colorize(e[ou],e.level,e[au])),(r.level||r.all||!r.message)&&(e.level=this.colorize(e[ou],e.level)),(r.all||r.message)&&(e.message=this.colorize(e[ou],e.level,e.message)),e}};Zs.exports=t=>new Js(t);Zs.exports.Colorizer=Zs.exports.Format=Js});var $g=p((R4,Wg)=>{"use strict";var{Colorizer:yR}=Xs();Wg.exports=t=>(yR.addColors(t.colors||t),t)});var Hg=p((O4,Vg)=>{"use strict";var mR=Me();Vg.exports=mR(t=>(t.message=`	${t.message}`,t))});var Yg=p((A4,zg)=>{"use strict";var wR=Me(),{LEVEL:Gg,MESSAGE:uu}=ae();zg.exports=wR((t,{stack:e,cause:r})=>{if(t instanceof Error){let n=Object.assign({},t,{level:t.level,[Gg]:t[Gg]||t.level,message:t.message,[uu]:t[uu]||t.message});return e&&(n.stack=t.stack),r&&(n.cause=t.cause),n}if(!(t.message instanceof Error))return t;let i=t.message;return Object.assign(t,i),t.message=i.message,t[uu]=i.message,e&&(t.stack=i.stack),r&&(t.cause=i.cause),t})});var cu=p((P4,to)=>{"use strict";var{configs:vR,LEVEL:Kg,MESSAGE:fu}=ae(),eo=class t{constructor(e={levels:vR.npm.levels}){this.paddings=t.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){let r=Object.keys(e).map(i=>i.length);return Math.max(...r)}static paddingForLevel(e,r,i){let n=i+1-e.length,s=Math.floor(n/r.length);return`${r}${r.repeat(s)}`.slice(0,n)}static paddingForLevels(e,r=" "){let i=t.getLongestLevel(e);return Object.keys(e).reduce((n,s)=>(n[s]=t.paddingForLevel(s,r,i),n),{})}transform(e,r){return e.message=`${this.paddings[e[Kg]]}${e.message}`,e[fu]&&(e[fu]=`${this.paddings[e[Kg]]}${e[fu]}`),e}};to.exports=t=>new eo(t);to.exports.Padder=to.exports.Format=eo});var Qg=p((M4,hu)=>{"use strict";var{Colorizer:SR}=Xs(),{Padder:ER}=cu(),{configs:xR,MESSAGE:TR}=ae(),ro=class{constructor(e={}){e.levels||(e.levels=xR.cli.levels),this.colorizer=new SR(e),this.padder=new ER(e),this.options=e}transform(e,r){return this.colorizer.transform(this.padder.transform(e,r),r),e[TR]=`${e.level}:${e.message}`,e}};hu.exports=t=>new ro(t);hu.exports.Format=ro});var Zg=p((I4,du)=>{"use strict";var RR=Me();function Jg(t){if(t.every(OR))return e=>{let r=e;for(let i=0;i<t.length;i++)if(r=t[i].transform(r,t[i].options),!r)return!1;return r}}function OR(t){if(typeof t.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}du.exports=(...t)=>{let e=RR(Jg(t)),r=e();return r.Format=e.Format,r};du.exports.cascade=Jg});var En=p((_u,tb)=>{"use strict";var{hasOwnProperty:Sn}=Object.prototype,Ar=bu();Ar.configure=bu;Ar.stringify=Ar;Ar.default=Ar;_u.stringify=Ar;_u.configure=bu;tb.exports=Ar;var AR=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function Yt(t){return t.length<5e3&&!AR.test(t)?`"${t}"`:JSON.stringify(t)}function pu(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let i=t[r],n=r;for(;n!==0&&t[n-1]>i;)t[n]=t[n-1],n--;t[n]=i}return t}var PR=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function gu(t){return PR.call(t)!==void 0&&t.length!==0}function Xg(t,e,r){t.length<r&&(r=t.length);let i=e===","?"":" ",n=`"0":${i}${t[0]}`;for(let s=1;s<r;s++)n+=`${e}"${s}":${i}${t[s]}`;return n}function MR(t){if(Sn.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function IR(t){let e;if(Sn.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function qR(t,e){let r;if(Sn.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function eb(t,e){let r;if(Sn.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function Or(t){return t===1?"1 item":`${t} items`}function CR(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function kR(t){if(Sn.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let i=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(i+=` (${r.toString()})`),new Error(i)}}}function bu(t){t={...t};let e=kR(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=MR(t),i=qR(t,"bigint"),n=IR(t),s=typeof n=="function"?n:void 0,o=eb(t,"maximumDepth"),a=eb(t,"maximumBreadth");function l(b,d,g,y,_,m){let S=d[b];switch(typeof S=="object"&&S!==null&&typeof S.toJSON=="function"&&(S=S.toJSON(b)),S=y.call(d,b,S),typeof S){case"string":return Yt(S);case"object":{if(S===null)return"null";if(g.indexOf(S)!==-1)return r;let w="",T=",",M=m;if(Array.isArray(S)){if(S.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(S),_!==""&&(m+=_,w+=`
${m}`,T=`,
${m}`);let oe=Math.min(S.length,a),re=0;for(;re<oe-1;re++){let bi=l(String(re),S,g,y,_,m);w+=bi!==void 0?bi:"null",w+=T}let Ce=l(String(re),S,g,y,_,m);if(w+=Ce!==void 0?Ce:"null",S.length-1>a){let bi=S.length-a-1;w+=`${T}"... ${Or(bi)} not stringified"`}return _!==""&&(w+=`
${M}`),g.pop(),`[${w}]`}let O=Object.keys(S),N=O.length;if(N===0)return"{}";if(o<g.length+1)return'"[Object]"';let R="",$="";_!==""&&(m+=_,T=`,
${m}`,R=" ");let te=Math.min(N,a);n&&!gu(S)&&(O=pu(O,s)),g.push(S);for(let oe=0;oe<te;oe++){let re=O[oe],Ce=l(re,S,g,y,_,m);Ce!==void 0&&(w+=`${$}${Yt(re)}:${R}${Ce}`,$=T)}if(N>a){let oe=N-a;w+=`${$}"...":${R}"${Or(oe)} not stringified"`,$=T}return _!==""&&$.length>1&&(w=`
${m}${w}
${M}`),g.pop(),`{${w}}`}case"number":return isFinite(S)?String(S):e?e(S):"null";case"boolean":return S===!0?"true":"false";case"undefined":return;case"bigint":if(i)return String(S);default:return e?e(S):void 0}}function u(b,d,g,y,_,m){switch(typeof d=="object"&&d!==null&&typeof d.toJSON=="function"&&(d=d.toJSON(b)),typeof d){case"string":return Yt(d);case"object":{if(d===null)return"null";if(g.indexOf(d)!==-1)return r;let S=m,w="",T=",";if(Array.isArray(d)){if(d.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(d),_!==""&&(m+=_,w+=`
${m}`,T=`,
${m}`);let N=Math.min(d.length,a),R=0;for(;R<N-1;R++){let te=u(String(R),d[R],g,y,_,m);w+=te!==void 0?te:"null",w+=T}let $=u(String(R),d[R],g,y,_,m);if(w+=$!==void 0?$:"null",d.length-1>a){let te=d.length-a-1;w+=`${T}"... ${Or(te)} not stringified"`}return _!==""&&(w+=`
${S}`),g.pop(),`[${w}]`}g.push(d);let M="";_!==""&&(m+=_,T=`,
${m}`,M=" ");let O="";for(let N of y){let R=u(N,d[N],g,y,_,m);R!==void 0&&(w+=`${O}${Yt(N)}:${M}${R}`,O=T)}return _!==""&&O.length>1&&(w=`
${m}${w}
${S}`),g.pop(),`{${w}}`}case"number":return isFinite(d)?String(d):e?e(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(i)return String(d);default:return e?e(d):void 0}}function f(b,d,g,y,_){switch(typeof d){case"string":return Yt(d);case"object":{if(d===null)return"null";if(typeof d.toJSON=="function"){if(d=d.toJSON(b),typeof d!="object")return f(b,d,g,y,_);if(d===null)return"null"}if(g.indexOf(d)!==-1)return r;let m=_;if(Array.isArray(d)){if(d.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(d),_+=y;let R=`
${_}`,$=`,
${_}`,te=Math.min(d.length,a),oe=0;for(;oe<te-1;oe++){let Ce=f(String(oe),d[oe],g,y,_);R+=Ce!==void 0?Ce:"null",R+=$}let re=f(String(oe),d[oe],g,y,_);if(R+=re!==void 0?re:"null",d.length-1>a){let Ce=d.length-a-1;R+=`${$}"... ${Or(Ce)} not stringified"`}return R+=`
${m}`,g.pop(),`[${R}]`}let S=Object.keys(d),w=S.length;if(w===0)return"{}";if(o<g.length+1)return'"[Object]"';_+=y;let T=`,
${_}`,M="",O="",N=Math.min(w,a);gu(d)&&(M+=Xg(d,T,a),S=S.slice(d.length),N-=d.length,O=T),n&&(S=pu(S,s)),g.push(d);for(let R=0;R<N;R++){let $=S[R],te=f($,d[$],g,y,_);te!==void 0&&(M+=`${O}${Yt($)}: ${te}`,O=T)}if(w>a){let R=w-a;M+=`${O}"...": "${Or(R)} not stringified"`,O=T}return O!==""&&(M=`
${_}${M}
${m}`),g.pop(),`{${M}}`}case"number":return isFinite(d)?String(d):e?e(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(i)return String(d);default:return e?e(d):void 0}}function c(b,d,g){switch(typeof d){case"string":return Yt(d);case"object":{if(d===null)return"null";if(typeof d.toJSON=="function"){if(d=d.toJSON(b),typeof d!="object")return c(b,d,g);if(d===null)return"null"}if(g.indexOf(d)!==-1)return r;let y="",_=d.length!==void 0;if(_&&Array.isArray(d)){if(d.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(d);let M=Math.min(d.length,a),O=0;for(;O<M-1;O++){let R=c(String(O),d[O],g);y+=R!==void 0?R:"null",y+=","}let N=c(String(O),d[O],g);if(y+=N!==void 0?N:"null",d.length-1>a){let R=d.length-a-1;y+=`,"... ${Or(R)} not stringified"`}return g.pop(),`[${y}]`}let m=Object.keys(d),S=m.length;if(S===0)return"{}";if(o<g.length+1)return'"[Object]"';let w="",T=Math.min(S,a);_&&gu(d)&&(y+=Xg(d,",",a),m=m.slice(d.length),T-=d.length,w=","),n&&(m=pu(m,s)),g.push(d);for(let M=0;M<T;M++){let O=m[M],N=c(O,d[O],g);N!==void 0&&(y+=`${w}${Yt(O)}:${N}`,w=",")}if(S>a){let M=S-a;y+=`${w}"...":"${Or(M)} not stringified"`}return g.pop(),`{${y}}`}case"number":return isFinite(d)?String(d):e?e(d):"null";case"boolean":return d===!0?"true":"false";case"undefined":return;case"bigint":if(i)return String(d);default:return e?e(d):void 0}}function h(b,d,g){if(arguments.length>1){let y="";if(typeof g=="number"?y=" ".repeat(Math.min(g,10)):typeof g=="string"&&(y=g.slice(0,10)),d!=null){if(typeof d=="function")return l("",{"":b},[],d,y,"");if(Array.isArray(d))return u("",b,[],CR(d),y,"")}if(y.length!==0)return f("",b,[],y,"")}return c("",b,[])}return h}});var yu=p((q4,rb)=>{"use strict";var NR=Me(),{MESSAGE:LR}=ae(),jR=En();function DR(t,e){return typeof e=="bigint"?e.toString():e}rb.exports=NR((t,e)=>{let r=jR.configure(e);return t[LR]=r(t,e.replacer||DR,e.space),t})});var nb=p((C4,ib)=>{"use strict";var BR=Me();ib.exports=BR((t,e)=>e.message?(t.message=`[${e.label}] ${t.message}`,t):(t.label=e.label,t))});var ob=p((k4,sb)=>{"use strict";var FR=Me(),{MESSAGE:UR}=ae(),WR=En();sb.exports=FR(t=>{let e={};return t.message&&(e["@message"]=t.message,delete t.message),t.timestamp&&(e["@timestamp"]=t.timestamp,delete t.timestamp),e["@fields"]=t,t[UR]=WR(e),t})});var lb=p((N4,ab)=>{"use strict";var $R=Me();function VR(t,e,r){let i=e.reduce((s,o)=>(s[o]=t[o],delete t[o],s),{}),n=Object.keys(t).reduce((s,o)=>(s[o]=t[o],delete t[o],s),{});return Object.assign(t,i,{[r]:n}),t}function HR(t,e,r){return t[r]=e.reduce((i,n)=>(i[n]=t[n],delete t[n],i),{}),t}ab.exports=$R((t,e={})=>{let r="metadata";e.key&&(r=e.key);let i=[];return!e.fillExcept&&!e.fillWith&&(i.push("level"),i.push("message")),e.fillExcept&&(i=e.fillExcept),i.length>0?VR(t,i,r):e.fillWith?HR(t,e.fillWith,r):t})});var mu=p((L4,ub)=>{"use strict";var wi=1e3,vi=wi*60,Si=vi*60,Pr=Si*24,GR=Pr*7,zR=Pr*365.25;ub.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return YR(t);if(r==="number"&&isFinite(t))return e.long?QR(t):KR(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function YR(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),i=(e[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*zR;case"weeks":case"week":case"w":return r*GR;case"days":case"day":case"d":return r*Pr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Si;case"minutes":case"minute":case"mins":case"min":case"m":return r*vi;case"seconds":case"second":case"secs":case"sec":case"s":return r*wi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function KR(t){var e=Math.abs(t);return e>=Pr?Math.round(t/Pr)+"d":e>=Si?Math.round(t/Si)+"h":e>=vi?Math.round(t/vi)+"m":e>=wi?Math.round(t/wi)+"s":t+"ms"}function QR(t){var e=Math.abs(t);return e>=Pr?io(t,e,Pr,"day"):e>=Si?io(t,e,Si,"hour"):e>=vi?io(t,e,vi,"minute"):e>=wi?io(t,e,wi,"second"):t+" ms"}function io(t,e,r,i){var n=e>=r*1.5;return Math.round(t/r)+" "+i+(n?"s":"")}});var cb=p((xn,fb)=>{"use strict";var JR=Me(),ZR=mu();fb.exports=JR(t=>{let e=+new Date;return xn.diff=e-(xn.prevTime||e),xn.prevTime=e,t.ms=`+${ZR(xn.diff)}`,t})});var pb=p((j4,db)=>{"use strict";var XR=E("util").inspect,eO=Me(),{LEVEL:tO,MESSAGE:hb,SPLAT:rO}=ae();db.exports=eO((t,e={})=>{let r=Object.assign({},t);return delete r[tO],delete r[hb],delete r[rO],t[hb]=XR(r,!1,e.depth||null,e.colorize),t})});var gb=p((D4,so)=>{"use strict";var{MESSAGE:iO}=ae(),no=class{constructor(e){this.template=e}transform(e){return e[iO]=this.template(e),e}};so.exports=t=>new no(t);so.exports.Printf=so.exports.Format=no});var yb=p((B4,_b)=>{"use strict";var nO=Me(),{MESSAGE:bb}=ae(),sO=En();_b.exports=nO(t=>{let e=sO(Object.assign({},t,{level:void 0,message:void 0,splat:void 0})),r=t.padding&&t.padding[t.level]||"";return e!=="{}"?t[bb]=`${t.level}:${r} ${t.message} ${e}`:t[bb]=`${t.level}:${r} ${t.message}`,t})});var vb=p((F4,wb)=>{"use strict";var oO=E("util"),{SPLAT:mb}=ae(),aO=/%[scdjifoO%]/g,lO=/%%/g,wu=class{constructor(e){this.options=e}_splat(e,r){let i=e.message,n=e[mb]||e.splat||[],s=i.match(lO),o=s&&s.length||0,l=r.length-o-n.length,u=l<0?n.splice(l,-1*l):[],f=u.length;if(f)for(let c=0;c<f;c++)Object.assign(e,u[c]);return e.message=oO.format(i,...n),e}transform(e){let r=e.message,i=e[mb]||e.splat;if(!i||!i.length)return e;let n=r&&r.match&&r.match(aO);if(!n&&(i||i.length)){let s=i.length>1?i.splice(0):i,o=s.length;if(o)for(let a=0;a<o;a++)Object.assign(e,s[a]);return e}return n?this._splat(e,n):e}};wb.exports=t=>new wu(t)});var Eb=p((oo,Sb)=>{"use strict";(function(t,e){typeof oo=="object"&&typeof Sb<"u"?e(oo):typeof define=="function"&&define.amd?define(["exports"],e):e(t.fecha={})})(oo,function(t){"use strict";var e=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="\\d\\d?",i="\\d\\d",n="\\d{3}",s="\\d{4}",o="[^\\s]+",a=/\[([^]*?)\]/gm;function l(v,A){for(var Y=[],Pe=0,q=v.length;Pe<q;Pe++)Y.push(v[Pe].substr(0,A));return Y}var u=function(v){return function(A,Y){var Pe=Y[v].map(function(ct){return ct.toLowerCase()}),q=Pe.indexOf(A.toLowerCase());return q>-1?q:null}};function f(v){for(var A=[],Y=1;Y<arguments.length;Y++)A[Y-1]=arguments[Y];for(var Pe=0,q=A;Pe<q.length;Pe++){var ct=q[Pe];for(var Tr in ct)v[Tr]=ct[Tr]}return v}var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],h=["January","February","March","April","May","June","July","August","September","October","November","December"],b=l(h,3),d=l(c,3),g={dayNamesShort:d,dayNames:c,monthNamesShort:b,monthNames:h,amPm:["am","pm"],DoFn:function(v){return v+["th","st","nd","rd"][v%10>3?0:(v-v%10!==10?1:0)*v%10]}},y=f({},g),_=function(v){return y=f(y,v)},m=function(v){return v.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},S=function(v,A){for(A===void 0&&(A=2),v=String(v);v.length<A;)v="0"+v;return v},w={D:function(v){return String(v.getDate())},DD:function(v){return S(v.getDate())},Do:function(v,A){return A.DoFn(v.getDate())},d:function(v){return String(v.getDay())},dd:function(v){return S(v.getDay())},ddd:function(v,A){return A.dayNamesShort[v.getDay()]},dddd:function(v,A){return A.dayNames[v.getDay()]},M:function(v){return String(v.getMonth()+1)},MM:function(v){return S(v.getMonth()+1)},MMM:function(v,A){return A.monthNamesShort[v.getMonth()]},MMMM:function(v,A){return A.monthNames[v.getMonth()]},YY:function(v){return S(String(v.getFullYear()),4).substr(2)},YYYY:function(v){return S(v.getFullYear(),4)},h:function(v){return String(v.getHours()%12||12)},hh:function(v){return S(v.getHours()%12||12)},H:function(v){return String(v.getHours())},HH:function(v){return S(v.getHours())},m:function(v){return String(v.getMinutes())},mm:function(v){return S(v.getMinutes())},s:function(v){return String(v.getSeconds())},ss:function(v){return S(v.getSeconds())},S:function(v){return String(Math.round(v.getMilliseconds()/100))},SS:function(v){return S(Math.round(v.getMilliseconds()/10),2)},SSS:function(v){return S(v.getMilliseconds(),3)},a:function(v,A){return v.getHours()<12?A.amPm[0]:A.amPm[1]},A:function(v,A){return v.getHours()<12?A.amPm[0].toUpperCase():A.amPm[1].toUpperCase()},ZZ:function(v){var A=v.getTimezoneOffset();return(A>0?"-":"+")+S(Math.floor(Math.abs(A)/60)*100+Math.abs(A)%60,4)},Z:function(v){var A=v.getTimezoneOffset();return(A>0?"-":"+")+S(Math.floor(Math.abs(A)/60),2)+":"+S(Math.abs(A)%60,2)}},T=function(v){return+v-1},M=[null,r],O=[null,o],N=["isPm",o,function(v,A){var Y=v.toLowerCase();return Y===A.amPm[0]?0:Y===A.amPm[1]?1:null}],R=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(v){var A=(v+"").match(/([+-]|\d\d)/gi);if(A){var Y=+A[1]*60+parseInt(A[2],10);return A[0]==="+"?Y:-Y}return 0}],$={D:["day",r],DD:["day",i],Do:["day",r+o,function(v){return parseInt(v,10)}],M:["month",r,T],MM:["month",i,T],YY:["year",i,function(v){var A=new Date,Y=+(""+A.getFullYear()).substr(0,2);return+(""+(+v>68?Y-1:Y)+v)}],h:["hour",r,void 0,"isPm"],hh:["hour",i,void 0,"isPm"],H:["hour",r],HH:["hour",i],m:["minute",r],mm:["minute",i],s:["second",r],ss:["second",i],YYYY:["year",s],S:["millisecond","\\d",function(v){return+v*100}],SS:["millisecond",i,function(v){return+v*10}],SSS:["millisecond",n],d:M,dd:M,ddd:O,dddd:O,MMM:["month",o,u("monthNamesShort")],MMMM:["month",o,u("monthNames")],a:N,A:N,ZZ:R,Z:R},te={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},oe=function(v){return f(te,v)},re=function(v,A,Y){if(A===void 0&&(A=te.default),Y===void 0&&(Y={}),typeof v=="number"&&(v=new Date(v)),Object.prototype.toString.call(v)!=="[object Date]"||isNaN(v.getTime()))throw new Error("Invalid Date pass to format");A=te[A]||A;var Pe=[];A=A.replace(a,function(ct,Tr){return Pe.push(Tr),"@@@"});var q=f(f({},y),Y);return A=A.replace(e,function(ct){return w[ct](v,q)}),A.replace(/@@@/g,function(){return Pe.shift()})};function Ce(v,A,Y){if(Y===void 0&&(Y={}),typeof A!="string")throw new Error("Invalid format in fecha parse");if(A=te[A]||A,v.length>1e3)return null;var Pe=new Date,q={year:Pe.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},ct=[],Tr=[],yn=A.replace(a,function(mn,_i){return Tr.push(m(_i)),"@@@"}),Ws={},gp={};yn=m(yn).replace(e,function(mn){var _i=$[mn],zl=_i[0],NT=_i[1],mp=_i[3];if(Ws[zl])throw new Error("Invalid format. "+zl+" specified twice in format");return Ws[zl]=!0,mp&&(gp[mp]=!0),ct.push(_i),"("+NT+")"}),Object.keys(gp).forEach(function(mn){if(!Ws[mn])throw new Error("Invalid format. "+mn+" is required in specified format")}),yn=yn.replace(/@@@/g,function(){return Tr.shift()});var $s=v.match(new RegExp(yn,"i"));if(!$s)return null;for(var qT=f(f({},y),Y),Ze=1;Ze<$s.length;Ze++){var bp=ct[Ze-1],CT=bp[0],_p=bp[2],yp=_p?_p($s[Ze],qT):+$s[Ze];if(yp==null)return null;q[CT]=yp}q.isPm===1&&q.hour!=null&&+q.hour!=12?q.hour=+q.hour+12:q.isPm===0&&+q.hour==12&&(q.hour=0);var Vs;if(q.timezoneOffset==null){Vs=new Date(q.year,q.month,q.day,q.hour,q.minute,q.second,q.millisecond);for(var Hs=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Ze=0,kT=Hs.length;Ze<kT;Ze++)if(Ws[Hs[Ze][0]]&&q[Hs[Ze][0]]!==Vs[Hs[Ze][1]]())return null}else if(Vs=new Date(Date.UTC(q.year,q.month,q.day,q.hour,q.minute-q.timezoneOffset,q.second,q.millisecond)),q.month>11||q.month<0||q.day>31||q.day<1||q.hour>23||q.hour<0||q.minute>59||q.minute<0||q.second>59||q.second<0)return null;return Vs}var bi={format:re,parse:Ce,defaultI18n:g,setGlobalDateI18n:_,setGlobalDateMasks:oe};t.assign=f,t.default=bi,t.format=re,t.parse=Ce,t.defaultI18n=g,t.setGlobalDateI18n=_,t.setGlobalDateMasks=oe,Object.defineProperty(t,"__esModule",{value:!0})})});var Tb=p((U4,xb)=>{"use strict";var uO=Eb(),fO=Me();xb.exports=fO((t,e={})=>(e.format&&(t.timestamp=typeof e.format=="function"?e.format():uO.format(new Date,e.format)),t.timestamp||(t.timestamp=new Date().toISOString()),e.alias&&(t[e.alias]=t.timestamp),t))});var Ob=p((W4,Rb)=>{"use strict";var vu=ru(),cO=Me(),{MESSAGE:Su}=ae();Rb.exports=cO((t,e)=>(e.level!==!1&&(t.level=vu.strip(t.level)),e.message!==!1&&(t.message=vu.strip(String(t.message))),e.raw!==!1&&t[Su]&&(t[Su]=vu.strip(String(t[Su]))),t))});var xu=p(Eu=>{"use strict";var hO=Eu.format=Me();Eu.levels=$g();function _e(t,e){Object.defineProperty(hO,t,{get(){return e()},configurable:!0})}_e("align",function(){return Hg()});_e("errors",function(){return Yg()});_e("cli",function(){return Qg()});_e("combine",function(){return Zg()});_e("colorize",function(){return Xs()});_e("json",function(){return yu()});_e("label",function(){return nb()});_e("logstash",function(){return ob()});_e("metadata",function(){return lb()});_e("ms",function(){return cb()});_e("padLevels",function(){return cu()});_e("prettyPrint",function(){return pb()});_e("printf",function(){return gb()});_e("simple",function(){return yb()});_e("splat",function(){return vb()});_e("timestamp",function(){return Tb()});_e("uncolorize",function(){return Ob()})});var Tu=p(ao=>{"use strict";var{format:Ab}=E("util");ao.warn={deprecated(t){return()=>{throw new Error(Ab("{ %s } was removed in winston@3.0.0.",t))}},useFormat(t){return()=>{throw new Error([Ab("{ %s } was removed in winston@3.0.0.",t),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(t,e,r){r.forEach(i=>{t[i]=ao.warn[e](i)})},forProperties(t,e,r){r.forEach(i=>{let n=ao.warn[e](i);Object.defineProperty(t,i,{get:n,set:n})})}}});var Pb=p((H4,dO)=>{dO.exports={name:"winston",description:"A logger for just about everything.",version:"3.17.0",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.2","@colors/colors":"^1.6.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.7.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.9.0"},devDependencies:{"@babel/cli":"^7.23.9","@babel/core":"^7.24.0","@babel/preset-env":"^7.24.0","@dabh/eslint-config-populist":"^4.4.0","@types/node":"^20.11.24","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.57.0",hock:"^1.4.1",mocha:"^10.3.0",nyc:"^17.1.0",rimraf:"5.0.1",split2:"^4.1.0","std-mocks":"^2.0.0",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"rimraf test/fixtures/logs/* && mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var Ru=p((G4,Mb)=>{"use strict";Mb.exports=E("util").deprecate});var Ou=p((z4,Ib)=>{"use strict";Ib.exports=E("stream")});var Pu=p((Y4,Cb)=>{"use strict";function pO(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Au,this,t)):process.nextTick(Au,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(lo,r):(r._writableState.errorEmitted=!0,process.nextTick(qb,r,s)):process.nextTick(qb,r,s):e?(process.nextTick(lo,r),e(s)):process.nextTick(lo,r)}),this)}function qb(t,e){Au(t,e),lo(t)}function lo(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function gO(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Au(t,e){t.emit("error",e)}function bO(t,e){var r=t._readableState,i=t._writableState;r&&r.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}Cb.exports={destroy:pO,undestroy:gO,errorOrDestroy:bO}});var Ei=p((K4,Lb)=>{"use strict";var Nb={};function Fe(t,e,r){r||(r=Error);function i(s,o,a){return typeof e=="string"?e:e(s,o,a)}class n extends r{constructor(o,a,l){super(i(o,a,l))}}n.prototype.name=r.name,n.prototype.code=t,Nb[t]=n}function kb(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(i=>String(i)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function _O(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function yO(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function mO(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Fe("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Fe("ERR_INVALID_ARG_TYPE",function(t,e,r){let i;typeof e=="string"&&_O(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be";let n;if(yO(t," argument"))n=`The ${t} ${i} ${kb(e,"type")}`;else{let s=mO(t,".")?"property":"argument";n=`The "${t}" ${s} ${i} ${kb(e,"type")}`}return n+=`. Received type ${typeof r}`,n},TypeError);Fe("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Fe("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Fe("ERR_STREAM_PREMATURE_CLOSE","Premature close");Fe("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Fe("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Fe("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Fe("ERR_STREAM_WRITE_AFTER_END","write after end");Fe("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Fe("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Fe("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Lb.exports.codes=Nb});var Mu=p((Q4,jb)=>{"use strict";var wO=Ei().codes.ERR_INVALID_OPT_VALUE;function vO(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function SO(t,e,r,i){var n=vO(e,i,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var s=i?r:"highWaterMark";throw new wO(s,n)}return Math.floor(n)}return t.objectMode?16:16*1024}jb.exports={getHighWaterMark:SO}});var Db=p((J4,Iu)=>{"use strict";typeof Object.create=="function"?Iu.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Iu.exports=function(e,r){if(r){e.super_=r;var i=function(){};i.prototype=r.prototype,e.prototype=new i,e.prototype.constructor=e}}});var ht=p((Z4,Cu)=>{"use strict";try{if(qu=E("util"),typeof qu.inherits!="function")throw"";Cu.exports=qu.inherits}catch{Cu.exports=Db()}var qu});var Vb=p((X4,$b)=>{"use strict";function Bb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function Fb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Bb(Object(r),!0).forEach(function(i){EO(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bb(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function EO(t,e,r){return e=Wb(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ub(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Wb(i.key),i)}}function TO(t,e,r){return e&&Ub(t.prototype,e),r&&Ub(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wb(t){var e=RO(t,"string");return typeof e=="symbol"?e:String(e)}function RO(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OO=E("buffer"),uo=OO.Buffer,AO=E("util"),ku=AO.inspect,PO=ku&&ku.custom||"inspect";function MO(t,e,r){uo.prototype.copy.call(t,e,r)}$b.exports=function(){function t(){xO(this,t),this.head=null,this.tail=null,this.length=0}return TO(t,[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n}},{key:"concat",value:function(r){if(this.length===0)return uo.alloc(0);for(var i=uo.allocUnsafe(r>>>0),n=this.head,s=0;n;)MO(n.data,i,s),s+=n.data.length,n=n.next;return i}},{key:"consume",value:function(r,i){var n;return r<this.head.data.length?(n=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?n=this.shift():n=i?this._getString(r):this._getBuffer(r),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,n=1,s=i.data;for(r-=s.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++n}return this.length-=n,s}},{key:"_getBuffer",value:function(r){var i=uo.allocUnsafe(r),n=this.head,s=1;for(n.data.copy(i),r-=n.data.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(o.copy(i,i.length-r,0,a),r-=a,r===0){a===o.length?(++s,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++s}return this.length-=s,i}},{key:PO,value:function(r,i){return ku(this,Fb(Fb({},i),{},{depth:0,customInspect:!1}))}}]),t}()});var zb=p((Nu,Gb)=>{"use strict";var fo=E("buffer"),dt=fo.Buffer;function Hb(t,e){for(var r in t)e[r]=t[r]}dt.from&&dt.alloc&&dt.allocUnsafe&&dt.allocUnsafeSlow?Gb.exports=fo:(Hb(fo,Nu),Nu.Buffer=Mr);function Mr(t,e,r){return dt(t,e,r)}Mr.prototype=Object.create(dt.prototype);Hb(dt,Mr);Mr.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return dt(t,e,r)};Mr.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var i=dt(t);return e!==void 0?typeof r=="string"?i.fill(e,r):i.fill(e):i.fill(0),i};Mr.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return dt(t)};Mr.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return fo.SlowBuffer(t)}});var Rn=p(Kb=>{"use strict";var ju=zb().Buffer,Yb=ju.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function IO(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function qO(t){var e=IO(t);if(typeof e!="string"&&(ju.isEncoding===Yb||!Yb(t)))throw new Error("Unknown encoding: "+t);return e||t}Kb.StringDecoder=Tn;function Tn(t){this.encoding=qO(t);var e;switch(this.encoding){case"utf16le":this.text=DO,this.end=BO,e=4;break;case"utf8":this.fillLast=NO,e=4;break;case"base64":this.text=FO,this.end=UO,e=3;break;default:this.write=WO,this.end=$O;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ju.allocUnsafe(e)}Tn.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Tn.prototype.end=jO;Tn.prototype.text=LO;Tn.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Lu(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function CO(t,e,r){var i=e.length-1;if(i<r)return 0;var n=Lu(e[i]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--i<r||n===-2?0:(n=Lu(e[i]),n>=0?(n>0&&(t.lastNeed=n-2),n):--i<r||n===-2?0:(n=Lu(e[i]),n>=0?(n>0&&(n===2?n=0:t.lastNeed=n-3),n):0))}function kO(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function NO(t){var e=this.lastTotal-this.lastNeed,r=kO(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function LO(t,e){var r=CO(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function jO(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function DO(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function BO(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function FO(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function UO(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function WO(t){return t.toString(this.encoding)}function $O(t){return t&&t.length?this.write(t):""}});var Xb=p((tW,Zb)=>{"use strict";var Qb=Ei().codes.ERR_STREAM_PREMATURE_CLOSE;function VO(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];t.apply(this,i)}}}function HO(){}function GO(t){return t.setHeader&&typeof t.abort=="function"}function Jb(t,e,r){if(typeof e=="function")return Jb(t,null,e);e||(e={}),r=VO(r||HO);var i=e.readable||e.readable!==!1&&t.readable,n=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){n=!1,o=!0,i||r.call(t)},l=t._readableState&&t._readableState.endEmitted,u=function(){i=!1,l=!0,n||r.call(t)},f=function(d){r.call(t,d)},c=function(){var d;if(i&&!l)return(!t._readableState||!t._readableState.ended)&&(d=new Qb),r.call(t,d);if(n&&!o)return(!t._writableState||!t._writableState.ended)&&(d=new Qb),r.call(t,d)},h=function(){t.req.on("finish",a)};return GO(t)?(t.on("complete",a),t.on("abort",c),t.req?h():t.on("request",h)):n&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",c),function(){t.removeListener("complete",a),t.removeListener("abort",c),t.removeListener("request",h),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",f),t.removeListener("close",c)}}Zb.exports=Jb});var t_=p((rW,e_)=>{"use strict";var co;function Kt(t,e,r){return e=zO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zO(t){var e=YO(t,"string");return typeof e=="symbol"?e:String(e)}function YO(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var KO=Xb(),Qt=Symbol("lastResolve"),Ir=Symbol("lastReject"),On=Symbol("error"),ho=Symbol("ended"),qr=Symbol("lastPromise"),Du=Symbol("handlePromise"),Cr=Symbol("stream");function Jt(t,e){return{value:t,done:e}}function QO(t){var e=t[Qt];if(e!==null){var r=t[Cr].read();r!==null&&(t[qr]=null,t[Qt]=null,t[Ir]=null,e(Jt(r,!1)))}}function JO(t){process.nextTick(QO,t)}function ZO(t,e){return function(r,i){t.then(function(){if(e[ho]){r(Jt(void 0,!0));return}e[Du](r,i)},i)}}var XO=Object.getPrototypeOf(function(){}),eA=Object.setPrototypeOf((co={get stream(){return this[Cr]},next:function(){var e=this,r=this[On];if(r!==null)return Promise.reject(r);if(this[ho])return Promise.resolve(Jt(void 0,!0));if(this[Cr].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[On]?a(e[On]):o(Jt(void 0,!0))})});var i=this[qr],n;if(i)n=new Promise(ZO(i,this));else{var s=this[Cr].read();if(s!==null)return Promise.resolve(Jt(s,!1));n=new Promise(this[Du])}return this[qr]=n,n}},Kt(co,Symbol.asyncIterator,function(){return this}),Kt(co,"return",function(){var e=this;return new Promise(function(r,i){e[Cr].destroy(null,function(n){if(n){i(n);return}r(Jt(void 0,!0))})})}),co),XO),tA=function(e){var r,i=Object.create(eA,(r={},Kt(r,Cr,{value:e,writable:!0}),Kt(r,Qt,{value:null,writable:!0}),Kt(r,Ir,{value:null,writable:!0}),Kt(r,On,{value:null,writable:!0}),Kt(r,ho,{value:e._readableState.endEmitted,writable:!0}),Kt(r,Du,{value:function(s,o){var a=i[Cr].read();a?(i[qr]=null,i[Qt]=null,i[Ir]=null,s(Jt(a,!1))):(i[Qt]=s,i[Ir]=o)},writable:!0}),r));return i[qr]=null,KO(e,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=i[Ir];s!==null&&(i[qr]=null,i[Qt]=null,i[Ir]=null,s(n)),i[On]=n;return}var o=i[Qt];o!==null&&(i[qr]=null,i[Qt]=null,i[Ir]=null,o(Jt(void 0,!0))),i[ho]=!0}),e.on("readable",JO.bind(null,i)),i};e_.exports=tA});var s_=p((iW,n_)=>{"use strict";function r_(t,e,r,i,n,s,o){try{var a=t[s](o),l=a.value}catch(u){r(u);return}a.done?e(l):Promise.resolve(l).then(i,n)}function rA(t){return function(){var e=this,r=arguments;return new Promise(function(i,n){var s=t.apply(e,r);function o(l){r_(s,i,n,o,a,"next",l)}function a(l){r_(s,i,n,o,a,"throw",l)}o(void 0)})}}function i_(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function iA(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?i_(Object(r),!0).forEach(function(i){nA(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i_(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function nA(t,e,r){return e=sA(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function sA(t){var e=oA(t,"string");return typeof e=="symbol"?e:String(e)}function oA(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var aA=Ei().codes.ERR_INVALID_ARG_TYPE;function lA(t,e,r){var i;if(e&&typeof e.next=="function")i=e;else if(e&&e[Symbol.asyncIterator])i=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])i=e[Symbol.iterator]();else throw new aA("iterable",["Iterable"],e);var n=new t(iA({objectMode:!0},r)),s=!1;n._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=rA(function*(){try{var l=yield i.next(),u=l.value,f=l.done;f?n.push(null):n.push(yield u)?o():s=!1}catch(c){n.destroy(c)}}),a.apply(this,arguments)}return n}n_.exports=lA});var b_=p((sW,g_)=>{"use strict";g_.exports=V;var xi;V.ReadableState=u_;var nW=E("events").EventEmitter,l_=function(e,r){return e.listeners(r).length},Pn=Ou(),po=E("buffer").Buffer,uA=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function fA(t){return po.from(t)}function cA(t){return po.isBuffer(t)||t instanceof uA}var Bu=E("util"),j;Bu&&Bu.debuglog?j=Bu.debuglog("stream"):j=function(){};var hA=Vb(),Gu=Pu(),dA=Mu(),pA=dA.getHighWaterMark,go=Ei().codes,gA=go.ERR_INVALID_ARG_TYPE,bA=go.ERR_STREAM_PUSH_AFTER_EOF,_A=go.ERR_METHOD_NOT_IMPLEMENTED,yA=go.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Ti,Fu,Uu;ht()(V,Pn);var An=Gu.errorOrDestroy,Wu=["error","close","destroy","pause","resume"];function mA(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function u_(t,e,r){xi=xi||Mn(),t=t||{},typeof r!="boolean"&&(r=e instanceof xi),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=pA(this,t,"readableHighWaterMark",r),this.buffer=new hA,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Ti||(Ti=Rn().StringDecoder),this.decoder=new Ti(t.encoding),this.encoding=t.encoding)}function V(t){if(xi=xi||Mn(),!(this instanceof V))return new V(t);var e=this instanceof xi;this._readableState=new u_(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Pn.call(this)}Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});V.prototype.destroy=Gu.destroy;V.prototype._undestroy=Gu.undestroy;V.prototype._destroy=function(t,e){e(t)};V.prototype.push=function(t,e){var r=this._readableState,i;return r.objectMode?i=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=po.from(t,e),e=""),i=!0),f_(this,t,e,!1,i)};V.prototype.unshift=function(t){return f_(this,t,null,!0,!1)};function f_(t,e,r,i,n){j("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,SA(t,s);else{var o;if(n||(o=wA(s,e)),o)An(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==po.prototype&&(e=fA(e)),i)s.endEmitted?An(t,new yA):$u(t,s,e,!0);else if(s.ended)An(t,new bA);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?$u(t,s,e,!1):Hu(t,s)):$u(t,s,e,!1)}else i||(s.reading=!1,Hu(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function $u(t,e,r,i){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&bo(t)),Hu(t,e)}function wA(t,e){var r;return!cA(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new gA("chunk",["string","Buffer","Uint8Array"],e)),r}V.prototype.isPaused=function(){return this._readableState.flowing===!1};V.prototype.setEncoding=function(t){Ti||(Ti=Rn().StringDecoder);var e=new Ti(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";r!==null;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var o_=1073741824;function vA(t){return t>=o_?t=o_:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function a_(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=vA(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}V.prototype.read=function(t){j("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return j("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Vu(this):bo(this),null;if(t=a_(t,e),t===0&&e.ended)return e.length===0&&Vu(this),null;var i=e.needReadable;j("need readable",i),(e.length===0||e.length-t<e.highWaterMark)&&(i=!0,j("length less than watermark",i)),e.ended||e.reading?(i=!1,j("reading or ended",i)):i&&(j("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=a_(r,e)));var n;return t>0?n=d_(t,e):n=null,n===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Vu(this)),n!==null&&this.emit("data",n),n};function SA(t,e){if(j("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?bo(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,c_(t)))}}function bo(t){var e=t._readableState;j("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(j("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(c_,t))}function c_(t){var e=t._readableState;j("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,zu(t)}function Hu(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(EA,t,e))}function EA(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(j("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}V.prototype._read=function(t){An(this,new _A("_read()"))};V.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1,j("pipe count=%d opts=%j",i.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=n?a:g;i.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(y,_){j("onunpipe"),y===r&&_&&_.hasUnpiped===!1&&(_.hasUnpiped=!0,f())}function a(){j("onend"),t.end()}var l=xA(r);t.on("drain",l);var u=!1;function f(){j("cleanup"),t.removeListener("close",b),t.removeListener("finish",d),t.removeListener("drain",l),t.removeListener("error",h),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",c),u=!0,i.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",c);function c(y){j("ondata");var _=t.write(y);j("dest.write",_),_===!1&&((i.pipesCount===1&&i.pipes===t||i.pipesCount>1&&p_(i.pipes,t)!==-1)&&!u&&(j("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function h(y){j("onerror",y),g(),t.removeListener("error",h),l_(t,"error")===0&&An(t,y)}mA(t,"error",h);function b(){t.removeListener("finish",d),g()}t.once("close",b);function d(){j("onfinish"),t.removeListener("close",b),g()}t.once("finish",d);function g(){j("unpipe"),r.unpipe(t)}return t.emit("pipe",r),i.flowing||(j("pipe resume"),r.resume()),t};function xA(t){return function(){var r=t._readableState;j("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&l_(t,"data")&&(r.flowing=!0,zu(t))}}V.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=p_(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};V.prototype.on=function(t,e){var r=Pn.prototype.on.call(this,t,e),i=this._readableState;return t==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):t==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,j("on readable",i.length,i.reading),i.length?bo(this):i.reading||process.nextTick(TA,this)),r};V.prototype.addListener=V.prototype.on;V.prototype.removeListener=function(t,e){var r=Pn.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(h_,this),r};V.prototype.removeAllListeners=function(t){var e=Pn.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(h_,this),e};function h_(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function TA(t){j("readable nexttick read 0"),t.read(0)}V.prototype.resume=function(){var t=this._readableState;return t.flowing||(j("resume"),t.flowing=!t.readableListening,RA(this,t)),t.paused=!1,this};function RA(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(OA,t,e))}function OA(t,e){j("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),zu(t),e.flowing&&!e.reading&&t.read(0)}V.prototype.pause=function(){return j("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(j("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function zu(t){var e=t._readableState;for(j("flow",e.flowing);e.flowing&&t.read()!==null;);}V.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;t.on("end",function(){if(j("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(j("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(i=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(a){return function(){return t[a].apply(t,arguments)}}(n));for(var s=0;s<Wu.length;s++)t.on(Wu[s],this.emit.bind(this,Wu[s]));return this._read=function(o){j("wrapped _read",o),i&&(i=!1,t.resume())},this};typeof Symbol=="function"&&(V.prototype[Symbol.asyncIterator]=function(){return Fu===void 0&&(Fu=t_()),Fu(this)});Object.defineProperty(V.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(V.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(V.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});V._fromList=d_;Object.defineProperty(V.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function d_(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Vu(t){var e=t._readableState;j("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(AA,e,t))}function AA(t,e){if(j("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(V.from=function(t,e){return Uu===void 0&&(Uu=s_()),Uu(V,t,e)});function p_(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}});var Mn=p((oW,y_)=>{"use strict";var PA=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};y_.exports=pt;var __=b_(),Ku=Qu();ht()(pt,__);for(Yu=PA(Ku.prototype),_o=0;_o<Yu.length;_o++)yo=Yu[_o],pt.prototype[yo]||(pt.prototype[yo]=Ku.prototype[yo]);var Yu,yo,_o;function pt(t){if(!(this instanceof pt))return new pt(t);__.call(this,t),Ku.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",MA)))}Object.defineProperty(pt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(pt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(pt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function MA(){this._writableState.ended||process.nextTick(IA,this)}function IA(t){t.end()}Object.defineProperty(pt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Qu=p((aW,x_)=>{"use strict";x_.exports=ie;function w_(t){var e=this;this.next=null,this.entry=null,this.finish=function(){n2(e,t)}}var Ri;ie.WritableState=qn;var qA={deprecate:Ru()},v_=Ou(),wo=E("buffer").Buffer,CA=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function kA(t){return wo.from(t)}function NA(t){return wo.isBuffer(t)||t instanceof CA}var Zu=Pu(),LA=Mu(),jA=LA.getHighWaterMark,Zt=Ei().codes,DA=Zt.ERR_INVALID_ARG_TYPE,BA=Zt.ERR_METHOD_NOT_IMPLEMENTED,FA=Zt.ERR_MULTIPLE_CALLBACK,UA=Zt.ERR_STREAM_CANNOT_PIPE,WA=Zt.ERR_STREAM_DESTROYED,$A=Zt.ERR_STREAM_NULL_VALUES,VA=Zt.ERR_STREAM_WRITE_AFTER_END,HA=Zt.ERR_UNKNOWN_ENCODING,Oi=Zu.errorOrDestroy;ht()(ie,v_);function GA(){}function qn(t,e,r){Ri=Ri||Mn(),t=t||{},typeof r!="boolean"&&(r=e instanceof Ri),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=jA(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){XA(e,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new w_(this)}qn.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(qn.prototype,"buffer",{get:qA.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var mo;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(mo=Function.prototype[Symbol.hasInstance],Object.defineProperty(ie,Symbol.hasInstance,{value:function(e){return mo.call(this,e)?!0:this!==ie?!1:e&&e._writableState instanceof qn}})):mo=function(e){return e instanceof this};function ie(t){Ri=Ri||Mn();var e=this instanceof Ri;if(!e&&!mo.call(ie,this))return new ie(t);this._writableState=new qn(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),v_.call(this)}ie.prototype.pipe=function(){Oi(this,new UA)};function zA(t,e){var r=new VA;Oi(t,r),process.nextTick(e,r)}function YA(t,e,r,i){var n;return r===null?n=new $A:typeof r!="string"&&!e.objectMode&&(n=new DA("chunk",["string","Buffer"],r)),n?(Oi(t,n),process.nextTick(i,n),!1):!0}ie.prototype.write=function(t,e,r){var i=this._writableState,n=!1,s=!i.objectMode&&NA(t);return s&&!wo.isBuffer(t)&&(t=kA(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),typeof r!="function"&&(r=GA),i.ending?zA(this,r):(s||YA(this,i,t,r))&&(i.pendingcb++,n=QA(this,i,s,t,e,r)),n};ie.prototype.cork=function(){this._writableState.corked++};ie.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&S_(this,t))};ie.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new HA(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ie.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function KA(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=wo.from(e,r)),e}Object.defineProperty(ie.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function QA(t,e,r,i,n,s){if(!r){var o=KA(e,i,n);i!==o&&(r=!0,n="buffer",i=o)}var a=e.objectMode?1:i.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Ju(t,e,!1,a,i,n,s);return l}function Ju(t,e,r,i,n,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new WA("write")):r?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function JA(t,e,r,i,n){--e.pendingcb,r?(process.nextTick(n,i),process.nextTick(In,t,e),t._writableState.errorEmitted=!0,Oi(t,i)):(n(i),t._writableState.errorEmitted=!0,Oi(t,i),In(t,e))}function ZA(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function XA(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(typeof n!="function")throw new FA;if(ZA(r),e)JA(t,r,i,e,n);else{var s=E_(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&S_(t,r),i?process.nextTick(m_,t,r,s,n):m_(t,r,s,n)}}function m_(t,e,r,i){r||e2(t,e),e.pendingcb--,i(),In(t,e)}function e2(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function S_(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)n[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;n.allBuffers=a,Ju(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new w_(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,f=r.callback,c=e.objectMode?1:l.length;if(Ju(t,e,!1,c,l,u,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ie.prototype._write=function(t,e,r){r(new BA("_write()"))};ie.prototype._writev=null;ie.prototype.end=function(t,e,r){var i=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i2(this,i,r),this};Object.defineProperty(ie.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function E_(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function t2(t,e){t._final(function(r){e.pendingcb--,r&&Oi(t,r),e.prefinished=!0,t.emit("prefinish"),In(t,e)})}function r2(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(t2,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function In(t,e){var r=E_(e);if(r&&(r2(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}function i2(t,e,r){e.ending=!0,In(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function n2(t,e,r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree.next=t}Object.defineProperty(ie.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});ie.prototype.destroy=Zu.destroy;ie.prototype._undestroy=Zu.undestroy;ie.prototype._destroy=function(t,e){e(t)}});var Xu=p((lW,O_)=>{"use strict";var s2=E("util"),T_=Qu(),{LEVEL:R_}=ae(),Cn=O_.exports=function(e={}){T_.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close())})};s2.inherits(Cn,T_);Cn.prototype._write=function(e,r,i){if(this.silent||e.exception===!0&&!this.handleExceptions)return i(null);let n=this.level||this.parent&&this.parent.level;if(!n||this.levels[n]>=this.levels[e[R_]]){if(e&&!this.format)return this.log(e,i);let s,o;try{o=this.format.transform(Object.assign({},e),this.format.options)}catch(a){s=a}if(s||!o){if(i(),s)throw s;return}return this.log(o,i)}return this._writableState.sync=!1,i(null)};Cn.prototype._writev=function(e,r){if(this.logv){let i=e.filter(this._accept,this);return i.length?this.logv(i,r):r(null)}for(let i=0;i<e.length;i++){if(!this._accept(e[i]))continue;if(e[i].chunk&&!this.format){this.log(e[i].chunk,e[i].callback);continue}let n,s;try{s=this.format.transform(Object.assign({},e[i].chunk),this.format.options)}catch(o){n=o}if(n||!s){if(e[i].callback(),n)throw r(null),n}else this.log(s,e[i].callback)}return r(null)};Cn.prototype._accept=function(e){let r=e.chunk;if(this.silent)return!1;let i=this.level||this.parent&&this.parent.level;return!!((r.exception===!0||!i||this.levels[i]>=this.levels[r[R_]])&&(this.handleExceptions||r.exception!==!0))};Cn.prototype._nop=function(){}});var tf=p((uW,P_)=>{"use strict";var o2=E("util"),{LEVEL:ef}=ae(),A_=Xu(),kn=P_.exports=function(e={}){if(A_.call(this,e),!e.transport||typeof e.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated();function r(i){this.emit("error",i,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError))};o2.inherits(kn,A_);kn.prototype._write=function(e,r,i){if(this.silent||e.exception===!0&&!this.handleExceptions)return i(null);(!this.level||this.levels[this.level]>=this.levels[e[ef]])&&this.transport.log(e[ef],e.message,e,this._nop),i(null)};kn.prototype._writev=function(e,r){for(let i=0;i<e.length;i++)this._accept(e[i])&&(this.transport.log(e[i].chunk[ef],e[i].chunk.message,e[i].chunk,this._nop),e[i].callback());return r(null)};kn.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};kn.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var Ai=p((fW,rf)=>{"use strict";rf.exports=Xu();rf.exports.LegacyTransportStream=tf()});var q_=p((hW,I_)=>{"use strict";var a2=E("os"),{LEVEL:M_,MESSAGE:Pi}=ae(),l2=Ai();I_.exports=class extends l2{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=typeof e.eol=="string"?e.eol:a2.EOL,this.forceConsole=e.forceConsole||!1,this._consoleLog=console.log.bind(console),this._consoleWarn=console.warn.bind(console),this._consoleError=console.error.bind(console),this.setMaxListeners(30)}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[M_]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[Pi]}${this.eol}`):this._consoleError(e[Pi]),r&&r();return}else if(this.consoleWarnLevels[e[M_]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[Pi]}${this.eol}`):this._consoleWarn(e[Pi]),r&&r();return}console._stdout&&!this.forceConsole?console._stdout.write(`${e[Pi]}${this.eol}`):this._consoleLog(e[Pi]),r&&r()}_stringArrayToSet(e,r){if(!e)return{};if(r=r||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(r);return e.reduce((i,n)=>{if(typeof n!="string")throw new Error(r);return i[n]=!0,i},{})}}});var So=p((vo,C_)=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.default=u2;function u2(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}C_.exports=vo.default});var N_=p((Eo,k_)=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.default=function(t){return function(...e){var r=e.pop();return t.call(this,e,r)}};k_.exports=Eo.default});var D_=p(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.fallback=L_;Xt.wrap=j_;var f2=Xt.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,c2=Xt.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,h2=Xt.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function L_(t){setTimeout(t,0)}function j_(t){return(e,...r)=>t(()=>e(...r))}var Nn;f2?Nn=queueMicrotask:c2?Nn=setImmediate:h2?Nn=process.nextTick:Nn=L_;Xt.default=j_(Nn)});var $_=p((xo,W_)=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.default=y2;var d2=N_(),p2=U_(d2),g2=D_(),b2=U_(g2),_2=kr();function U_(t){return t&&t.__esModule?t:{default:t}}function y2(t){return(0,_2.isAsync)(t)?function(...e){let r=e.pop(),i=t.apply(this,e);return B_(i,r)}:(0,p2.default)(function(e,r){var i;try{i=t.apply(this,e)}catch(n){return r(n)}if(i&&typeof i.then=="function")return B_(i,r);r(null,i)})}function B_(t,e){return t.then(r=>{F_(e,null,r)},r=>{F_(e,r&&(r instanceof Error||r.message)?r:new Error(r))})}function F_(t,e,r){try{t(e,r)}catch(i){(0,b2.default)(n=>{throw n},i)}}W_.exports=xo.default});var kr=p(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.isAsyncIterable=kt.isAsyncGenerator=kt.isAsync=void 0;var m2=$_(),w2=v2(m2);function v2(t){return t&&t.__esModule?t:{default:t}}function V_(t){return t[Symbol.toStringTag]==="AsyncFunction"}function S2(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function E2(t){return typeof t[Symbol.asyncIterator]=="function"}function x2(t){if(typeof t!="function")throw new Error("expected a function");return V_(t)?(0,w2.default)(t):t}kt.default=x2;kt.isAsync=V_;kt.isAsyncGenerator=S2;kt.isAsyncIterable=E2});var Mi=p((To,H_)=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.default=T2;function T2(t,e){if(e||(e=t.length),!e)throw new Error("arity is undefined");function r(...i){return typeof i[e-1]=="function"?t.apply(this,i):new Promise((n,s)=>{i[e-1]=(o,...a)=>{if(o)return s(o);n(a.length>1?a:a[0])},t.apply(this,i)})}return r}H_.exports=To.default});var z_=p((Ro,G_)=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});var R2=So(),O2=nf(R2),A2=kr(),P2=nf(A2),M2=Mi(),I2=nf(M2);function nf(t){return t&&t.__esModule?t:{default:t}}Ro.default=(0,I2.default)((t,e,r)=>{var i=(0,O2.default)(e)?[]:{};t(e,(n,s,o)=>{(0,P2.default)(n)((a,...l)=>{l.length<2&&([l]=l),i[s]=l,o(a)})},n=>r(n,i))},3);G_.exports=Ro.default});var sf=p((Oo,Y_)=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.default=q2;function q2(t){function e(...r){if(t!==null){var i=t;t=null,i.apply(this,r)}}return Object.assign(e,t),e}Y_.exports=Oo.default});var Q_=p((Ao,K_)=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()};K_.exports=Ao.default});var X_=p((Po,Z_)=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.default=F2;var C2=So(),k2=J_(C2),N2=Q_(),L2=J_(N2);function J_(t){return t&&t.__esModule?t:{default:t}}function j2(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}function D2(t){var e=-1;return function(){var i=t.next();return i.done?null:(e++,{value:i.value,key:e})}}function B2(t){var e=t?Object.keys(t):[],r=-1,i=e.length;return function n(){var s=e[++r];return s==="__proto__"?n():r<i?{value:t[s],key:s}:null}}function F2(t){if((0,k2.default)(t))return j2(t);var e=(0,L2.default)(t);return e?D2(e):B2(t)}Z_.exports=Po.default});var of=p((Mo,ey)=>{"use strict";Object.defineProperty(Mo,"__esModule",{value:!0});Mo.default=U2;function U2(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}ey.exports=Mo.default});var qo=p((Io,ty)=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});var W2={};Io.default=W2;ty.exports=Io.default});var iy=p((Co,ry)=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.default=G2;var $2=qo(),V2=H2($2);function H2(t){return t&&t.__esModule?t:{default:t}}function G2(t,e,r,i){let n=!1,s=!1,o=!1,a=0,l=0;function u(){a>=e||o||n||(o=!0,t.next().then(({value:h,done:b})=>{if(!(s||n)){if(o=!1,b){n=!0,a<=0&&i(null);return}a++,r(h,l,f),l++,u()}}).catch(c))}function f(h,b){if(a-=1,!s){if(h)return c(h);if(h===!1){n=!0,s=!0;return}if(b===V2.default||n&&a<=0)return n=!0,i(null);u()}}function c(h){s||(o=!1,n=!0,i(h))}u()}ry.exports=Co.default});var ay=p((ko,oy)=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});var z2=sf(),Y2=Ln(z2),K2=X_(),Q2=Ln(K2),J2=of(),Z2=Ln(J2),ny=kr(),X2=iy(),sy=Ln(X2),eP=qo(),tP=Ln(eP);function Ln(t){return t&&t.__esModule?t:{default:t}}ko.default=t=>(e,r,i)=>{if(i=(0,Y2.default)(i),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return i(null);if((0,ny.isAsyncGenerator)(e))return(0,sy.default)(e,t,r,i);if((0,ny.isAsyncIterable)(e))return(0,sy.default)(e[Symbol.asyncIterator](),t,r,i);var n=(0,Q2.default)(e),s=!1,o=!1,a=0,l=!1;function u(c,h){if(!o)if(a-=1,c)s=!0,i(c);else if(c===!1)s=!0,o=!0;else{if(h===tP.default||s&&a<=0)return s=!0,i(null);l||f()}}function f(){for(l=!0;a<t&&!s;){var c=n();if(c===null){s=!0,a<=0&&i(null);return}a+=1,r(c.value,c.key,(0,Z2.default)(u))}l=!1}f()};oy.exports=ko.default});var lf=p((No,ly)=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});var rP=ay(),iP=af(rP),nP=kr(),sP=af(nP),oP=Mi(),aP=af(oP);function af(t){return t&&t.__esModule?t:{default:t}}function lP(t,e,r,i){return(0,iP.default)(e)(t,(0,sP.default)(r),i)}No.default=(0,aP.default)(lP,4);ly.exports=No.default});var cy=p((Lo,fy)=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});var uP=lf(),fP=uy(uP),cP=Mi(),hP=uy(cP);function uy(t){return t&&t.__esModule?t:{default:t}}function dP(t,e,r){return(0,fP.default)(t,1,e,r)}Lo.default=(0,hP.default)(dP,3);fy.exports=Lo.default});var py=p((jo,dy)=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.default=yP;var pP=z_(),gP=hy(pP),bP=cy(),_P=hy(bP);function hy(t){return t&&t.__esModule?t:{default:t}}function yP(t,e){return(0,gP.default)(_P.default,t,e)}dy.exports=jo.default});var uf=p((gW,gy)=>{"use strict";gy.exports=E("stream")});var vy=p((bW,wy)=>{"use strict";function by(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function _y(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?by(Object(r),!0).forEach(function(i){mP(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):by(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function mP(t,e,r){return e=my(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yy(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,my(i.key),i)}}function vP(t,e,r){return e&&yy(t.prototype,e),r&&yy(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function my(t){var e=SP(t,"string");return typeof e=="symbol"?e:String(e)}function SP(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EP=E("buffer"),Do=EP.Buffer,xP=E("util"),ff=xP.inspect,TP=ff&&ff.custom||"inspect";function RP(t,e,r){Do.prototype.copy.call(t,e,r)}wy.exports=function(){function t(){wP(this,t),this.head=null,this.tail=null,this.length=0}return vP(t,[{key:"push",value:function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length}},{key:"unshift",value:function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n}},{key:"concat",value:function(r){if(this.length===0)return Do.alloc(0);for(var i=Do.allocUnsafe(r>>>0),n=this.head,s=0;n;)RP(n.data,i,s),s+=n.data.length,n=n.next;return i}},{key:"consume",value:function(r,i){var n;return r<this.head.data.length?(n=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?n=this.shift():n=i?this._getString(r):this._getBuffer(r),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var i=this.head,n=1,s=i.data;for(r-=s.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++n,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++n}return this.length-=n,s}},{key:"_getBuffer",value:function(r){var i=Do.allocUnsafe(r),n=this.head,s=1;for(n.data.copy(i),r-=n.data.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(o.copy(i,i.length-r,0,a),r-=a,r===0){a===o.length?(++s,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++s}return this.length-=s,i}},{key:TP,value:function(r,i){return ff(this,_y(_y({},i),{},{depth:0,customInspect:!1}))}}]),t}()});var hf=p((_W,Ey)=>{"use strict";function OP(t,e){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(cf,this,t)):process.nextTick(cf,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Bo,r):(r._writableState.errorEmitted=!0,process.nextTick(Sy,r,s)):process.nextTick(Sy,r,s):e?(process.nextTick(Bo,r),e(s)):process.nextTick(Bo,r)}),this)}function Sy(t,e){cf(t,e),Bo(t)}function Bo(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function AP(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function cf(t,e){t.emit("error",e)}function PP(t,e){var r=t._readableState,i=t._writableState;r&&r.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}Ey.exports={destroy:OP,undestroy:AP,errorOrDestroy:PP}});var er=p((yW,Ry)=>{"use strict";var Ty={};function Ue(t,e,r){r||(r=Error);function i(s,o,a){return typeof e=="string"?e:e(s,o,a)}class n extends r{constructor(o,a,l){super(i(o,a,l))}}n.prototype.name=r.name,n.prototype.code=t,Ty[t]=n}function xy(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(i=>String(i)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function MP(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function IP(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function qP(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Ue("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Ue("ERR_INVALID_ARG_TYPE",function(t,e,r){let i;typeof e=="string"&&MP(e,"not ")?(i="must not be",e=e.replace(/^not /,"")):i="must be";let n;if(IP(t," argument"))n=`The ${t} ${i} ${xy(e,"type")}`;else{let s=qP(t,".")?"property":"argument";n=`The "${t}" ${s} ${i} ${xy(e,"type")}`}return n+=`. Received type ${typeof r}`,n},TypeError);Ue("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Ue("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Ue("ERR_STREAM_PREMATURE_CLOSE","Premature close");Ue("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Ue("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ue("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Ue("ERR_STREAM_WRITE_AFTER_END","write after end");Ue("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ue("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Ue("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Ry.exports.codes=Ty});var df=p((mW,Oy)=>{"use strict";var CP=er().codes.ERR_INVALID_OPT_VALUE;function kP(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function NP(t,e,r,i){var n=kP(e,i,r);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var s=i?r:"highWaterMark";throw new CP(s,n)}return Math.floor(n)}return t.objectMode?16:16*1024}Oy.exports={getHighWaterMark:NP}});var bf=p((wW,Cy)=>{"use strict";Cy.exports=ne;function Py(t){var e=this;this.next=null,this.entry=null,this.finish=function(){lM(e,t)}}var Ii;ne.WritableState=Dn;var LP={deprecate:Ru()},My=uf(),Uo=E("buffer").Buffer,jP=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function DP(t){return Uo.from(t)}function BP(t){return Uo.isBuffer(t)||t instanceof jP}var gf=hf(),FP=df(),UP=FP.getHighWaterMark,tr=er().codes,WP=tr.ERR_INVALID_ARG_TYPE,$P=tr.ERR_METHOD_NOT_IMPLEMENTED,VP=tr.ERR_MULTIPLE_CALLBACK,HP=tr.ERR_STREAM_CANNOT_PIPE,GP=tr.ERR_STREAM_DESTROYED,zP=tr.ERR_STREAM_NULL_VALUES,YP=tr.ERR_STREAM_WRITE_AFTER_END,KP=tr.ERR_UNKNOWN_ENCODING,qi=gf.errorOrDestroy;ht()(ne,My);function QP(){}function Dn(t,e,r){Ii=Ii||Nr(),t=t||{},typeof r!="boolean"&&(r=e instanceof Ii),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=UP(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=t.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){iM(e,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Py(this)}Dn.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(Dn.prototype,"buffer",{get:LP.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Fo;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Fo=Function.prototype[Symbol.hasInstance],Object.defineProperty(ne,Symbol.hasInstance,{value:function(e){return Fo.call(this,e)?!0:this!==ne?!1:e&&e._writableState instanceof Dn}})):Fo=function(e){return e instanceof this};function ne(t){Ii=Ii||Nr();var e=this instanceof Ii;if(!e&&!Fo.call(ne,this))return new ne(t);this._writableState=new Dn(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),My.call(this)}ne.prototype.pipe=function(){qi(this,new HP)};function JP(t,e){var r=new YP;qi(t,r),process.nextTick(e,r)}function ZP(t,e,r,i){var n;return r===null?n=new zP:typeof r!="string"&&!e.objectMode&&(n=new WP("chunk",["string","Buffer"],r)),n?(qi(t,n),process.nextTick(i,n),!1):!0}ne.prototype.write=function(t,e,r){var i=this._writableState,n=!1,s=!i.objectMode&&BP(t);return s&&!Uo.isBuffer(t)&&(t=DP(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),typeof r!="function"&&(r=QP),i.ending?JP(this,r):(s||ZP(this,i,t,r))&&(i.pendingcb++,n=eM(this,i,s,t,e,r)),n};ne.prototype.cork=function(){this._writableState.corked++};ne.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Iy(this,t))};ne.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new KP(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ne.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function XP(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Uo.from(e,r)),e}Object.defineProperty(ne.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function eM(t,e,r,i,n,s){if(!r){var o=XP(e,i,n);i!==o&&(r=!0,n="buffer",i=o)}var a=e.objectMode?1:i.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else pf(t,e,!1,a,i,n,s);return l}function pf(t,e,r,i,n,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new GP("write")):r?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function tM(t,e,r,i,n){--e.pendingcb,r?(process.nextTick(n,i),process.nextTick(jn,t,e),t._writableState.errorEmitted=!0,qi(t,i)):(n(i),t._writableState.errorEmitted=!0,qi(t,i),jn(t,e))}function rM(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function iM(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(typeof n!="function")throw new VP;if(rM(r),e)tM(t,r,i,e,n);else{var s=qy(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Iy(t,r),i?process.nextTick(Ay,t,r,s,n):Ay(t,r,s,n)}}function Ay(t,e,r,i){r||nM(t,e),e.pendingcb--,i(),jn(t,e)}function nM(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Iy(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)n[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;n.allBuffers=a,pf(t,e,!0,e.length,n,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new Py(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,f=r.callback,c=e.objectMode?1:l.length;if(pf(t,e,!1,c,l,u,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ne.prototype._write=function(t,e,r){r(new $P("_write()"))};ne.prototype._writev=null;ne.prototype.end=function(t,e,r){var i=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||aM(this,i,r),this};Object.defineProperty(ne.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function qy(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function sM(t,e){t._final(function(r){e.pendingcb--,r&&qi(t,r),e.prefinished=!0,t.emit("prefinish"),jn(t,e)})}function oM(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(sM,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function jn(t,e){var r=qy(e);if(r&&(oM(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var i=t._readableState;(!i||i.autoDestroy&&i.endEmitted)&&t.destroy()}return r}function aM(t,e,r){e.ending=!0,jn(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function lM(t,e,r){var i=t.entry;for(t.entry=null;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree.next=t}Object.defineProperty(ne.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});ne.prototype.destroy=gf.destroy;ne.prototype._undestroy=gf.undestroy;ne.prototype._destroy=function(t,e){e(t)}});var Nr=p((vW,Ny)=>{"use strict";var uM=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};Ny.exports=gt;var ky=mf(),yf=bf();ht()(gt,ky);for(_f=uM(yf.prototype),Wo=0;Wo<_f.length;Wo++)$o=_f[Wo],gt.prototype[$o]||(gt.prototype[$o]=yf.prototype[$o]);var _f,$o,Wo;function gt(t){if(!(this instanceof gt))return new gt(t);ky.call(this,t),yf.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",fM)))}Object.defineProperty(gt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(gt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(gt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function fM(){this._writableState.ended||process.nextTick(cM,this)}function cM(t){t.end()}Object.defineProperty(gt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Vo=p((SW,Dy)=>{"use strict";var Ly=er().codes.ERR_STREAM_PREMATURE_CLOSE;function hM(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];t.apply(this,i)}}}function dM(){}function pM(t){return t.setHeader&&typeof t.abort=="function"}function jy(t,e,r){if(typeof e=="function")return jy(t,null,e);e||(e={}),r=hM(r||dM);var i=e.readable||e.readable!==!1&&t.readable,n=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){n=!1,o=!0,i||r.call(t)},l=t._readableState&&t._readableState.endEmitted,u=function(){i=!1,l=!0,n||r.call(t)},f=function(d){r.call(t,d)},c=function(){var d;if(i&&!l)return(!t._readableState||!t._readableState.ended)&&(d=new Ly),r.call(t,d);if(n&&!o)return(!t._writableState||!t._writableState.ended)&&(d=new Ly),r.call(t,d)},h=function(){t.req.on("finish",a)};return pM(t)?(t.on("complete",a),t.on("abort",c),t.req?h():t.on("request",h)):n&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",f),t.on("close",c),function(){t.removeListener("complete",a),t.removeListener("abort",c),t.removeListener("request",h),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",f),t.removeListener("close",c)}}Dy.exports=jy});var Fy=p((EW,By)=>{"use strict";var Ho;function rr(t,e,r){return e=gM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gM(t){var e=bM(t,"string");return typeof e=="symbol"?e:String(e)}function bM(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _M=Vo(),ir=Symbol("lastResolve"),Lr=Symbol("lastReject"),Bn=Symbol("error"),Go=Symbol("ended"),jr=Symbol("lastPromise"),wf=Symbol("handlePromise"),Dr=Symbol("stream");function nr(t,e){return{value:t,done:e}}function yM(t){var e=t[ir];if(e!==null){var r=t[Dr].read();r!==null&&(t[jr]=null,t[ir]=null,t[Lr]=null,e(nr(r,!1)))}}function mM(t){process.nextTick(yM,t)}function wM(t,e){return function(r,i){t.then(function(){if(e[Go]){r(nr(void 0,!0));return}e[wf](r,i)},i)}}var vM=Object.getPrototypeOf(function(){}),SM=Object.setPrototypeOf((Ho={get stream(){return this[Dr]},next:function(){var e=this,r=this[Bn];if(r!==null)return Promise.reject(r);if(this[Go])return Promise.resolve(nr(void 0,!0));if(this[Dr].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[Bn]?a(e[Bn]):o(nr(void 0,!0))})});var i=this[jr],n;if(i)n=new Promise(wM(i,this));else{var s=this[Dr].read();if(s!==null)return Promise.resolve(nr(s,!1));n=new Promise(this[wf])}return this[jr]=n,n}},rr(Ho,Symbol.asyncIterator,function(){return this}),rr(Ho,"return",function(){var e=this;return new Promise(function(r,i){e[Dr].destroy(null,function(n){if(n){i(n);return}r(nr(void 0,!0))})})}),Ho),vM),EM=function(e){var r,i=Object.create(SM,(r={},rr(r,Dr,{value:e,writable:!0}),rr(r,ir,{value:null,writable:!0}),rr(r,Lr,{value:null,writable:!0}),rr(r,Bn,{value:null,writable:!0}),rr(r,Go,{value:e._readableState.endEmitted,writable:!0}),rr(r,wf,{value:function(s,o){var a=i[Dr].read();a?(i[jr]=null,i[ir]=null,i[Lr]=null,s(nr(a,!1))):(i[ir]=s,i[Lr]=o)},writable:!0}),r));return i[jr]=null,_M(e,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=i[Lr];s!==null&&(i[jr]=null,i[ir]=null,i[Lr]=null,s(n)),i[Bn]=n;return}var o=i[ir];o!==null&&(i[jr]=null,i[ir]=null,i[Lr]=null,o(nr(void 0,!0))),i[Go]=!0}),e.on("readable",mM.bind(null,i)),i};By.exports=EM});var Vy=p((xW,$y)=>{"use strict";function Uy(t,e,r,i,n,s,o){try{var a=t[s](o),l=a.value}catch(u){r(u);return}a.done?e(l):Promise.resolve(l).then(i,n)}function xM(t){return function(){var e=this,r=arguments;return new Promise(function(i,n){var s=t.apply(e,r);function o(l){Uy(s,i,n,o,a,"next",l)}function a(l){Uy(s,i,n,o,a,"throw",l)}o(void 0)})}}function Wy(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,i)}return r}function TM(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wy(Object(r),!0).forEach(function(i){RM(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wy(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function RM(t,e,r){return e=OM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function OM(t){var e=AM(t,"string");return typeof e=="symbol"?e:String(e)}function AM(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var PM=er().codes.ERR_INVALID_ARG_TYPE;function MM(t,e,r){var i;if(e&&typeof e.next=="function")i=e;else if(e&&e[Symbol.asyncIterator])i=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])i=e[Symbol.iterator]();else throw new PM("iterable",["Iterable"],e);var n=new t(TM({objectMode:!0},r)),s=!1;n._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=xM(function*(){try{var l=yield i.next(),u=l.value,f=l.done;f?n.push(null):n.push(yield u)?o():s=!1}catch(c){n.destroy(c)}}),a.apply(this,arguments)}return n}$y.exports=MM});var mf=p((RW,em)=>{"use strict";em.exports=H;var Ci;H.ReadableState=Yy;var TW=E("events").EventEmitter,zy=function(e,r){return e.listeners(r).length},Un=uf(),zo=E("buffer").Buffer,IM=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function qM(t){return zo.from(t)}function CM(t){return zo.isBuffer(t)||t instanceof IM}var vf=E("util"),D;vf&&vf.debuglog?D=vf.debuglog("stream"):D=function(){};var kM=vy(),Af=hf(),NM=df(),LM=NM.getHighWaterMark,Yo=er().codes,jM=Yo.ERR_INVALID_ARG_TYPE,DM=Yo.ERR_STREAM_PUSH_AFTER_EOF,BM=Yo.ERR_METHOD_NOT_IMPLEMENTED,FM=Yo.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,ki,Sf,Ef;ht()(H,Un);var Fn=Af.errorOrDestroy,xf=["error","close","destroy","pause","resume"];function UM(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function Yy(t,e,r){Ci=Ci||Nr(),t=t||{},typeof r!="boolean"&&(r=e instanceof Ci),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=LM(this,t,"readableHighWaterMark",r),this.buffer=new kM,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(ki||(ki=Rn().StringDecoder),this.decoder=new ki(t.encoding),this.encoding=t.encoding)}function H(t){if(Ci=Ci||Nr(),!(this instanceof H))return new H(t);var e=this instanceof Ci;this._readableState=new Yy(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Un.call(this)}Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});H.prototype.destroy=Af.destroy;H.prototype._undestroy=Af.undestroy;H.prototype._destroy=function(t,e){e(t)};H.prototype.push=function(t,e){var r=this._readableState,i;return r.objectMode?i=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=zo.from(t,e),e=""),i=!0),Ky(this,t,e,!1,i)};H.prototype.unshift=function(t){return Ky(this,t,null,!0,!1)};function Ky(t,e,r,i,n){D("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,VM(t,s);else{var o;if(n||(o=WM(s,e)),o)Fn(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==zo.prototype&&(e=qM(e)),i)s.endEmitted?Fn(t,new FM):Tf(t,s,e,!0);else if(s.ended)Fn(t,new DM);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?Tf(t,s,e,!1):Of(t,s)):Tf(t,s,e,!1)}else i||(s.reading=!1,Of(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function Tf(t,e,r,i){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Ko(t)),Of(t,e)}function WM(t,e){var r;return!CM(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new jM("chunk",["string","Buffer","Uint8Array"],e)),r}H.prototype.isPaused=function(){return this._readableState.flowing===!1};H.prototype.setEncoding=function(t){ki||(ki=Rn().StringDecoder);var e=new ki(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";r!==null;)i+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),i!==""&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var Hy=1073741824;function $M(t){return t>=Hy?t=Hy:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Gy(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=$M(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}H.prototype.read=function(t){D("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return D("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Rf(this):Ko(this),null;if(t=Gy(t,e),t===0&&e.ended)return e.length===0&&Rf(this),null;var i=e.needReadable;D("need readable",i),(e.length===0||e.length-t<e.highWaterMark)&&(i=!0,D("length less than watermark",i)),e.ended||e.reading?(i=!1,D("reading or ended",i)):i&&(D("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Gy(r,e)));var n;return t>0?n=Zy(t,e):n=null,n===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Rf(this)),n!==null&&this.emit("data",n),n};function VM(t,e){if(D("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Ko(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Qy(t)))}}function Ko(t){var e=t._readableState;D("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(D("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(Qy,t))}function Qy(t){var e=t._readableState;D("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Pf(t)}function Of(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(HM,t,e))}function HM(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(D("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}H.prototype._read=function(t){Fn(this,new BM("_read()"))};H.prototype.pipe=function(t,e){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t);break}i.pipesCount+=1,D("pipe count=%d opts=%j",i.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=n?a:g;i.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(y,_){D("onunpipe"),y===r&&_&&_.hasUnpiped===!1&&(_.hasUnpiped=!0,f())}function a(){D("onend"),t.end()}var l=GM(r);t.on("drain",l);var u=!1;function f(){D("cleanup"),t.removeListener("close",b),t.removeListener("finish",d),t.removeListener("drain",l),t.removeListener("error",h),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",c),u=!0,i.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",c);function c(y){D("ondata");var _=t.write(y);D("dest.write",_),_===!1&&((i.pipesCount===1&&i.pipes===t||i.pipesCount>1&&Xy(i.pipes,t)!==-1)&&!u&&(D("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function h(y){D("onerror",y),g(),t.removeListener("error",h),zy(t,"error")===0&&Fn(t,y)}UM(t,"error",h);function b(){t.removeListener("finish",d),g()}t.once("close",b);function d(){D("onfinish"),t.removeListener("close",b),g()}t.once("finish",d);function g(){D("unpipe"),r.unpipe(t)}return t.emit("pipe",r),i.flowing||(D("pipe resume"),r.resume()),t};function GM(t){return function(){var r=t._readableState;D("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&zy(t,"data")&&(r.flowing=!0,Pf(t))}}H.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)i[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Xy(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};H.prototype.on=function(t,e){var r=Un.prototype.on.call(this,t,e),i=this._readableState;return t==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):t==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,D("on readable",i.length,i.reading),i.length?Ko(this):i.reading||process.nextTick(zM,this)),r};H.prototype.addListener=H.prototype.on;H.prototype.removeListener=function(t,e){var r=Un.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(Jy,this),r};H.prototype.removeAllListeners=function(t){var e=Un.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(Jy,this),e};function Jy(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function zM(t){D("readable nexttick read 0"),t.read(0)}H.prototype.resume=function(){var t=this._readableState;return t.flowing||(D("resume"),t.flowing=!t.readableListening,YM(this,t)),t.paused=!1,this};function YM(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(KM,t,e))}function KM(t,e){D("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Pf(t),e.flowing&&!e.reading&&t.read(0)}H.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Pf(t){var e=t._readableState;for(D("flow",e.flowing);e.flowing&&t.read()!==null;);}H.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;t.on("end",function(){if(D("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(D("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(i=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(a){return function(){return t[a].apply(t,arguments)}}(n));for(var s=0;s<xf.length;s++)t.on(xf[s],this.emit.bind(this,xf[s]));return this._read=function(o){D("wrapped _read",o),i&&(i=!1,t.resume())},this};typeof Symbol=="function"&&(H.prototype[Symbol.asyncIterator]=function(){return Sf===void 0&&(Sf=Fy()),Sf(this)});Object.defineProperty(H.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(H.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(H.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});H._fromList=Zy;Object.defineProperty(H.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Zy(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Rf(t){var e=t._readableState;D("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(QM,e,t))}function QM(t,e){if(D("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(H.from=function(t,e){return Ef===void 0&&(Ef=Vy()),Ef(H,t,e)});function Xy(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}});var Mf=p((OW,rm)=>{"use strict";rm.exports=Nt;var Qo=er().codes,JM=Qo.ERR_METHOD_NOT_IMPLEMENTED,ZM=Qo.ERR_MULTIPLE_CALLBACK,XM=Qo.ERR_TRANSFORM_ALREADY_TRANSFORMING,eI=Qo.ERR_TRANSFORM_WITH_LENGTH_0,Jo=Nr();ht()(Nt,Jo);function tI(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(i===null)return this.emit("error",new ZM);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function Nt(t){if(!(this instanceof Nt))return new Nt(t);Jo.call(this,t),this._transformState={afterTransform:tI.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",rI)}function rI(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){tm(t,e,r)}):tm(this,null,null)}Nt.prototype.push=function(t,e){return this._transformState.needTransform=!1,Jo.prototype.push.call(this,t,e)};Nt.prototype._transform=function(t,e,r){r(new JM("_transform()"))};Nt.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};Nt.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Nt.prototype._destroy=function(t,e){Jo.prototype._destroy.call(this,t,function(r){e(r)})};function tm(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new eI;if(t._transformState.transforming)throw new XM;return t.push(null)}});var sm=p((AW,nm)=>{"use strict";nm.exports=Wn;var im=Mf();ht()(Wn,im);function Wn(t){if(!(this instanceof Wn))return new Wn(t);im.call(this,t)}Wn.prototype._transform=function(t,e,r){r(null,t)}});var fm=p((PW,um)=>{"use strict";var If;function iI(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var lm=er().codes,nI=lm.ERR_MISSING_ARGS,sI=lm.ERR_STREAM_DESTROYED;function om(t){if(t)throw t}function oI(t){return t.setHeader&&typeof t.abort=="function"}function aI(t,e,r,i){i=iI(i);var n=!1;t.on("close",function(){n=!0}),If===void 0&&(If=Vo()),If(t,{readable:e,writable:r},function(o){if(o)return i(o);n=!0,i()});var s=!1;return function(o){if(!n&&!s){if(s=!0,oI(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();i(o||new sI("pipe"))}}}function am(t){t()}function lI(t,e){return t.pipe(e)}function uI(t){return!t.length||typeof t[t.length-1]!="function"?om:t.pop()}function fI(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i=uI(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new nI("streams");var n,s=e.map(function(o,a){var l=a<e.length-1,u=a>0;return aI(o,l,u,function(f){n||(n=f),f&&s.forEach(am),!l&&(s.forEach(am),i(n))})});return e.reduce(lI)}um.exports=fI});var Br=p((We,Vn)=>{"use strict";var $n=E("stream");process.env.READABLE_STREAM==="disable"&&$n?(Vn.exports=$n.Readable,Object.assign(Vn.exports,$n),Vn.exports.Stream=$n):(We=Vn.exports=mf(),We.Stream=$n||We,We.Readable=We,We.Writable=bf(),We.Duplex=Nr(),We.Transform=Mf(),We.PassThrough=sm(),We.finished=Vo(),We.pipeline=fm())});var Df=p((MW,hm)=>{"use strict";var Ni=[],Hn=[],qf=function(){};function kf(t){return~Ni.indexOf(t)?!1:(Ni.push(t),!0)}function Nf(t){qf=t}function cI(t){for(var e=[],r=0;r<Ni.length;r++){if(Ni[r].async){e.push(Ni[r]);continue}if(Ni[r](t))return!0}return e.length?new Promise(function(n){Promise.all(e.map(function(o){return o(t)})).then(function(o){n(o.some(Boolean))})}):!1}function Lf(t){return~Hn.indexOf(t)?!1:(Hn.push(t),!0)}function Cf(){qf.apply(qf,arguments)}function cm(t){for(var e=0;e<Hn.length;e++)t=Hn[e].apply(Hn[e],arguments);return t}function jf(t,e){var r=Object.prototype.hasOwnProperty;for(var i in e)r.call(e,i)&&(t[i]=e[i]);return t}function hI(t){return t.enabled=!1,t.modify=Lf,t.set=Nf,t.use=kf,jf(function(){return!1},t)}function dI(t){function e(){var r=Array.prototype.slice.call(arguments,0);return Cf.call(Cf,t,cm(r,t)),!0}return t.enabled=!0,t.modify=Lf,t.set=Nf,t.use=kf,jf(e,t)}hm.exports=function(e){return e.introduce=jf,e.enabled=cI,e.process=cm,e.modify=Lf,e.write=Cf,e.nope=hI,e.yep=dI,e.set=Nf,e.use=kf,e}});var pm=p((IW,dm)=>{"use strict";var pI=Df(),gI=pI(function t(e,r){return r=r||{},r.namespace=e,r.prod=!0,r.dev=!1,r.force||t.force?t.yep(r):t.nope(r)});dm.exports=gI});var bm=p((qW,gm)=>{"use strict";gm.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var ym=p((CW,_m)=>{"use strict";_m.exports=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}});var vm=p((kW,wm)=>{"use strict";var bI=ym(),_I=Array.prototype.concat,yI=Array.prototype.slice,mm=wm.exports=function(e){for(var r=[],i=0,n=e.length;i<n;i++){var s=e[i];bI(s)?r=_I.call(r,yI.call(s)):r.push(s)}return r};mm.wrap=function(t){return function(){return t(mm(arguments))}}});var Tm=p((NW,xm)=>{"use strict";var Gn=bm(),zn=vm(),Sm=Object.hasOwnProperty,Em=Object.create(null);for(Zo in Gn)Sm.call(Gn,Zo)&&(Em[Gn[Zo]]=Zo);var Zo,ke=xm.exports={to:{},get:{}};ke.get=function(t){var e=t.substring(0,3).toLowerCase(),r,i;switch(e){case"hsl":r=ke.get.hsl(t),i="hsl";break;case"hwb":r=ke.get.hwb(t),i="hwb";break;default:r=ke.get.rgb(t),i="rgb";break}return r?{model:i,value:r}:null};ke.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,n=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],a,l,u;if(a=t.match(r)){for(u=a[2],a=a[1],l=0;l<3;l++){var f=l*2;o[l]=parseInt(a.slice(f,f+2),16)}u&&(o[3]=parseInt(u,16)/255)}else if(a=t.match(e)){for(a=a[1],u=a[3],l=0;l<3;l++)o[l]=parseInt(a[l]+a[l],16);u&&(o[3]=parseInt(u+u,16)/255)}else if(a=t.match(i)){for(l=0;l<3;l++)o[l]=parseInt(a[l+1],0);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else if(a=t.match(n)){for(l=0;l<3;l++)o[l]=Math.round(parseFloat(a[l+1])*2.55);a[4]&&(a[5]?o[3]=parseFloat(a[4])*.01:o[3]=parseFloat(a[4]))}else return(a=t.match(s))?a[1]==="transparent"?[0,0,0,0]:Sm.call(Gn,a[1])?(o=Gn[a[1]],o[3]=1,o):null:null;for(l=0;l<3;l++)o[l]=sr(o[l],0,255);return o[3]=sr(o[3],0,1),o};ke.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var i=parseFloat(r[4]),n=(parseFloat(r[1])%360+360)%360,s=sr(parseFloat(r[2]),0,100),o=sr(parseFloat(r[3]),0,100),a=sr(isNaN(i)?1:i,0,1);return[n,s,o,a]}return null};ke.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var i=parseFloat(r[4]),n=(parseFloat(r[1])%360+360)%360,s=sr(parseFloat(r[2]),0,100),o=sr(parseFloat(r[3]),0,100),a=sr(isNaN(i)?1:i,0,1);return[n,s,o,a]}return null};ke.to.hex=function(){var t=zn(arguments);return"#"+Xo(t[0])+Xo(t[1])+Xo(t[2])+(t[3]<1?Xo(Math.round(t[3]*255)):"")};ke.to.rgb=function(){var t=zn(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};ke.to.rgb.percent=function(){var t=zn(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),i=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+i+"%)":"rgba("+e+"%, "+r+"%, "+i+"%, "+t[3]+")"};ke.to.hsl=function(){var t=zn(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};ke.to.hwb=function(){var t=zn(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};ke.to.keyword=function(t){return Em[t.slice(0,3)]};function sr(t,e,r){return Math.min(Math.max(e,t),r)}function Xo(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}});var Om=p((LW,Rm)=>{"use strict";Rm.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var Bf=p((jW,Im)=>{"use strict";var Fr=Om(),Mm={};for(ea in Fr)Fr.hasOwnProperty(ea)&&(Mm[Fr[ea]]=ea);var ea,P=Im.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(xe in P)if(P.hasOwnProperty(xe)){if(!("channels"in P[xe]))throw new Error("missing channels property: "+xe);if(!("labels"in P[xe]))throw new Error("missing channel labels property: "+xe);if(P[xe].labels.length!==P[xe].channels)throw new Error("channel and label counts mismatch: "+xe);Am=P[xe].channels,Pm=P[xe].labels,delete P[xe].channels,delete P[xe].labels,Object.defineProperty(P[xe],"channels",{value:Am}),Object.defineProperty(P[xe],"labels",{value:Pm})}var Am,Pm,xe;P.rgb.hsl=function(t){var e=t[0]/255,r=t[1]/255,i=t[2]/255,n=Math.min(e,r,i),s=Math.max(e,r,i),o=s-n,a,l,u;return s===n?a=0:e===s?a=(r-i)/o:r===s?a=2+(i-e)/o:i===s&&(a=4+(e-r)/o),a=Math.min(a*60,360),a<0&&(a+=360),u=(n+s)/2,s===n?l=0:u<=.5?l=o/(s+n):l=o/(2-s-n),[a,l*100,u*100]};P.rgb.hsv=function(t){var e,r,i,n,s,o=t[0]/255,a=t[1]/255,l=t[2]/255,u=Math.max(o,a,l),f=u-Math.min(o,a,l),c=function(h){return(u-h)/6/f+1/2};return f===0?n=s=0:(s=f/u,e=c(o),r=c(a),i=c(l),o===u?n=i-r:a===u?n=1/3+e-i:l===u&&(n=2/3+r-e),n<0?n+=1:n>1&&(n-=1)),[n*360,s*100,u*100]};P.rgb.hwb=function(t){var e=t[0],r=t[1],i=t[2],n=P.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,i));return i=1-1/255*Math.max(e,Math.max(r,i)),[n,s*100,i*100]};P.rgb.cmyk=function(t){var e=t[0]/255,r=t[1]/255,i=t[2]/255,n,s,o,a;return a=Math.min(1-e,1-r,1-i),n=(1-e-a)/(1-a)||0,s=(1-r-a)/(1-a)||0,o=(1-i-a)/(1-a)||0,[n*100,s*100,o*100,a*100]};function mI(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}P.rgb.keyword=function(t){var e=Mm[t];if(e)return e;var r=1/0,i;for(var n in Fr)if(Fr.hasOwnProperty(n)){var s=Fr[n],o=mI(t,s);o<r&&(r=o,i=n)}return i};P.keyword.rgb=function(t){return Fr[t]};P.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,i=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92;var n=e*.4124+r*.3576+i*.1805,s=e*.2126+r*.7152+i*.0722,o=e*.0193+r*.1192+i*.9505;return[n*100,s*100,o*100]};P.rgb.lab=function(t){var e=P.rgb.xyz(t),r=e[0],i=e[1],n=e[2],s,o,a;return r/=95.047,i/=100,n/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,s=116*i-16,o=500*(r-i),a=200*(i-n),[s,o,a]};P.hsl.rgb=function(t){var e=t[0]/360,r=t[1]/100,i=t[2]/100,n,s,o,a,l;if(r===0)return l=i*255,[l,l,l];i<.5?s=i*(1+r):s=i+r-i*r,n=2*i-s,a=[0,0,0];for(var u=0;u<3;u++)o=e+1/3*-(u-1),o<0&&o++,o>1&&o--,6*o<1?l=n+(s-n)*6*o:2*o<1?l=s:3*o<2?l=n+(s-n)*(2/3-o)*6:l=n,a[u]=l*255;return a};P.hsl.hsv=function(t){var e=t[0],r=t[1]/100,i=t[2]/100,n=r,s=Math.max(i,.01),o,a;return i*=2,r*=i<=1?i:2-i,n*=s<=1?s:2-s,a=(i+r)/2,o=i===0?2*n/(s+n):2*r/(i+r),[e,o*100,a*100]};P.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,i=t[2]/100,n=Math.floor(e)%6,s=e-Math.floor(e),o=255*i*(1-r),a=255*i*(1-r*s),l=255*i*(1-r*(1-s));switch(i*=255,n){case 0:return[i,l,o];case 1:return[a,i,o];case 2:return[o,i,l];case 3:return[o,a,i];case 4:return[l,o,i];case 5:return[i,o,a]}};P.hsv.hsl=function(t){var e=t[0],r=t[1]/100,i=t[2]/100,n=Math.max(i,.01),s,o,a;return a=(2-r)*i,s=(2-r)*n,o=r*n,o/=s<=1?s:2-s,o=o||0,a/=2,[e,o*100,a*100]};P.hwb.rgb=function(t){var e=t[0]/360,r=t[1]/100,i=t[2]/100,n=r+i,s,o,a,l;n>1&&(r/=n,i/=n),s=Math.floor(6*e),o=1-i,a=6*e-s,s&1&&(a=1-a),l=r+a*(o-r);var u,f,c;switch(s){default:case 6:case 0:u=o,f=l,c=r;break;case 1:u=l,f=o,c=r;break;case 2:u=r,f=o,c=l;break;case 3:u=r,f=l,c=o;break;case 4:u=l,f=r,c=o;break;case 5:u=o,f=r,c=l;break}return[u*255,f*255,c*255]};P.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,i=t[2]/100,n=t[3]/100,s,o,a;return s=1-Math.min(1,e*(1-n)+n),o=1-Math.min(1,r*(1-n)+n),a=1-Math.min(1,i*(1-n)+n),[s*255,o*255,a*255]};P.xyz.rgb=function(t){var e=t[0]/100,r=t[1]/100,i=t[2]/100,n,s,o;return n=e*3.2406+r*-1.5372+i*-.4986,s=e*-.9689+r*1.8758+i*.0415,o=e*.0557+r*-.204+i*1.057,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,n=Math.min(Math.max(0,n),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[n*255,s*255,o*255]};P.xyz.lab=function(t){var e=t[0],r=t[1],i=t[2],n,s,o;return e/=95.047,r/=100,i/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,n=116*r-16,s=500*(e-r),o=200*(r-i),[n,s,o]};P.lab.xyz=function(t){var e=t[0],r=t[1],i=t[2],n,s,o;s=(e+16)/116,n=r/500+s,o=s-i/200;var a=Math.pow(s,3),l=Math.pow(n,3),u=Math.pow(o,3);return s=a>.008856?a:(s-16/116)/7.787,n=l>.008856?l:(n-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,n*=95.047,s*=100,o*=108.883,[n,s,o]};P.lab.lch=function(t){var e=t[0],r=t[1],i=t[2],n,s,o;return n=Math.atan2(i,r),s=n*360/2/Math.PI,s<0&&(s+=360),o=Math.sqrt(r*r+i*i),[e,o,s]};P.lch.lab=function(t){var e=t[0],r=t[1],i=t[2],n,s,o;return o=i/360*2*Math.PI,n=r*Math.cos(o),s=r*Math.sin(o),[e,n,s]};P.rgb.ansi16=function(t){var e=t[0],r=t[1],i=t[2],n=1 in arguments?arguments[1]:P.rgb.hsv(t)[2];if(n=Math.round(n/50),n===0)return 30;var s=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return n===2&&(s+=60),s};P.hsv.ansi16=function(t){return P.rgb.ansi16(P.hsv.rgb(t),t[2])};P.rgb.ansi256=function(t){var e=t[0],r=t[1],i=t[2];if(e===r&&r===i)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var n=16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(i/255*5);return n};P.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var r=(~~(t>50)+1)*.5,i=(e&1)*r*255,n=(e>>1&1)*r*255,s=(e>>2&1)*r*255;return[i,n,s]};P.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var r,i=Math.floor(t/36)/5*255,n=Math.floor((r=t%36)/6)/5*255,s=r%6/5*255;return[i,n,s]};P.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255),r=e.toString(16).toUpperCase();return"000000".substring(r.length)+r};P.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];e[0].length===3&&(r=r.split("").map(function(a){return a+a}).join(""));var i=parseInt(r,16),n=i>>16&255,s=i>>8&255,o=i&255;return[n,s,o]};P.rgb.hcg=function(t){var e=t[0]/255,r=t[1]/255,i=t[2]/255,n=Math.max(Math.max(e,r),i),s=Math.min(Math.min(e,r),i),o=n-s,a,l;return o<1?a=s/(1-o):a=0,o<=0?l=0:n===e?l=(r-i)/o%6:n===r?l=2+(i-e)/o:l=4+(e-r)/o+4,l/=6,l%=1,[l*360,o*100,a*100]};P.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,i=1,n=0;return r<.5?i=2*e*r:i=2*e*(1-r),i<1&&(n=(r-.5*i)/(1-i)),[t[0],i*100,n*100]};P.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,i=e*r,n=0;return i<1&&(n=(r-i)/(1-i)),[t[0],i*100,n*100]};P.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,i=t[2]/100;if(r===0)return[i*255,i*255,i*255];var n=[0,0,0],s=e%1*6,o=s%1,a=1-o,l=0;switch(Math.floor(s)){case 0:n[0]=1,n[1]=o,n[2]=0;break;case 1:n[0]=a,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=o;break;case 3:n[0]=0,n[1]=a,n[2]=1;break;case 4:n[0]=o,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=a}return l=(1-r)*i,[(r*n[0]+l)*255,(r*n[1]+l)*255,(r*n[2]+l)*255]};P.hcg.hsv=function(t){var e=t[1]/100,r=t[2]/100,i=e+r*(1-e),n=0;return i>0&&(n=e/i),[t[0],n*100,i*100]};P.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100,i=r*(1-e)+.5*e,n=0;return i>0&&i<.5?n=e/(2*i):i>=.5&&i<1&&(n=e/(2*(1-i))),[t[0],n*100,i*100]};P.hcg.hwb=function(t){var e=t[1]/100,r=t[2]/100,i=e+r*(1-e);return[t[0],(i-e)*100,(1-i)*100]};P.hwb.hcg=function(t){var e=t[1]/100,r=t[2]/100,i=1-r,n=i-e,s=0;return n<1&&(s=(i-n)/(1-n)),[t[0],n*100,s*100]};P.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};P.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};P.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};P.gray.hsl=P.gray.hsv=function(t){return[0,0,t[0]]};P.gray.hwb=function(t){return[0,100,t[0]]};P.gray.cmyk=function(t){return[0,0,0,t[0]]};P.gray.lab=function(t){return[t[0],0,0]};P.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255,r=(e<<16)+(e<<8)+e,i=r.toString(16).toUpperCase();return"000000".substring(i.length)+i};P.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]}});var Cm=p((DW,qm)=>{"use strict";var ta=Bf();function wI(){for(var t={},e=Object.keys(ta),r=e.length,i=0;i<r;i++)t[e[i]]={distance:-1,parent:null};return t}function vI(t){var e=wI(),r=[t];for(e[t].distance=0;r.length;)for(var i=r.pop(),n=Object.keys(ta[i]),s=n.length,o=0;o<s;o++){var a=n[o],l=e[a];l.distance===-1&&(l.distance=e[i].distance+1,l.parent=i,r.unshift(a))}return e}function SI(t,e){return function(r){return e(t(r))}}function EI(t,e){for(var r=[e[t].parent,t],i=ta[e[t].parent][t],n=e[t].parent;e[n].parent;)r.unshift(e[n].parent),i=SI(ta[e[n].parent][n],i),n=e[n].parent;return i.conversion=r,i}qm.exports=function(t){for(var e=vI(t),r={},i=Object.keys(e),n=i.length,s=0;s<n;s++){var o=i[s],a=e[o];a.parent!==null&&(r[o]=EI(o,e))}return r}});var Nm=p((BW,km)=>{"use strict";var Ff=Bf(),xI=Cm(),Li={},TI=Object.keys(Ff);function RI(t){var e=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function OI(t){var e=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var i=t(r);if(typeof i=="object")for(var n=i.length,s=0;s<n;s++)i[s]=Math.round(i[s]);return i};return"conversion"in t&&(e.conversion=t.conversion),e}TI.forEach(function(t){Li[t]={},Object.defineProperty(Li[t],"channels",{value:Ff[t].channels}),Object.defineProperty(Li[t],"labels",{value:Ff[t].labels});var e=xI(t),r=Object.keys(e);r.forEach(function(i){var n=e[i];Li[t][i]=OI(n),Li[t][i].raw=RI(n)})});km.exports=Li});var Dm=p((FW,jm)=>{"use strict";var Yn=Tm(),Ne=Nm(),$f=[].slice,Lm=["keyword","gray","hex"],Uf={};Object.keys(Ne).forEach(function(t){Uf[$f.call(Ne[t].labels).sort().join("")]=t});var ra={};function ye(t,e){if(!(this instanceof ye))return new ye(t,e);if(e&&e in Lm&&(e=null),e&&!(e in Ne))throw new Error("Unknown model: "+e);var r,i;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof ye)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){var n=Yn.get(t);if(n===null)throw new Error("Unable to parse color from string: "+t);this.model=n.model,i=Ne[this.model].channels,this.color=n.value.slice(0,i),this.valpha=typeof n.value[i]=="number"?n.value[i]:1}else if(t.length){this.model=e||"rgb",i=Ne[this.model].channels;var s=$f.call(t,0,i);this.color=Wf(s,i),this.valpha=typeof t[i]=="number"?t[i]:1}else if(typeof t=="number")t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(t);"alpha"in t&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);var a=o.sort().join("");if(!(a in Uf))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=Uf[a];var l=Ne[this.model].labels,u=[];for(r=0;r<l.length;r++)u.push(t[l[r]]);this.color=Wf(u)}if(ra[this.model])for(i=Ne[this.model].channels,r=0;r<i;r++){var f=ra[this.model][r];f&&(this.color[r]=f(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}ye.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in Yn.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);var r=e.valpha===1?e.color:e.color.concat(this.valpha);return Yn.to[e.model](r)},percentString:function(t){var e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:e.color.concat(this.valpha);return Yn.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=Ne[this.model].channels,r=Ne[this.model].labels,i=0;i<e;i++)t[r[i]]=this.color[i];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new ye(this.color.map(PI(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new ye(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:se("rgb",0,ue(255)),green:se("rgb",1,ue(255)),blue:se("rgb",2,ue(255)),hue:se(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:se("hsl",1,ue(100)),lightness:se("hsl",2,ue(100)),saturationv:se("hsv",1,ue(100)),value:se("hsv",2,ue(100)),chroma:se("hcg",1,ue(100)),gray:se("hcg",2,ue(100)),white:se("hwb",1,ue(100)),wblack:se("hwb",2,ue(100)),cyan:se("cmyk",0,ue(100)),magenta:se("cmyk",1,ue(100)),yellow:se("cmyk",2,ue(100)),black:se("cmyk",3,ue(100)),x:se("xyz",0,ue(100)),y:se("xyz",1,ue(100)),z:se("xyz",2,ue(100)),l:se("lab",0,ue(100)),a:se("lab",1),b:se("lab",2),keyword:function(t){return arguments.length?new ye(t):Ne[this.model].keyword(this.color)},hex:function(t){return arguments.length?new ye(t):Yn.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var i=t[r]/255;e[r]=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color,e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return ye.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var r=t.rgb(),i=this.rgb(),n=e===void 0?.5:e,s=2*n-1,o=r.alpha()-i.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,l=1-a;return ye.rgb(a*r.red()+l*i.red(),a*r.green()+l*i.green(),a*r.blue()+l*i.blue(),r.alpha()*n+i.alpha()*(1-n))}};Object.keys(Ne).forEach(function(t){if(Lm.indexOf(t)===-1){var e=Ne[t].channels;ye.prototype[t]=function(){if(this.model===t)return new ye(this);if(arguments.length)return new ye(arguments,t);var r=typeof arguments[e]=="number"?e:this.valpha;return new ye(MI(Ne[this.model][t].raw(this.color)).concat(r),t)},ye[t]=function(r){return typeof r=="number"&&(r=Wf($f.call(arguments),e)),new ye(r,t)}}});function AI(t,e){return Number(t.toFixed(e))}function PI(t){return function(e){return AI(e,t)}}function se(t,e,r){return t=Array.isArray(t)?t:[t],t.forEach(function(i){(ra[i]||(ra[i]=[]))[e]=r}),t=t[0],function(i){var n;return arguments.length?(r&&(i=r(i)),n=this[t](),n.color[e]=i,n):(n=this[t]().color[e],r&&(n=r(n)),n)}}function ue(t){return function(e){return Math.max(0,Math.min(t,e))}}function MI(t){return Array.isArray(t)?t:[t]}function Wf(t,e){for(var r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}jm.exports=ye});var Fm=p((UW,Bm)=>{"use strict";Bm.exports=function(e){for(var r=0,i=0;r<e.length;i=e.charCodeAt(r++)+((i<<5)-i));var n=Math.floor(Math.abs(Math.sin(i)*1e4%1*16777216)).toString(16);return"#"+Array(6-n.length+1).join("0")+n}});var Vm=p((WW,$m)=>{"use strict";var Um=Dm(),Wm=Fm();$m.exports=function(e,r){var i=e.split(r||":"),n=Wm(i[0]);if(!i.length)return n;for(var s=0,o=i.length-1;s<o;s++)n=Um(n).mix(Um(Wm(i[s+1]))).saturate(1).hex();return n}});var Gm=p(($W,Hm)=>{"use strict";function et(t,e){if(e)return new et(t).style(e);if(!(this instanceof et))return new et(t);this.text=t}et.prototype.prefix="\x1B[";et.prototype.suffix="m";et.prototype.hex=function(e){e=e[0]==="#"?e.substring(1):e,e.length===3&&(e=e.split(""),e[5]=e[2],e[4]=e[2],e[3]=e[1],e[2]=e[1],e[1]=e[0],e=e.join(""));var r=e.substring(0,2),i=e.substring(2,4),n=e.substring(4,6);return[parseInt(r,16),parseInt(i,16),parseInt(n,16)]};et.prototype.rgb=function(e,r,i){var n=e/255*5,s=r/255*5,o=i/255*5;return this.ansi(n,s,o)};et.prototype.ansi=function(e,r,i){var n=Math.round(e),s=Math.round(r),o=Math.round(i);return 16+n*36+s*6+o};et.prototype.reset=function(){return this.prefix+"39;49"+this.suffix};et.prototype.style=function(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()};Hm.exports=et});var Ym=p((VW,zm)=>{"use strict";var II=Vm(),qI=Gm();zm.exports=function(e,r){var i=r.namespace,n=r.colors!==!1?qI(i+":",II(i)):i+":";return e[0]=n+" "+e[0],e}});var Qm=p((HW,Km)=>{"use strict";Km.exports=function(e,r){if(!r)return!1;for(var i=r.split(/[\s,]+/),n=0;n<i.length;n++){if(r=i[n].replace("*",".*?"),r.charAt(0)==="-"){if(new RegExp("^"+r.substr(1)+"$").test(e))return!1;continue}if(new RegExp("^"+r+"$").test(e))return!0}return!1}});var Zm=p((GW,Jm)=>{"use strict";var CI=Qm();Jm.exports=function(e){return function(i){try{return CI(i,e())}catch{}return!1}}});var e0=p((zW,Xm)=>{"use strict";var kI=Zm();Xm.exports=kI(function(){return process.env.DEBUG||process.env.DIAGNOSTICS})});var r0=p((YW,t0)=>{"use strict";t0.exports=function(t,e){try{Function.prototype.apply.call(console.log,console,e)}catch{}}});var n0=p((KW,i0)=>{"use strict";var NI=Df(),LI=E("tty").isatty(1),ia=NI(function t(e,r){return r=r||{},r.colors="colors"in r?r.colors:LI,r.namespace=e,r.prod=!1,r.dev=!0,!t.enabled(e)&&!(r.force||t.force)?t.nope(r):t.yep(r)});ia.modify(Ym());ia.use(e0());ia.set(r0());i0.exports=ia});var Kn=p((QW,Vf)=>{"use strict";process.env.NODE_ENV==="production"?Vf.exports=pm():Vf.exports=n0()});var o0=p((JW,s0)=>{"use strict";var Hf=E("fs"),{StringDecoder:jI}=E("string_decoder"),{Stream:DI}=Br();function BI(){}s0.exports=(t,e)=>{let r=Buffer.alloc(65536),i=new jI("utf8"),n=new DI,s="",o=0,a=0;return t.start===-1&&delete t.start,n.readable=!0,n.destroy=()=>{n.destroyed=!0,n.emit("end"),n.emit("close")},Hf.open(t.file,"a+","0644",(l,u)=>{if(l){e?e(l):n.emit("error",l),n.destroy();return}(function f(){if(n.destroyed){Hf.close(u,BI);return}return Hf.read(u,r,0,r.length,o,(c,h)=>{if(c){e?e(c):n.emit("error",c),n.destroy();return}if(!h)return s&&((t.start==null||a>t.start)&&(e?e(null,s):n.emit("line",s)),a++,s=""),setTimeout(f,1e3);let b=i.write(r.slice(0,h));e||n.emit("data",b),b=(s+b).split(/\n+/);let d=b.length-1,g=0;for(;g<d;g++)(t.start==null||a>t.start)&&(e?e(null,b[g]):n.emit("line",b[g])),a++;return s=b[d],o+=h,f()})})()}),e?n.destroy:n}});var f0=p((XW,u0)=>{"use strict";var Ie=E("fs"),de=E("path"),a0=py(),FI=E("zlib"),{MESSAGE:UI}=ae(),{Stream:WI,PassThrough:l0}=Br(),$I=Ai(),tt=Kn()("winston:file"),VI=E("os"),HI=o0();u0.exports=class extends $I{constructor(e={}){super(e),this.name=e.name||"file";function r(i,...n){n.slice(1).forEach(s=>{if(e[s])throw new Error(`Cannot set ${s} and ${i} together`)})}if(this._stream=new l0,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)r("filename or dirname","stream"),this._basename=this.filename=e.filename?de.basename(e.filename):"winston.log",this.dirname=e.dirname||de.dirname(e.filename),this.options=e.options||{flags:"a"};else if(e.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=de.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=typeof e.eol=="string"?e.eol:VI.EOL,this.tailable=e.tailable||!1,this.lazy=e.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(e,r=()=>{}){if(this.silent)return r(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(e,r)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,r)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(e,r)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(e,r)})});return}}let i=`${e[UI]}${this.eol}`,n=Buffer.byteLength(i);function s(){if(this._size+=n,this._pendingSize-=n,tt("logged %s %s",this._size,i),this.emit("logged",e),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=n,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(i,s.bind(this));return o?r():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,r()})),tt("written",o,this._drain),this.finishIfEnding(),o}query(e,r){typeof e=="function"&&(r=e,e={}),e=c(e);let i=de.join(this.dirname,this.filename),n="",s=[],o=0,a=Ie.createReadStream(i,{encoding:"utf8"});a.on("error",h=>{if(a.readable&&a.destroy(),!!r)return h.code!=="ENOENT"?r(h):r(null,s)}),a.on("data",h=>{h=(n+h).split(/\n+/);let b=h.length-1,d=0;for(;d<b;d++)(!e.start||o>=e.start)&&l(h[d]),o++;n=h[b]}),a.on("close",()=>{n&&l(n,!0),e.order==="desc"&&(s=s.reverse()),r&&r(null,s)});function l(h,b){try{let d=JSON.parse(h);f(d)&&u(d)}catch(d){b||a.emit("error",d)}}function u(h){if(e.rows&&s.length>=e.rows&&e.order!=="desc"){a.readable&&a.destroy();return}e.fields&&(h=e.fields.reduce((b,d)=>(b[d]=h[d],b),{})),e.order==="desc"&&s.length>=e.rows&&s.shift(),s.push(h)}function f(h){if(!h||typeof h!="object")return;let b=new Date(h.timestamp);if(!(e.from&&b<e.from||e.until&&b>e.until||e.level&&e.level!==h.level))return!0}function c(h){return h=h||{},h.rows=h.rows||h.limit||10,h.start=h.start||0,h.until=h.until||new Date,typeof h.until!="object"&&(h.until=new Date(h.until)),h.from=h.from||h.until-24*60*60*1e3,typeof h.from!="object"&&(h.from=new Date(h.from)),h.order=h.order||"desc",h}}stream(e={}){let r=de.join(this.dirname,this.filename),i=new WI,n={file:r,start:e.start};return i.destroy=HI(n,(s,o)=>{if(s)return i.emit("error",s);try{i.emit("data",o),o=JSON.parse(o),i.emit("log",o)}catch(a){i.emit("error",a)}}),i}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,r)=>{if(e)return this.emit("error",e);tt("stat done: %s { size: %s }",this.filename,r),this._size=r,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.emit("rotate")||(this._rotate=!1)})})))}stat(e){let r=this._getFile(),i=de.join(this.dirname,r);Ie.stat(i,(n,s)=>{if(n&&n.code==="ENOENT")return tt("ENOENT\xA0ok",i),this.filename=r,e(null,0);if(n)return tt(`err ${n.code} ${i}`),e(n);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(e));this.filename=r,e(null,s.size)})}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e.destroy(),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){let r=de.join(this.dirname,this.filename);tt("create stream start",r,this.options);let i=Ie.createWriteStream(r,this.options).on("error",n=>tt(n)).on("close",()=>tt("close",i.path,i.bytesWritten)).on("open",()=>{tt("file open ok",r),this.emit("open",r),e.pipe(i),this.rotatedWhileOpening&&(this._stream=new l0,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(i),e.end())});return tt("create stream ok",r),i}_incFile(e){tt("_incFile",this.filename);let r=de.extname(this._basename),i=de.basename(this._basename,r),n=[];this.zippedArchive&&n.push(function(s){let o=this._created>0&&!this.tailable?this._created:"";this._compressFile(de.join(this.dirname,`${i}${o}${r}`),de.join(this.dirname,`${i}${o}${r}.gz`),s)}.bind(this)),n.push(function(s){this.tailable?this._checkMaxFilesTailable(r,i,s):(this._created+=1,this._checkMaxFilesIncrementing(r,i,s))}.bind(this)),a0(n,e)}_getFile(){let e=de.extname(this._basename),r=de.basename(this._basename,e),i=this.rotationFormat?this.rotationFormat():this._created;return!this.tailable&&this._created?`${r}${i}${e}`:`${r}${e}`}_checkMaxFilesIncrementing(e,r,i){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(i);let n=this._created-this.maxFiles,s=n!==0?n:"",o=this.zippedArchive?".gz":"",a=`${r}${s}${e}${o}`,l=de.join(this.dirname,a);Ie.unlink(l,i)}_checkMaxFilesTailable(e,r,i){let n=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)n.push(function(a,l){let u=`${r}${a-1}${e}${s}`,f=de.join(this.dirname,u);Ie.exists(f,c=>{if(!c)return l(null);u=`${r}${a}${e}${s}`,Ie.rename(f,de.join(this.dirname,u),l)})}.bind(this,o));a0(n,()=>{Ie.rename(de.join(this.dirname,`${r}${e}${s}`),de.join(this.dirname,`${r}1${e}${s}`),i)})}_compressFile(e,r,i){Ie.access(e,Ie.F_OK,n=>{if(n)return i();var s=FI.createGzip(),o=Ie.createReadStream(e),a=Ie.createWriteStream(r);a.on("finish",()=>{Ie.unlink(e,i)}),o.pipe(s).pipe(a)})}_createLogDirIfNotExist(e){Ie.existsSync(e)||Ie.mkdirSync(e,{recursive:!0})}}});var h0=p((t8,c0)=>{"use strict";var GI=E("http"),zI=E("https"),{Stream:YI}=Br(),KI=Ai(),{configure:QI}=En();c0.exports=class extends KI{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.maximumDepth=e.maximumDepth,this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,r){this._request(e,null,null,(i,n)=>{n&&n.statusCode!==200&&(i=new Error(`Invalid HTTP Status Code: ${n.statusCode}`)),i?this.emit("warn",i):this.emit("logged",e)}),r&&setImmediate(r)}query(e,r){typeof e=="function"&&(r=e,e={}),e={method:"query",params:this.normalizeQuery(e)};let i=e.params.auth||null;delete e.params.auth;let n=e.params.path||null;delete e.params.path,this._request(e,i,n,(s,o,a)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return r(s);if(typeof a=="string")try{a=JSON.parse(a)}catch(l){return r(l)}r(null,a)})}stream(e={}){let r=new YI;e={method:"stream",params:e};let i=e.params.path||null;delete e.params.path;let n=e.params.auth||null;delete e.params.auth;let s="",o=this._request(e,n,i);return r.destroy=()=>o.destroy(),o.on("data",a=>{a=(s+a).split(/\n+/);let l=a.length-1,u=0;for(;u<l;u++)try{r.emit("log",JSON.parse(a[u]))}catch(f){r.emit("error",f)}s=a[l]}),o.on("error",a=>r.emit("error",a)),r}_request(e,r,i,n){e=e||{},r=r||this.auth,i=i||this.path||"",this.batch?this._doBatch(e,n,r,i):this._doRequest(e,n,r,i)}_doBatch(e,r,i,n){if(this.batchOptions.push(e),this.batchOptions.length===1){let s=this;this.batchCallback=r,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,i,n)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,i,n)}_doBatchRequest(e,r,i){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let n=this.batchOptions.slice();this.batchOptions=[],this._doRequest(n,e,r,i)}_doRequest(e,r,i,n){let s=Object.assign({},this.headers);i&&i.bearer&&(s.Authorization=`Bearer ${i.bearer}`);let o=(this.ssl?zI:GI).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${n.replace(/^\//,"")}`,headers:s,auth:i&&i.username&&i.password?`${i.username}:${i.password}`:"",agent:this.agent});o.on("error",r),o.on("response",l=>l.on("end",()=>r(null,l)).resume());let a=QI({...this.maximumDepth&&{maximumDepth:this.maximumDepth}});o.end(Buffer.from(a(e,this.options.replacer),"utf8"))}}});var Gf=p((r8,d0)=>{"use strict";var bt=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";bt.writable=t=>bt(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";bt.readable=t=>bt(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";bt.duplex=t=>bt.writable(t)&&bt.readable(t);bt.transform=t=>bt.duplex(t)&&typeof t._transform=="function";d0.exports=bt});var g0=p((n8,p0)=>{"use strict";var JI=Gf(),{MESSAGE:ZI}=ae(),XI=E("os"),eq=Ai();p0.exports=class extends eq{constructor(e={}){if(super(e),!e.stream||!JI(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=typeof e.eol=="string"?e.eol:XI.EOL}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode){this._stream.write(e),r&&r();return}this._stream.write(`${e[ZI]}${this.eol}`),r&&r()}}});var b0=p(Qn=>{"use strict";Object.defineProperty(Qn,"Console",{configurable:!0,enumerable:!0,get(){return q_()}});Object.defineProperty(Qn,"File",{configurable:!0,enumerable:!0,get(){return f0()}});Object.defineProperty(Qn,"Http",{configurable:!0,enumerable:!0,get(){return h0()}});Object.defineProperty(Qn,"Stream",{configurable:!0,enumerable:!0,get(){return g0()}})});var sa=p(Jn=>{"use strict";var na=xu(),{configs:zf}=ae();Jn.cli=na.levels(zf.cli);Jn.npm=na.levels(zf.npm);Jn.syslog=na.levels(zf.syslog);Jn.addColors=na.levels});var y0=p((oa,_0)=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});var tq=So(),rq=Ur(tq),iq=qo(),nq=Ur(iq),sq=lf(),oq=Ur(sq),aq=sf(),lq=Ur(aq),uq=of(),fq=Ur(uq),cq=kr(),hq=Ur(cq),dq=Mi(),pq=Ur(dq);function Ur(t){return t&&t.__esModule?t:{default:t}}function gq(t,e,r){r=(0,lq.default)(r);var i=0,n=0,{length:s}=t,o=!1;s===0&&r(null);function a(l,u){l===!1&&(o=!0),o!==!0&&(l?r(l):(++n===s||u===nq.default)&&r(null))}for(;i<s;i++)e(t[i],i,(0,fq.default)(a))}function bq(t,e,r){return(0,oq.default)(t,1/0,e,r)}function _q(t,e,r){var i=(0,rq.default)(t)?gq:bq;return i(t,(0,hq.default)(e),r)}oa.default=(0,pq.default)(_q,3);_0.exports=oa.default});var w0=p((aa,m0)=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.default=yq;function yq(t){return(e,r,i)=>t(e,i)}m0.exports=aa.default});var fa=p((ua,v0)=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});var mq=y0(),wq=la(mq),vq=w0(),Sq=la(vq),Eq=kr(),xq=la(Eq),Tq=Mi(),Rq=la(Tq);function la(t){return t&&t.__esModule?t:{default:t}}function Oq(t,e,r){return(0,wq.default)(t,(0,Sq.default)((0,xq.default)(e)),r)}ua.default=(0,Rq.default)(Oq,3);v0.exports=ua.default});var E0=p((a8,S0)=>{"use strict";var Aq=Object.prototype.toString;S0.exports=function(e){if(typeof e.displayName=="string"&&e.constructor.name)return e.displayName;if(typeof e.name=="string"&&e.name)return e.name;if(typeof e=="object"&&e.constructor&&typeof e.constructor.name=="string")return e.constructor.name;var r=e.toString(),i=Aq.call(e).slice(8,-1);return i==="Function"?r=r.substring(r.indexOf("(")+1,r.indexOf(")")):r=i,r||"anonymous"}});var Yf=p((l8,x0)=>{"use strict";var Pq=E0();x0.exports=function(e){var r=0,i;function n(){return r||(r=1,i=e.apply(this,arguments),e=null),i}return n.displayName=Pq(e),n}});var Kf=p(Xn=>{"use strict";Xn.get=function(t){var e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},i=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(r,t||Xn.get);var n=r.stack;return Error.prepareStackTrace=i,Error.stackTraceLimit=e,n};Xn.parse=function(t){if(!t.stack)return[];var e=this,r=t.stack.split(`
`).slice(1);return r.map(function(i){if(i.match(/^\s*[-]{4,}$/))return e._createParsedCallSite({fileName:i,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var n=i.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(n){var s=null,o=null,a=null,l=null,u=null,f=n[5]==="native";if(n[1]){a=n[1];var c=a.lastIndexOf(".");if(a[c-1]=="."&&c--,c>0){s=a.substr(0,c),o=a.substr(c+1);var h=s.indexOf(".Module");h>0&&(a=a.substr(h+1),s=s.substr(0,h))}l=null}o&&(l=s,u=o),o==="<anonymous>"&&(u=null,a=null);var b={fileName:n[2]||null,lineNumber:parseInt(n[3],10)||null,functionName:a,typeName:l,methodName:u,columnNumber:parseInt(n[4],10)||null,native:f};return e._createParsedCallSite(b)}}).filter(function(i){return!!i})};function Zn(t){for(var e in t)this[e]=t[e]}var Mq=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],Iq=["topLevel","eval","native","constructor"];Mq.forEach(function(t){Zn.prototype[t]=null,Zn.prototype["get"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});Iq.forEach(function(t){Zn.prototype[t]=!1,Zn.prototype["is"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});Xn._createParsedCallSite=function(t){return new Zn(t)}});var R0=p((c8,T0)=>{"use strict";var{Writable:qq}=Br();T0.exports=class extends qq{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,r,i){return e.exception?this.transport.log(e,i):(i(),!0)}}});var Jf=p((d8,P0)=>{"use strict";var O0=E("os"),Cq=fa(),Qf=Kn()("winston:exception"),kq=Yf(),A0=Kf(),Nq=R0();P0.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(i=>this._addHandler(i));this._addHandler(r)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`uncaughtException: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:O0.loadavg(),uptime:O0.uptime()}}getTrace(e){return(e?A0.parse(e):A0.get()).map(i=>({column:i.getColumnNumber(),file:i.getFileName(),function:i.getFunctionName(),line:i.getLineNumber(),method:i.getMethodName(),native:i.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;let r=new Nq(e);this.handlers.set(e,r),this.logger.pipe(r)}}_uncaughtException(e){let r=this.getAllInfo(e),i=this._getExceptionHandlers(),n=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!i.length&&n&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),n=!1);function o(){Qf("doExit",n),Qf("process._exiting",process._exiting),n&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!i||i.length===0)return process.nextTick(o);Cq(i,(a,l)=>{let u=kq(l),f=a.transport||a;function c(h){return()=>{Qf(h),u()}}f._ending=!0,f.once("finish",c("finished")),f.once("error",c("error"))},()=>n&&o()),this.logger.log(r),n&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}}});var I0=p((g8,M0)=>{"use strict";var{Writable:Lq}=Br();M0.exports=class extends Lq{constructor(e){if(super({objectMode:!0}),!e)throw new Error("RejectionStream requires a TransportStream instance.");this.handleRejections=!0,this.transport=e}_write(e,r,i){return e.rejection?this.transport.log(e,i):(i(),!0)}}});var Xf=p((_8,k0)=>{"use strict";var q0=E("os"),jq=fa(),Zf=Kn()("winston:rejection"),Dq=Yf(),C0=Kf(),Bq=I0();k0.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(i=>this._addHandler(i));this._addHandler(r)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,rejection:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:q0.loadavg(),uptime:q0.uptime()}}getTrace(e){return(e?C0.parse(e):C0.get()).map(i=>({column:i.getColumnNumber(),file:i.getFileName(),function:i.getFunctionName(),line:i.getLineNumber(),method:i.getMethodName(),native:i.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;let r=new Bq(e);this.handlers.set(e,r),this.logger.pipe(r)}}_unhandledRejection(e){let r=this.getAllInfo(e),i=this._getRejectionHandlers(),n=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!i.length&&n&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),n=!1);function o(){Zf("doExit",n),Zf("process._exiting",process._exiting),n&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!i||i.length===0)return process.nextTick(o);jq(i,(a,l)=>{let u=Dq(l),f=a.transport||a;function c(h){return()=>{Zf(h),u()}}f._ending=!0,f.once("finish",c("finished")),f.once("error",c("error"))},()=>n&&o()),this.logger.log(r),n&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}}});var L0=p((y8,N0)=>{"use strict";var ec=class{constructor(e){let r=ca();if(typeof e!="object"||Array.isArray(e)||!(e instanceof r))throw new Error("Logger is required for profiling");this.logger=e,this.start=Date.now()}done(...e){typeof e[e.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());let r=typeof e[e.length-1]=="object"?e.pop():{};return r.level=r.level||"info",r.durationMs=Date.now()-this.start,this.logger.write(r)}};N0.exports=ec});var ca=p((m8,F0)=>{"use strict";var{Stream:Fq,Transform:Uq}=Br(),j0=fa(),{LEVEL:_t,SPLAT:D0}=ae(),B0=Gf(),Wq=Jf(),$q=Xf(),Vq=tf(),Hq=L0(),{warn:Gq}=Tu(),zq=sa(),Yq=/%[scdjifoO%]/g,ha=class extends Uq{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){let r=this;return Object.create(r,{write:{value:function(i){let n=Object.assign({},e,i);i instanceof Error&&(n.stack=i.stack,n.message=i.message),r.write(n)}}})}configure({silent:e,format:r,defaultMeta:i,levels:n,level:s="info",exitOnError:o=!0,transports:a,colors:l,emitErrs:u,formatters:f,padLevels:c,rewriters:h,stripColors:b,exceptionHandlers:d,rejectionHandlers:g}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=r||this.format||yu()(),this.defaultMeta=i||null,this.levels=n||this.levels||zq.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new Wq(this),this.rejections=new $q(this),this.profilers={},this.exitOnError=o,a&&(a=Array.isArray(a)?a:[a],a.forEach(y=>this.add(y))),l||u||f||c||h||b)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));d&&this.exceptions.handle(d),g&&this.rejections.handle(g)}isLevelEnabled(e){let r=tc(this.levels,e);if(r===null)return!1;let i=tc(this.levels,this.level);return i===null?!1:!this.transports||this.transports.length===0?i>=r:this.transports.findIndex(s=>{let o=tc(this.levels,s.level);return o===null&&(o=i),o>=r})!==-1}log(e,r,...i){if(arguments.length===1)return e[_t]=e.level,this._addDefaultMeta(e),this.write(e),this;if(arguments.length===2)return r&&typeof r=="object"?(r[_t]=r.level=e,this._addDefaultMeta(r),this.write(r),this):(r={[_t]:e,level:e,message:r},this._addDefaultMeta(r),this.write(r),this);let[n]=i;if(typeof n=="object"&&n!==null&&!(r&&r.match&&r.match(Yq))){let o=Object.assign({},this.defaultMeta,n,{[_t]:e,[D0]:i,level:e,message:r});return n.message&&(o.message=`${o.message} ${n.message}`),n.stack&&(o.stack=n.stack),n.cause&&(o.cause=n.cause),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[_t]:e,[D0]:i,level:e,message:r})),this}_transform(e,r,i){if(this.silent)return i();e[_t]||(e[_t]=e.level),!this.levels[e[_t]]&&this.levels[e[_t]]!==0&&console.error("[winston] Unknown logger level: %s",e[_t]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e);try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,i()}}_final(e){let r=this.transports.slice();j0(r,(i,n)=>{if(!i||i.finished)return setImmediate(n);i.once("finish",n),i.end()},e)}add(e){let r=!B0(e)||e.log.length>2?new Vq({transport:e}):e;if(!r._writableState||!r._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",r),this._onEvent("warn",r),this.pipe(r),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let r=e;return(!B0(e)||e.log.length>2)&&(r=this.transports.filter(i=>i.transport===e)[0]),r&&this.unpipe(r),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){Gq.deprecated("setLevels")}query(e,r){typeof e=="function"&&(r=e,e={}),e=e||{};let i={},n=Object.assign({},e.query||{});function s(a,l){e.query&&typeof a.formatQuery=="function"&&(e.query=a.formatQuery(n)),a.query(e,(u,f)=>{if(u)return l(u);typeof a.formatResults=="function"&&(f=a.formatResults(f,e.format)),l(null,f)})}function o(a,l){s(a,(u,f)=>{l&&(f=u||f,f&&(i[a.name]=f),l()),l=null})}j0(this.transports.filter(a=>!!a.query),o,()=>r(null,i))}stream(e={}){let r=new Fq,i=[];return r._streams=i,r.destroy=()=>{let n=i.length;for(;n--;)i[n].destroy()},this.transports.filter(n=>!!n.stream).forEach(n=>{let s=n.stream(e);s&&(i.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(n.name),r.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(n.name),r.emit("error",o)}))}),r}startTimer(){return new Hq(this)}profile(e,...r){let i=Date.now();if(this.profilers[e]){let n=this.profilers[e];delete this.profilers[e],typeof r[r.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),r.pop());let s=typeof r[r.length-1]=="object"?r.pop():{};return s.level=s.level||"info",s.durationMs=i-n,s.message=s.message||e,this.write(s)}return this.profilers[e]=i,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(e,r){function i(n){e==="error"&&!this.transports.includes(r)&&this.add(r),this.emit(e,n,r)}r["__winston"+e]||(r["__winston"+e]=i.bind(this),r.on(e,r["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}};function tc(t,e){let r=t[e];return!r&&r!==0?null:r}Object.defineProperty(ha.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:t}=this._readableState;return Array.isArray(t)?t:[t].filter(Boolean)}});F0.exports=ha});var rc=p((w8,U0)=>{"use strict";var{LEVEL:Kq}=ae(),Qq=sa(),Jq=ca(),Zq=Kn()("winston:create-logger");function Xq(t){return"is"+t.charAt(0).toUpperCase()+t.slice(1)+"Enabled"}U0.exports=function(t={}){t.levels=t.levels||Qq.npm.levels;class e extends Jq{constructor(n){super(n)}}let r=new e(t);return Object.keys(t.levels).forEach(function(i){if(Zq('Define prototype method for "%s"',i),i==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}e.prototype[i]=function(...n){let s=this||r;if(n.length===1){let[o]=n,a=o&&o.message&&o||{message:o};return a.level=a[Kq]=i,s._addDefaultMeta(a),s.write(a),this||r}return n.length===0?(s.log(i,""),s):s.log(i,...n)},e.prototype[Xq(i)]=function(){return(this||r).isLevelEnabled(i)}}),r}});var $0=p((S8,W0)=>{"use strict";var eC=rc();W0.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,r){if(!this.loggers.has(e)){r=Object.assign({},r||this.options);let i=r.transports||this.options.transports;i?r.transports=Array.isArray(i)?i.slice():[i]:r.transports=[];let n=eC(r);n.on("close",()=>this._delete(e)),this.loggers.set(e,n)}return this.loggers.get(e)}get(e,r){return this.add(e,r)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((r,i)=>this._removeLogger(i))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}}});var H0=p(z=>{"use strict";var V0=xu(),{warn:es}=Tu();z.version=Pb().version;z.transports=b0();z.config=sa();z.addColors=V0.levels;z.format=V0.format;z.createLogger=rc();z.Logger=ca();z.ExceptionHandler=Jf();z.RejectionHandler=Xf();z.Container=$0();z.Transport=Ai();z.loggers=new z.Container;var yt=z.createLogger();Object.keys(z.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(t=>z[t]=(...e)=>yt[t](...e));Object.defineProperty(z,"level",{get(){return yt.level},set(t){yt.level=t}});Object.defineProperty(z,"exceptions",{get(){return yt.exceptions}});Object.defineProperty(z,"rejections",{get(){return yt.rejections}});["exitOnError"].forEach(t=>{Object.defineProperty(z,t,{get(){return yt[t]},set(e){yt[t]=e}})});Object.defineProperty(z,"default",{get(){return{exceptionHandlers:yt.exceptionHandlers,rejectionHandlers:yt.rejectionHandlers,transports:yt.transports}}});es.deprecated(z,"setLevels");es.forFunctions(z,"useFormat",["cli"]);es.forProperties(z,"useFormat",["padLevels","stripColors"]);es.forFunctions(z,"deprecated",["addRewriter","addFilter","clone","extend"]);es.forProperties(z,"deprecated",["emitErrs","levelLength"])});var K0=p(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.OperationError=Le.InvalidAccessError=Le.GPIOPort=Le.GPIOPortMap=Le.GPIOAccess=void 0;Le.requestGPIOAccess=aC;var Y0=E("node:events"),ji=E("node:fs"),iC=E("node:os"),Di=E("node:path"),nC=100,Bi="/app/fake_gpio",sC=1024,z0=65535;function ic(t){let e=Number.parseInt(t,10);if(0<=e&&e<=z0)return e;throw new RangeError(`Must be between 0 and ${z0}.`)}var oC=process.platform==="linux"&&6.6<=Number(iC.release().match(/\d+\.\d+/))?512:0,da=class extends Y0.EventEmitter{_ports;onchange;constructor(e){super(),this._ports=e??new ts,this._ports.forEach(r=>r.on("change",i=>{this.emit("change",i)})),this.on("change",r=>{this.onchange!==void 0&&this.onchange(r)})}get ports(){return this._ports}async unexportAll(){await Promise.all([...this.ports.values()].map(e=>e.exported?e.unexport():void 0))}};Le.GPIOAccess=da;var ts=class extends Map{};Le.GPIOPortMap=ts;var pa=class extends Y0.EventEmitter{_portNumber;_pollingInterval;_direction;_exported;_exportRetry;_value;_timeout;onchange;constructor(e){super(),this._portNumber=ic(e.toString())+oC,this._pollingInterval=nC,this._direction=new rt("Unknown direction."),this._exported=new rt("Unknown export."),this._exportRetry=0,this.on("change",r=>{this.onchange!==void 0&&this.onchange(r)})}get portNumber(){return this._portNumber}get portName(){return`gpio${this.portNumber}`}get pinName(){return""}get direction(){if(this._direction instanceof rt)throw this._direction;return this._direction}get exported(){if(this._exported instanceof rt)throw this._exported;return this._exported}async export(e){if(!/^(in|out)$/.test(e))throw new Fi('Must be "in" or "out".');try{await ji.promises.access(Di.join(Bi,this.portName)),this._exported=!0}catch{this._exported=!1}try{clearInterval(this._timeout),this.exported||await ji.promises.writeFile(Di.join(Bi,"export"),String(this.portNumber)),await ji.promises.writeFile(Di.join(Bi,this.portName,"direction"),e),e==="in"&&(this._timeout=setInterval(this.read.bind(this),this._pollingInterval))}catch(r){if(this._exportRetry<10)await lC(100),console.warn("May be the first time port access. Retry.."),++this._exportRetry,await this.export(e);else throw new rt(r)}this._direction=e,this._exported=!0}async unexport(){clearInterval(this._timeout);try{await ji.promises.writeFile(Di.join(Bi,"unexport"),String(this.portNumber))}catch(e){throw new rt(e)}this._exported=!1}async read(){if(!(this.exported&&this.direction==="in"))throw new Fi('The exported must be true and value of direction must be "in".');try{let e=await ji.promises.readFile(Di.join(Bi,this.portName,"value")),r=ic(e.toString());return this._value!==r&&(this._value=r,this.emit("change",{value:r,port:this})),r}catch(e){throw new rt(e)}}async write(e){if(!(this.exported&&this.direction==="out"))throw new Fi('The exported must be true and value of direction must be "out".');try{await ji.promises.writeFile(Di.join(Bi,this.portName,"value"),ic(e.toString()).toString())}catch(r){throw new rt(r)}}};Le.GPIOPort=pa;var Fi=class extends Error{constructor(e){super(e),this.name=this.constructor.name}};Le.InvalidAccessError=Fi;var rt=class extends Error{constructor(e){super(e),this.name=this.constructor.name}};Le.OperationError=rt;async function aC(){let t=new ts([...Array(sC).keys()].map(e=>[e,new pa(e)]));return new da(t)}function lC(t){return new Promise(e=>setTimeout(e,t))}});var J0=p(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});var sc=class{constructor(e){this.aliasToTopic={},this.max=e}put(e,r){return r===0||r>this.max?!1:(this.aliasToTopic[r]=e,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(e){return this.aliasToTopic[e]}clear(){this.aliasToTopic={}}};oc.default=sc});var X=p((M8,Z0)=>{"use strict";Z0.exports={ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,r){return t.slice(e,r)},Error,FunctionPrototypeCall(t,e,...r){return t.call(e,...r)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,r){return Object.defineProperty(t,e,r)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,r){return t.then(e,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,r){return t.slice(e,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,r){return t.set(e,r)},Boolean,Uint8Array}});var lw=p((ns,is)=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});var nw=new WeakMap,ac=new WeakMap;function Q(t){let e=nw.get(t);return console.assert(e!=null,"'this' is expected an Event object, but got",t),e}function X0(t){if(t.passiveListener!=null){typeof console<"u"&&typeof console.error=="function"&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,typeof t.event.preventDefault=="function"&&t.event.preventDefault())}function Ui(t,e){nw.set(this,{eventTarget:t,event:e,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:e.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let r=Object.keys(e);for(let i=0;i<r.length;++i){let n=r[i];n in this||Object.defineProperty(this,n,sw(n))}}Ui.prototype={get type(){return Q(this).event.type},get target(){return Q(this).eventTarget},get currentTarget(){return Q(this).currentTarget},composedPath(){let t=Q(this).currentTarget;return t==null?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return Q(this).eventPhase},stopPropagation(){let t=Q(this);t.stopped=!0,typeof t.event.stopPropagation=="function"&&t.event.stopPropagation()},stopImmediatePropagation(){let t=Q(this);t.stopped=!0,t.immediateStopped=!0,typeof t.event.stopImmediatePropagation=="function"&&t.event.stopImmediatePropagation()},get bubbles(){return!!Q(this).event.bubbles},get cancelable(){return!!Q(this).event.cancelable},preventDefault(){X0(Q(this))},get defaultPrevented(){return Q(this).canceled},get composed(){return!!Q(this).event.composed},get timeStamp(){return Q(this).timeStamp},get srcElement(){return Q(this).eventTarget},get cancelBubble(){return Q(this).stopped},set cancelBubble(t){if(!t)return;let e=Q(this);e.stopped=!0,typeof e.event.cancelBubble=="boolean"&&(e.event.cancelBubble=!0)},get returnValue(){return!Q(this).canceled},set returnValue(t){t||X0(Q(this))},initEvent(){}};Object.defineProperty(Ui.prototype,"constructor",{value:Ui,configurable:!0,writable:!0});typeof window<"u"&&typeof window.Event<"u"&&(Object.setPrototypeOf(Ui.prototype,window.Event.prototype),ac.set(window.Event.prototype,Ui));function sw(t){return{get(){return Q(this).event[t]},set(e){Q(this).event[t]=e},configurable:!0,enumerable:!0}}function cC(t){return{value(){let e=Q(this).event;return e[t].apply(e,arguments)},configurable:!0,enumerable:!0}}function hC(t,e){let r=Object.keys(e);if(r.length===0)return t;function i(n,s){t.call(this,n,s)}i.prototype=Object.create(t.prototype,{constructor:{value:i,configurable:!0,writable:!0}});for(let n=0;n<r.length;++n){let s=r[n];if(!(s in t.prototype)){let a=typeof Object.getOwnPropertyDescriptor(e,s).value=="function";Object.defineProperty(i.prototype,s,a?cC(s):sw(s))}}return i}function ow(t){if(t==null||t===Object.prototype)return Ui;let e=ac.get(t);return e==null&&(e=hC(ow(Object.getPrototypeOf(t)),t),ac.set(t,e)),e}function dC(t,e){let r=ow(Object.getPrototypeOf(e));return new r(t,e)}function pC(t){return Q(t).immediateStopped}function gC(t,e){Q(t).eventPhase=e}function bC(t,e){Q(t).currentTarget=e}function ew(t,e){Q(t).passiveListener=e}var aw=new WeakMap,tw=1,rw=2,ga=3;function ba(t){return t!==null&&typeof t=="object"}function rs(t){let e=aw.get(t);if(e==null)throw new TypeError("'this' is expected an EventTarget object, but got another value.");return e}function _C(t){return{get(){let r=rs(this).get(t);for(;r!=null;){if(r.listenerType===ga)return r.listener;r=r.next}return null},set(e){typeof e!="function"&&!ba(e)&&(e=null);let r=rs(this),i=null,n=r.get(t);for(;n!=null;)n.listenerType===ga?i!==null?i.next=n.next:n.next!==null?r.set(t,n.next):r.delete(t):i=n,n=n.next;if(e!==null){let s={listener:e,listenerType:ga,passive:!1,once:!1,next:null};i===null?r.set(t,s):i.next=s}},configurable:!0,enumerable:!0}}function lc(t,e){Object.defineProperty(t,`on${e}`,_C(e))}function iw(t){function e(){it.call(this)}e.prototype=Object.create(it.prototype,{constructor:{value:e,configurable:!0,writable:!0}});for(let r=0;r<t.length;++r)lc(e.prototype,t[r]);return e}function it(){if(this instanceof it){aw.set(this,new Map);return}if(arguments.length===1&&Array.isArray(arguments[0]))return iw(arguments[0]);if(arguments.length>0){let t=new Array(arguments.length);for(let e=0;e<arguments.length;++e)t[e]=arguments[e];return iw(t)}throw new TypeError("Cannot call a class as a function")}it.prototype={addEventListener(t,e,r){if(e==null)return;if(typeof e!="function"&&!ba(e))throw new TypeError("'listener' should be a function or an object.");let i=rs(this),n=ba(r),o=(n?!!r.capture:!!r)?tw:rw,a={listener:e,listenerType:o,passive:n&&!!r.passive,once:n&&!!r.once,next:null},l=i.get(t);if(l===void 0){i.set(t,a);return}let u=null;for(;l!=null;){if(l.listener===e&&l.listenerType===o)return;u=l,l=l.next}u.next=a},removeEventListener(t,e,r){if(e==null)return;let i=rs(this),s=(ba(r)?!!r.capture:!!r)?tw:rw,o=null,a=i.get(t);for(;a!=null;){if(a.listener===e&&a.listenerType===s){o!==null?o.next=a.next:a.next!==null?i.set(t,a.next):i.delete(t);return}o=a,a=a.next}},dispatchEvent(t){if(t==null||typeof t.type!="string")throw new TypeError('"event.type" should be a string.');let e=rs(this),r=t.type,i=e.get(r);if(i==null)return!0;let n=dC(this,t),s=null;for(;i!=null;){if(i.once?s!==null?s.next=i.next:i.next!==null?e.set(r,i.next):e.delete(r):s=i,ew(n,i.passive?i.listener:null),typeof i.listener=="function")try{i.listener.call(this,n)}catch(o){typeof console<"u"&&typeof console.error=="function"&&console.error(o)}else i.listenerType!==ga&&typeof i.listener.handleEvent=="function"&&i.listener.handleEvent(n);if(pC(n))break;i=i.next}return ew(n,null),gC(n,0),bC(n,null),!n.defaultPrevented}};Object.defineProperty(it.prototype,"constructor",{value:it,configurable:!0,writable:!0});typeof window<"u"&&typeof window.EventTarget<"u"&&Object.setPrototypeOf(it.prototype,window.EventTarget.prototype);ns.defineEventAttribute=lc;ns.EventTarget=it;ns.default=it;is.exports=it;is.exports.EventTarget=is.exports.default=it;is.exports.defineEventAttribute=lc});var Wi=p((os,ss)=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});var uc=lw(),or=class extends uc.EventTarget{constructor(){throw super(),new TypeError("AbortSignal cannot be constructed directly")}get aborted(){let e=_a.get(this);if(typeof e!="boolean")throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return e}};uc.defineEventAttribute(or.prototype,"abort");function yC(){let t=Object.create(or.prototype);return uc.EventTarget.call(t),_a.set(t,!1),t}function mC(t){_a.get(t)===!1&&(_a.set(t,!0),t.dispatchEvent({type:"abort"}))}var _a=new WeakMap;Object.defineProperties(or.prototype,{aborted:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(or.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});var ar=class{constructor(){fw.set(this,yC())}get signal(){return uw(this)}abort(){mC(uw(this))}},fw=new WeakMap;function uw(t){let e=fw.get(t);if(e==null)throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${t===null?"null":typeof t}`);return e}Object.defineProperties(ar.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ar.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"});os.AbortController=ar;os.AbortSignal=or;os.default=ar;ss.exports=ar;ss.exports.AbortController=ss.exports.default=ar;ss.exports.AbortSignal=or});var we=p((I8,cc)=>{"use strict";var wC=E("buffer"),{kResistStopPropagation:vC,SymbolDispose:SC}=X(),EC=globalThis.AbortSignal||Wi().AbortSignal,xC=globalThis.AbortController||Wi().AbortController,TC=Object.getPrototypeOf(async function(){}).constructor,cw=globalThis.Blob||wC.Blob,RC=typeof cw<"u"?function(e){return e instanceof cw}:function(e){return!1},hw=(t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ERR_INVALID_ARG_TYPE(e,"AbortSignal",t)},OC=(t,e)=>{if(typeof t!="function")throw new ERR_INVALID_ARG_TYPE(e,"Function",t)},fc=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let r="";for(let i=0;i<e.length;i++)r+=`    ${e[i].stack}
`;super(r),this.name="AggregateError",this.errors=e}};cc.exports={AggregateError:fc,kEmptyObject:Object.freeze({}),once(t){let e=!1;return function(...r){e||(e=!0,t.apply(this,r))}},createDeferredPromise:function(){let t,e;return{promise:new Promise((i,n)=>{t=i,e=n}),resolve:t,reject:e}},promisify(t){return new Promise((e,r)=>{t((i,...n)=>i?r(i):e(...n))})},debuglog(){return function(){}},format(t,...e){return t.replace(/%([sdifj])/g,function(...[r,i]){let n=e.shift();return i==="f"?n.toFixed(6):i==="j"?JSON.stringify(n):i==="s"&&typeof n=="object"?`${n.constructor!==Object?n.constructor.name:""} {}`.trim():n.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}},types:{isAsyncFunction(t){return t instanceof TC},isArrayBufferView(t){return ArrayBuffer.isView(t)}},isBlob:RC,deprecate(t,e){return t},addAbortListener:E("events").addAbortListener||function(e,r){if(e===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",e);hw(e,"signal"),OC(r,"listener");let i;return e.aborted?queueMicrotask(()=>r()):(e.addEventListener("abort",r,{__proto__:null,once:!0,[vC]:!0}),i=()=>{e.removeEventListener("abort",r)}),{__proto__:null,[SC](){var n;(n=i)===null||n===void 0||n()}}},AbortSignalAny:EC.any||function(e){if(e.length===1)return e[0];let r=new xC,i=()=>r.abort();return e.forEach(n=>{hw(n,"signals"),n.addEventListener("abort",i,{once:!0})}),r.signal.addEventListener("abort",()=>{e.forEach(n=>n.removeEventListener("abort",i))},{once:!0}),r.signal}};cc.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")});var Re=p((q8,gw)=>{"use strict";var{format:AC,inspect:ya,AggregateError:PC}=we(),MC=globalThis.AggregateError||PC,IC=Symbol("kIsNodeError"),qC=["string","function","number","object","Function","Object","boolean","bigint","symbol"],CC=/^([A-Z][a-z0-9]*)+$/,kC="__node_internal_",ma={};function Wr(t,e){if(!t)throw new ma.ERR_INTERNAL_ASSERTION(e)}function dw(t){let e="",r=t.length,i=t[0]==="-"?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function NC(t,e,r){if(typeof e=="function")return Wr(e.length<=r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${e.length}).`),e(...r);let i=(e.match(/%[dfijoOs]/g)||[]).length;return Wr(i===r.length,`Code: ${t}; The provided arguments length (${r.length}) does not match the required ones (${i}).`),r.length===0?e:AC(e,...r)}function me(t,e,r){r||(r=Error);class i extends r{constructor(...s){super(NC(t,e,s))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(i.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=t,i.prototype[IC]=!0,ma[t]=i}function pw(t){let e=kC+t.name;return Object.defineProperty(t,"name",{value:e}),t}function LC(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;let r=new MC([e,t],e.message);return r.code=e.code,r}return t||e}var hc=class extends Error{constructor(e="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new ma.ERR_INVALID_ARG_TYPE("options","Object",r);super(e,r),this.code="ABORT_ERR",this.name="AbortError"}};me("ERR_ASSERTION","%s",Error);me("ERR_INVALID_ARG_TYPE",(t,e,r)=>{Wr(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let i="The ";t.endsWith(" argument")?i+=`${t} `:i+=`"${t}" ${t.includes(".")?"property":"argument"} `,i+="must be ";let n=[],s=[],o=[];for(let l of e)Wr(typeof l=="string","All expected entries have to be of type string"),qC.includes(l)?n.push(l.toLowerCase()):CC.test(l)?s.push(l):(Wr(l!=="object",'The value "object" should be written as "Object"'),o.push(l));if(s.length>0){let l=n.indexOf("object");l!==-1&&(n.splice(n,l,1),s.push("Object"))}if(n.length>0){switch(n.length){case 1:i+=`of type ${n[0]}`;break;case 2:i+=`one of type ${n[0]} or ${n[1]}`;break;default:{let l=n.pop();i+=`one of type ${n.join(", ")}, or ${l}`}}(s.length>0||o.length>0)&&(i+=" or ")}if(s.length>0){switch(s.length){case 1:i+=`an instance of ${s[0]}`;break;case 2:i+=`an instance of ${s[0]} or ${s[1]}`;break;default:{let l=s.pop();i+=`an instance of ${s.join(", ")}, or ${l}`}}o.length>0&&(i+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(i+="an "),i+=`${o[0]}`;break;case 2:i+=`one of ${o[0]} or ${o[1]}`;break;default:{let l=o.pop();i+=`one of ${o.join(", ")}, or ${l}`}}if(r==null)i+=`. Received ${r}`;else if(typeof r=="function"&&r.name)i+=`. Received function ${r.name}`;else if(typeof r=="object"){var a;if((a=r.constructor)!==null&&a!==void 0&&a.name)i+=`. Received an instance of ${r.constructor.name}`;else{let l=ya(r,{depth:-1});i+=`. Received ${l}`}}else{let l=ya(r,{colors:!1});l.length>25&&(l=`${l.slice(0,25)}...`),i+=`. Received type ${typeof r} (${l})`}return i},TypeError);me("ERR_INVALID_ARG_VALUE",(t,e,r="is invalid")=>{let i=ya(e);return i.length>128&&(i=i.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${r}. Received ${i}`},TypeError);me("ERR_INVALID_RETURN_VALUE",(t,e,r)=>{var i;let n=r!=null&&(i=r.constructor)!==null&&i!==void 0&&i.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${t} to be returned from the "${e}" function but got ${n}.`},TypeError);me("ERR_MISSING_ARGS",(...t)=>{Wr(t.length>0,"At least one arg needs to be specified");let e,r=t.length;switch(t=(Array.isArray(t)?t:[t]).map(i=>`"${i}"`).join(" or "),r){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{let i=t.pop();e+=`The ${t.join(", ")}, and ${i} arguments`}break}return`${e} must be specified`},TypeError);me("ERR_OUT_OF_RANGE",(t,e,r)=>{Wr(e,'Missing "range" argument');let i;return Number.isInteger(r)&&Math.abs(r)>2**32?i=dw(String(r)):typeof r=="bigint"?(i=String(r),(r>2n**32n||r<-(2n**32n))&&(i=dw(i)),i+="n"):i=ya(r),`The value of "${t}" is out of range. It must be ${e}. Received ${i}`},RangeError);me("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);me("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);me("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);me("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);me("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);me("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);me("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);me("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);me("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);me("ERR_STREAM_WRITE_AFTER_END","write after end",Error);me("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);gw.exports={AbortError:hc,aggregateTwoErrors:pw(LC),hideStackFrames:pw,codes:ma}});var Vi=p((C8,Tw)=>{"use strict";var{ArrayIsArray:pc,ArrayPrototypeIncludes:mw,ArrayPrototypeJoin:ww,ArrayPrototypeMap:jC,NumberIsInteger:gc,NumberIsNaN:DC,NumberMAX_SAFE_INTEGER:BC,NumberMIN_SAFE_INTEGER:FC,NumberParseInt:UC,ObjectPrototypeHasOwnProperty:WC,RegExpPrototypeExec:vw,String:$C,StringPrototypeToUpperCase:VC,StringPrototypeTrim:HC}=X(),{hideStackFrames:$e,codes:{ERR_SOCKET_BAD_PORT:GC,ERR_INVALID_ARG_TYPE:ve,ERR_INVALID_ARG_VALUE:$i,ERR_OUT_OF_RANGE:$r,ERR_UNKNOWN_SIGNAL:bw}}=Re(),{normalizeEncoding:zC}=we(),{isAsyncFunction:YC,isArrayBufferView:KC}=we().types,_w={};function QC(t){return t===(t|0)}function JC(t){return t===t>>>0}var ZC=/^[0-7]+$/,XC="must be a 32-bit unsigned integer or an octal string";function ek(t,e,r){if(typeof t>"u"&&(t=r),typeof t=="string"){if(vw(ZC,t)===null)throw new $i(e,t,XC);t=UC(t,8)}return Sw(t,e),t}var tk=$e((t,e,r=FC,i=BC)=>{if(typeof t!="number")throw new ve(e,"number",t);if(!gc(t))throw new $r(e,"an integer",t);if(t<r||t>i)throw new $r(e,`>= ${r} && <= ${i}`,t)}),rk=$e((t,e,r=-2147483648,i=2147483647)=>{if(typeof t!="number")throw new ve(e,"number",t);if(!gc(t))throw new $r(e,"an integer",t);if(t<r||t>i)throw new $r(e,`>= ${r} && <= ${i}`,t)}),Sw=$e((t,e,r=!1)=>{if(typeof t!="number")throw new ve(e,"number",t);if(!gc(t))throw new $r(e,"an integer",t);let i=r?1:0,n=4294967295;if(t<i||t>n)throw new $r(e,`>= ${i} && <= ${n}`,t)});function bc(t,e){if(typeof t!="string")throw new ve(e,"string",t)}function ik(t,e,r=void 0,i){if(typeof t!="number")throw new ve(e,"number",t);if(r!=null&&t<r||i!=null&&t>i||(r!=null||i!=null)&&DC(t))throw new $r(e,`${r!=null?`>= ${r}`:""}${r!=null&&i!=null?" && ":""}${i!=null?`<= ${i}`:""}`,t)}var nk=$e((t,e,r)=>{if(!mw(r,t)){let n="must be one of: "+ww(jC(r,s=>typeof s=="string"?`'${s}'`:$C(s)),", ");throw new $i(e,t,n)}});function Ew(t,e){if(typeof t!="boolean")throw new ve(e,"boolean",t)}function dc(t,e,r){return t==null||!WC(t,e)?r:t[e]}var sk=$e((t,e,r=null)=>{let i=dc(r,"allowArray",!1),n=dc(r,"allowFunction",!1);if(!dc(r,"nullable",!1)&&t===null||!i&&pc(t)||typeof t!="object"&&(!n||typeof t!="function"))throw new ve(e,"Object",t)}),ok=$e((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new ve(e,"a dictionary",t)}),wa=$e((t,e,r=0)=>{if(!pc(t))throw new ve(e,"Array",t);if(t.length<r){let i=`must be longer than ${r}`;throw new $i(e,t,i)}});function ak(t,e){wa(t,e);for(let r=0;r<t.length;r++)bc(t[r],`${e}[${r}]`)}function lk(t,e){wa(t,e);for(let r=0;r<t.length;r++)Ew(t[r],`${e}[${r}]`)}function uk(t,e){wa(t,e);for(let r=0;r<t.length;r++){let i=t[r],n=`${e}[${r}]`;if(i==null)throw new ve(n,"AbortSignal",i);xw(i,n)}}function fk(t,e="signal"){if(bc(t,e),_w[t]===void 0)throw _w[VC(t)]!==void 0?new bw(t+" (signals must use all capital letters)"):new bw(t)}var ck=$e((t,e="buffer")=>{if(!KC(t))throw new ve(e,["Buffer","TypedArray","DataView"],t)});function hk(t,e){let r=zC(e),i=t.length;if(r==="hex"&&i%2!==0)throw new $i("encoding",e,`is invalid for data of length ${i}`)}function dk(t,e="Port",r=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&HC(t).length===0||+t!==+t>>>0||t>65535||t===0&&!r)throw new GC(e,t,r);return t|0}var xw=$e((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new ve(e,"AbortSignal",t)}),pk=$e((t,e)=>{if(typeof t!="function")throw new ve(e,"Function",t)}),gk=$e((t,e)=>{if(typeof t!="function"||YC(t))throw new ve(e,"Function",t)}),bk=$e((t,e)=>{if(t!==void 0)throw new ve(e,"undefined",t)});function _k(t,e,r){if(!mw(r,t))throw new ve(e,`('${ww(r,"|")}')`,t)}var yk=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function yw(t,e){if(typeof t>"u"||!vw(yk,t))throw new $i(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function mk(t){if(typeof t=="string")return yw(t,"hints"),t;if(pc(t)){let e=t.length,r="";if(e===0)return r;for(let i=0;i<e;i++){let n=t[i];yw(n,"hints"),r+=n,i!==e-1&&(r+=", ")}return r}throw new $i("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Tw.exports={isInt32:QC,isUint32:JC,parseFileMode:ek,validateArray:wa,validateStringArray:ak,validateBooleanArray:lk,validateAbortSignalArray:uk,validateBoolean:Ew,validateBuffer:ck,validateDictionary:ok,validateEncoding:hk,validateFunction:pk,validateInt32:rk,validateInteger:tk,validateNumber:ik,validateObject:sk,validateOneOf:nk,validatePlainFunction:gk,validatePort:dk,validateSignalName:fk,validateString:bc,validateUint32:Sw,validateUndefined:bk,validateUnion:_k,validateAbortSignal:xw,validateLinkHeaderValue:mk}});var lr=p((k8,Rw)=>{"use strict";Rw.exports=global.process});var vt=p((N8,Uw)=>{"use strict";var{SymbolAsyncIterator:Ow,SymbolIterator:Aw,SymbolFor:Vr}=X(),Pw=Vr("nodejs.stream.destroyed"),Mw=Vr("nodejs.stream.errored"),_c=Vr("nodejs.stream.readable"),yc=Vr("nodejs.stream.writable"),Iw=Vr("nodejs.stream.disturbed"),wk=Vr("nodejs.webstream.isClosedPromise"),vk=Vr("nodejs.webstream.controllerErrorFunction");function va(t,e=!1){var r;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((r=t._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!t._writableState||t._readableState))}function Sa(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function Sk(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function wt(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function qw(t){return!!(t&&!wt(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function Cw(t){return!!(t&&!wt(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function kw(t){return!!(t&&!wt(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function Ek(t){return qw(t)||Cw(t)||kw(t)}function xk(t,e){return t==null?!1:e===!0?typeof t[Ow]=="function":e===!1?typeof t[Aw]=="function":typeof t[Ow]=="function"||typeof t[Aw]=="function"}function Ea(t){if(!wt(t))return null;let e=t._writableState,r=t._readableState,i=e||r;return!!(t.destroyed||t[Pw]||i!=null&&i.destroyed)}function Nw(t){if(!Sa(t))return null;if(t.writableEnded===!0)return!0;let e=t._writableState;return e!=null&&e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Tk(t,e){if(!Sa(t))return null;if(t.writableFinished===!0)return!0;let r=t._writableState;return r!=null&&r.errored?!1:typeof r?.finished!="boolean"?null:!!(r.finished||e===!1&&r.ended===!0&&r.length===0)}function Rk(t){if(!va(t))return null;if(t.readableEnded===!0)return!0;let e=t._readableState;return!e||e.errored?!1:typeof e?.ended!="boolean"?null:e.ended}function Lw(t,e){if(!va(t))return null;let r=t._readableState;return r!=null&&r.errored?!1:typeof r?.endEmitted!="boolean"?null:!!(r.endEmitted||e===!1&&r.ended===!0&&r.length===0)}function jw(t){return t&&t[_c]!=null?t[_c]:typeof t?.readable!="boolean"?null:Ea(t)?!1:va(t)&&t.readable&&!Lw(t)}function Dw(t){return t&&t[yc]!=null?t[yc]:typeof t?.writable!="boolean"?null:Ea(t)?!1:Sa(t)&&t.writable&&!Nw(t)}function Ok(t,e){return wt(t)?Ea(t)?!0:!(e?.readable!==!1&&jw(t)||e?.writable!==!1&&Dw(t)):null}function Ak(t){var e,r;return wt(t)?t.writableErrored?t.writableErrored:(e=(r=t._writableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Pk(t){var e,r;return wt(t)?t.readableErrored?t.readableErrored:(e=(r=t._readableState)===null||r===void 0?void 0:r.errored)!==null&&e!==void 0?e:null:null}function Mk(t){if(!wt(t))return null;if(typeof t.closed=="boolean")return t.closed;let e=t._writableState,r=t._readableState;return typeof e?.closed=="boolean"||typeof r?.closed=="boolean"?e?.closed||r?.closed:typeof t._closed=="boolean"&&Bw(t)?t._closed:null}function Bw(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function Fw(t){return typeof t._sent100=="boolean"&&Bw(t)}function Ik(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function qk(t){if(!wt(t))return null;let e=t._writableState,r=t._readableState,i=e||r;return!i&&Fw(t)||!!(i&&i.autoDestroy&&i.emitClose&&i.closed===!1)}function Ck(t){var e;return!!(t&&((e=t[Iw])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function kk(t){var e,r,i,n,s,o,a,l,u,f;return!!(t&&((e=(r=(i=(n=(s=(o=t[Mw])!==null&&o!==void 0?o:t.readableErrored)!==null&&s!==void 0?s:t.writableErrored)!==null&&n!==void 0?n:(a=t._readableState)===null||a===void 0?void 0:a.errorEmitted)!==null&&i!==void 0?i:(l=t._writableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&r!==void 0?r:(u=t._readableState)===null||u===void 0?void 0:u.errored)!==null&&e!==void 0?e:!((f=t._writableState)===null||f===void 0)&&f.errored))}Uw.exports={isDestroyed:Ea,kIsDestroyed:Pw,isDisturbed:Ck,kIsDisturbed:Iw,isErrored:kk,kIsErrored:Mw,isReadable:jw,kIsReadable:_c,kIsClosedPromise:wk,kControllerErrorFunction:vk,kIsWritable:yc,isClosed:Mk,isDuplexNodeStream:Sk,isFinished:Ok,isIterable:xk,isReadableNodeStream:va,isReadableStream:qw,isReadableEnded:Rk,isReadableFinished:Lw,isReadableErrored:Pk,isNodeStream:wt,isWebStream:Ek,isWritable:Dw,isWritableNodeStream:Sa,isWritableStream:Cw,isWritableEnded:Nw,isWritableFinished:Tk,isWritableErrored:Ak,isServerRequest:Ik,isServerResponse:Fw,willEmitClose:qk,isTransformStream:kw}});var Lt=p((L8,Ec)=>{"use strict";var ur=lr(),{AbortError:Qw,codes:Nk}=Re(),{ERR_INVALID_ARG_TYPE:Lk,ERR_STREAM_PREMATURE_CLOSE:Ww}=Nk,{kEmptyObject:wc,once:vc}=we(),{validateAbortSignal:jk,validateFunction:Dk,validateObject:Bk,validateBoolean:Fk}=Vi(),{Promise:Uk,PromisePrototypeThen:Wk,SymbolDispose:Jw}=X(),{isClosed:$k,isReadable:$w,isReadableNodeStream:mc,isReadableStream:Vk,isReadableFinished:Vw,isReadableErrored:Hw,isWritable:Gw,isWritableNodeStream:zw,isWritableStream:Hk,isWritableFinished:Yw,isWritableErrored:Kw,isNodeStream:Gk,willEmitClose:zk,kIsClosedPromise:Yk}=vt(),Hi;function Kk(t){return t.setHeader&&typeof t.abort=="function"}var Sc=()=>{};function Zw(t,e,r){var i,n;if(arguments.length===2?(r=e,e=wc):e==null?e=wc:Bk(e,"options"),Dk(r,"callback"),jk(e.signal,"options.signal"),r=vc(r),Vk(t)||Hk(t))return Qk(t,e,r);if(!Gk(t))throw new Lk("stream",["ReadableStream","WritableStream","Stream"],t);let s=(i=e.readable)!==null&&i!==void 0?i:mc(t),o=(n=e.writable)!==null&&n!==void 0?n:zw(t),a=t._writableState,l=t._readableState,u=()=>{t.writable||h()},f=zk(t)&&mc(t)===s&&zw(t)===o,c=Yw(t,!1),h=()=>{c=!0,t.destroyed&&(f=!1),!(f&&(!t.readable||s))&&(!s||b)&&r.call(t)},b=Vw(t,!1),d=()=>{b=!0,t.destroyed&&(f=!1),!(f&&(!t.writable||o))&&(!o||c)&&r.call(t)},g=T=>{r.call(t,T)},y=$k(t),_=()=>{y=!0;let T=Kw(t)||Hw(t);if(T&&typeof T!="boolean")return r.call(t,T);if(s&&!b&&mc(t,!0)&&!Vw(t,!1))return r.call(t,new Ww);if(o&&!c&&!Yw(t,!1))return r.call(t,new Ww);r.call(t)},m=()=>{y=!0;let T=Kw(t)||Hw(t);if(T&&typeof T!="boolean")return r.call(t,T);r.call(t)},S=()=>{t.req.on("finish",h)};Kk(t)?(t.on("complete",h),f||t.on("abort",_),t.req?S():t.on("request",S)):o&&!a&&(t.on("end",u),t.on("close",u)),!f&&typeof t.aborted=="boolean"&&t.on("aborted",_),t.on("end",d),t.on("finish",h),e.error!==!1&&t.on("error",g),t.on("close",_),y?ur.nextTick(_):a!=null&&a.errorEmitted||l!=null&&l.errorEmitted?f||ur.nextTick(m):(!s&&(!f||$w(t))&&(c||Gw(t)===!1)||!o&&(!f||Gw(t))&&(b||$w(t)===!1)||l&&t.req&&t.aborted)&&ur.nextTick(m);let w=()=>{r=Sc,t.removeListener("aborted",_),t.removeListener("complete",h),t.removeListener("abort",_),t.removeListener("request",S),t.req&&t.req.removeListener("finish",h),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",h),t.removeListener("end",d),t.removeListener("error",g),t.removeListener("close",_)};if(e.signal&&!y){let T=()=>{let M=r;w(),M.call(t,new Qw(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)ur.nextTick(T);else{Hi=Hi||we().addAbortListener;let M=Hi(e.signal,T),O=r;r=vc((...N)=>{M[Jw](),O.apply(t,N)})}}return w}function Qk(t,e,r){let i=!1,n=Sc;if(e.signal)if(n=()=>{i=!0,r.call(t,new Qw(void 0,{cause:e.signal.reason}))},e.signal.aborted)ur.nextTick(n);else{Hi=Hi||we().addAbortListener;let o=Hi(e.signal,n),a=r;r=vc((...l)=>{o[Jw](),a.apply(t,l)})}let s=(...o)=>{i||ur.nextTick(()=>r.apply(t,o))};return Wk(t[Yk].promise,s,s),Sc}function Jk(t,e){var r;let i=!1;return e===null&&(e=wc),(r=e)!==null&&r!==void 0&&r.cleanup&&(Fk(e.cleanup,"cleanup"),i=e.cleanup),new Uk((n,s)=>{let o=Zw(t,e,a=>{i&&o(),a?s(a):n()})})}Ec.exports=Zw;Ec.exports.finished=Jk});var Hr=p((j8,ov)=>{"use strict";var St=lr(),{aggregateTwoErrors:Zk,codes:{ERR_MULTIPLE_CALLBACK:Xk},AbortError:eN}=Re(),{Symbol:tv}=X(),{kIsDestroyed:tN,isDestroyed:rN,isFinished:iN,isServerRequest:nN}=vt(),rv=tv("kDestroy"),xc=tv("kConstruct");function iv(t,e,r){t&&(t.stack,e&&!e.errored&&(e.errored=t),r&&!r.errored&&(r.errored=t))}function sN(t,e){let r=this._readableState,i=this._writableState,n=i||r;return i!=null&&i.destroyed||r!=null&&r.destroyed?(typeof e=="function"&&e(),this):(iv(t,i,r),i&&(i.destroyed=!0),r&&(r.destroyed=!0),n.constructed?Xw(this,t,e):this.once(rv,function(s){Xw(this,Zk(s,t),e)}),this)}function Xw(t,e,r){let i=!1;function n(s){if(i)return;i=!0;let o=t._readableState,a=t._writableState;iv(s,a,o),a&&(a.closed=!0),o&&(o.closed=!0),typeof r=="function"&&r(s),s?St.nextTick(oN,t,s):St.nextTick(nv,t)}try{t._destroy(e||null,n)}catch(s){n(s)}}function oN(t,e){Tc(t,e),nv(t)}function nv(t){let e=t._readableState,r=t._writableState;r&&(r.closeEmitted=!0),e&&(e.closeEmitted=!0),(r!=null&&r.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function Tc(t,e){let r=t._readableState,i=t._writableState;i!=null&&i.errorEmitted||r!=null&&r.errorEmitted||(i&&(i.errorEmitted=!0),r&&(r.errorEmitted=!0),t.emit("error",e))}function aN(){let t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function Rc(t,e,r){let i=t._readableState,n=t._writableState;if(n!=null&&n.destroyed||i!=null&&i.destroyed)return this;i!=null&&i.autoDestroy||n!=null&&n.autoDestroy?t.destroy(e):e&&(e.stack,n&&!n.errored&&(n.errored=e),i&&!i.errored&&(i.errored=e),r?St.nextTick(Tc,t,e):Tc(t,e))}function lN(t,e){if(typeof t._construct!="function")return;let r=t._readableState,i=t._writableState;r&&(r.constructed=!1),i&&(i.constructed=!1),t.once(xc,e),!(t.listenerCount(xc)>1)&&St.nextTick(uN,t)}function uN(t){let e=!1;function r(i){if(e){Rc(t,i??new Xk);return}e=!0;let n=t._readableState,s=t._writableState,o=s||n;n&&(n.constructed=!0),s&&(s.constructed=!0),o.destroyed?t.emit(rv,i):i?Rc(t,i,!0):St.nextTick(fN,t)}try{t._construct(i=>{St.nextTick(r,i)})}catch(i){St.nextTick(r,i)}}function fN(t){t.emit(xc)}function ev(t){return t?.setHeader&&typeof t.abort=="function"}function sv(t){t.emit("close")}function cN(t,e){t.emit("error",e),St.nextTick(sv,t)}function hN(t,e){!t||rN(t)||(!e&&!iN(t)&&(e=new eN),nN(t)?(t.socket=null,t.destroy(e)):ev(t)?t.abort():ev(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?St.nextTick(cN,t,e):St.nextTick(sv,t),t.destroyed||(t[tN]=!0))}ov.exports={construct:lN,destroyer:hN,destroy:sN,undestroy:aN,errorOrDestroy:Rc}});var Ra=p((D8,lv)=>{"use strict";var{ArrayIsArray:dN,ObjectSetPrototypeOf:av}=X(),{EventEmitter:xa}=E("events");function Ta(t){xa.call(this,t)}av(Ta.prototype,xa.prototype);av(Ta,xa);Ta.prototype.pipe=function(t,e){let r=this;function i(f){t.writable&&t.write(f)===!1&&r.pause&&r.pause()}r.on("data",i);function n(){r.readable&&r.resume&&r.resume()}t.on("drain",n),!t._isStdio&&(!e||e.end!==!1)&&(r.on("end",o),r.on("close",a));let s=!1;function o(){s||(s=!0,t.end())}function a(){s||(s=!0,typeof t.destroy=="function"&&t.destroy())}function l(f){u(),xa.listenerCount(this,"error")===0&&this.emit("error",f)}Oc(r,"error",l),Oc(t,"error",l);function u(){r.removeListener("data",i),t.removeListener("drain",n),r.removeListener("end",o),r.removeListener("close",a),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t};function Oc(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):dN(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}lv.exports={Stream:Ta,prependListener:Oc}});var as=p((B8,Oa)=>{"use strict";var{SymbolDispose:pN}=X(),{AbortError:uv,codes:gN}=Re(),{isNodeStream:fv,isWebStream:bN,kControllerErrorFunction:_N}=vt(),yN=Lt(),{ERR_INVALID_ARG_TYPE:cv}=gN,Ac,mN=(t,e)=>{if(typeof t!="object"||!("aborted"in t))throw new cv(e,"AbortSignal",t)};Oa.exports.addAbortSignal=function(e,r){if(mN(e,"signal"),!fv(r)&&!bN(r))throw new cv("stream",["ReadableStream","WritableStream","Stream"],r);return Oa.exports.addAbortSignalNoValidate(e,r)};Oa.exports.addAbortSignalNoValidate=function(t,e){if(typeof t!="object"||!("aborted"in t))return e;let r=fv(e)?()=>{e.destroy(new uv(void 0,{cause:t.reason}))}:()=>{e[_N](new uv(void 0,{cause:t.reason}))};if(t.aborted)r();else{Ac=Ac||we().addAbortListener;let i=Ac(t,r);yN(e,i[pN])}return e}});var pv=p((U8,dv)=>{"use strict";var{StringPrototypeSlice:hv,SymbolIterator:wN,TypedArrayPrototypeSet:Aa,Uint8Array:vN}=X(),{Buffer:Pc}=E("buffer"),{inspect:SN}=we();dv.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){let r={data:e,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(e){let r={data:e,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;let e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let r=this.head,i=""+r.data;for(;(r=r.next)!==null;)i+=e+r.data;return i}concat(e){if(this.length===0)return Pc.alloc(0);let r=Pc.allocUnsafe(e>>>0),i=this.head,n=0;for(;i;)Aa(r,i.data,n),n+=i.data.length,i=i.next;return r}consume(e,r){let i=this.head.data;if(e<i.length){let n=i.slice(0,e);return this.head.data=i.slice(e),n}return e===i.length?this.shift():r?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[wN](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let r="",i=this.head,n=0;do{let s=i.data;if(e>s.length)r+=s,e-=s.length;else{e===s.length?(r+=s,++n,i.next?this.head=i.next:this.head=this.tail=null):(r+=hv(s,0,e),this.head=i,i.data=hv(s,e));break}++n}while((i=i.next)!==null);return this.length-=n,r}_getBuffer(e){let r=Pc.allocUnsafe(e),i=e,n=this.head,s=0;do{let o=n.data;if(e>o.length)Aa(r,o,i-e),e-=o.length;else{e===o.length?(Aa(r,o,i-e),++s,n.next?this.head=n.next:this.head=this.tail=null):(Aa(r,new vN(o.buffer,o.byteOffset,e),i-e),this.head=n,n.data=o.slice(e));break}++s}while((n=n.next)!==null);return this.length-=s,r}[Symbol.for("nodejs.util.inspect.custom")](e,r){return SN(this,{...r,depth:0,customInspect:!1})}}});var ls=p((W8,yv)=>{"use strict";var{MathFloor:EN,NumberIsInteger:xN}=X(),{validateInteger:TN}=Vi(),{ERR_INVALID_ARG_VALUE:RN}=Re().codes,gv=16*1024,bv=16;function ON(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function _v(t){return t?bv:gv}function AN(t,e){TN(e,"value",0),t?bv=e:gv=e}function PN(t,e,r,i){let n=ON(e,i,r);if(n!=null){if(!xN(n)||n<0){let s=i?`options.${r}`:"options.highWaterMark";throw new RN(s,n)}return EN(n)}return _v(t.objectMode)}yv.exports={getHighWaterMark:PN,getDefaultHighWaterMark:_v,setDefaultHighWaterMark:AN}});var Mc=p(($8,Sv)=>{"use strict";var mv=lr(),{PromisePrototypeThen:MN,SymbolAsyncIterator:wv,SymbolIterator:vv}=X(),{Buffer:IN}=E("buffer"),{ERR_INVALID_ARG_TYPE:qN,ERR_STREAM_NULL_VALUES:CN}=Re().codes;function kN(t,e,r){let i;if(typeof e=="string"||e instanceof IN)return new t({objectMode:!0,...r,read(){this.push(e),this.push(null)}});let n;if(e&&e[wv])n=!0,i=e[wv]();else if(e&&e[vv])n=!1,i=e[vv]();else throw new qN("iterable",["Iterable"],e);let s=new t({objectMode:!0,highWaterMark:1,...r}),o=!1;s._read=function(){o||(o=!0,l())},s._destroy=function(u,f){MN(a(u),()=>mv.nextTick(f,u),c=>mv.nextTick(f,c||u))};async function a(u){let f=u!=null,c=typeof i.throw=="function";if(f&&c){let{value:h,done:b}=await i.throw(u);if(await h,b)return}if(typeof i.return=="function"){let{value:h}=await i.return();await h}}async function l(){for(;;){try{let{value:u,done:f}=n?await i.next():i.next();if(f)s.push(null);else{let c=u&&typeof u.then=="function"?await u:u;if(c===null)throw o=!1,new CN;if(s.push(c))continue;o=!1}}catch(u){s.destroy(u)}break}}return s}Sv.exports=kN});var fs=p((V8,Fv)=>{"use strict";var nt=lr(),{ArrayPrototypeIndexOf:NN,NumberIsInteger:LN,NumberIsNaN:jN,NumberParseInt:DN,ObjectDefineProperties:Dc,ObjectKeys:BN,ObjectSetPrototypeOf:Tv,Promise:Rv,SafeSet:FN,SymbolAsyncDispose:UN,SymbolAsyncIterator:WN,Symbol:$N}=X();Fv.exports=L;L.ReadableState=qa;var{EventEmitter:VN}=E("events"),{Stream:fr,prependListener:HN}=Ra(),{Buffer:Ic}=E("buffer"),{addAbortSignal:GN}=as(),Ov=Lt(),U=we().debuglog("stream",t=>{U=t}),zN=pv(),Yi=Hr(),{getHighWaterMark:YN,getDefaultHighWaterMark:KN}=ls(),{aggregateTwoErrors:Ev,codes:{ERR_INVALID_ARG_TYPE:QN,ERR_METHOD_NOT_IMPLEMENTED:JN,ERR_OUT_OF_RANGE:ZN,ERR_STREAM_PUSH_AFTER_EOF:XN,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:eL},AbortError:tL}=Re(),{validateObject:rL}=Vi(),Gr=$N("kPaused"),{StringDecoder:Av}=E("string_decoder"),iL=Mc();Tv(L.prototype,fr.prototype);Tv(L,fr);var qc=()=>{},{errorOrDestroy:Gi}=Yi,zi=1,nL=2,Pv=4,us=8,Mv=16,Pa=32,Ma=64,Iv=128,sL=256,oL=512,aL=1024,Lc=2048,jc=4096,lL=8192,uL=16384,fL=32768,qv=65536,cL=1<<17,hL=1<<18;function fe(t){return{enumerable:!1,get(){return(this.state&t)!==0},set(e){e?this.state|=t:this.state&=~t}}}Dc(qa.prototype,{objectMode:fe(zi),ended:fe(nL),endEmitted:fe(Pv),reading:fe(us),constructed:fe(Mv),sync:fe(Pa),needReadable:fe(Ma),emittedReadable:fe(Iv),readableListening:fe(sL),resumeScheduled:fe(oL),errorEmitted:fe(aL),emitClose:fe(Lc),autoDestroy:fe(jc),destroyed:fe(lL),closed:fe(uL),closeEmitted:fe(fL),multiAwaitDrain:fe(qv),readingMore:fe(cL),dataEmitted:fe(hL)});function qa(t,e,r){typeof r!="boolean"&&(r=e instanceof Et()),this.state=Lc|jc|Mv|Pa,t&&t.objectMode&&(this.state|=zi),r&&t&&t.readableObjectMode&&(this.state|=zi),this.highWaterMark=t?YN(this,t,"readableHighWaterMark",r):KN(!1),this.buffer=new zN,this.length=0,this.pipes=[],this.flowing=null,this[Gr]=null,t&&t.emitClose===!1&&(this.state&=~Lc),t&&t.autoDestroy===!1&&(this.state&=~jc),this.errored=null,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,t&&t.encoding&&(this.decoder=new Av(t.encoding),this.encoding=t.encoding)}function L(t){if(!(this instanceof L))return new L(t);let e=this instanceof Et();this._readableState=new qa(t,this,e),t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&!e&&GN(t.signal,this)),fr.call(this,t),Yi.construct(this,()=>{this._readableState.needReadable&&Ia(this,this._readableState)})}L.prototype.destroy=Yi.destroy;L.prototype._undestroy=Yi.undestroy;L.prototype._destroy=function(t,e){e(t)};L.prototype[VN.captureRejectionSymbol]=function(t){this.destroy(t)};L.prototype[UN]=function(){let t;return this.destroyed||(t=this.readableEnded?null:new tL,this.destroy(t)),new Rv((e,r)=>Ov(this,i=>i&&i!==t?r(i):e(null)))};L.prototype.push=function(t,e){return Cv(this,t,e,!1)};L.prototype.unshift=function(t,e){return Cv(this,t,e,!0)};function Cv(t,e,r,i){U("readableAddChunk",e);let n=t._readableState,s;if(n.state&zi||(typeof e=="string"?(r=r||n.defaultEncoding,n.encoding!==r&&(i&&n.encoding?e=Ic.from(e,r).toString(n.encoding):(e=Ic.from(e,r),r=""))):e instanceof Ic?r="":fr._isUint8Array(e)?(e=fr._uint8ArrayToBuffer(e),r=""):e!=null&&(s=new QN("chunk",["string","Buffer","Uint8Array"],e))),s)Gi(t,s);else if(e===null)n.state&=~us,gL(t,n);else if(n.state&zi||e&&e.length>0)if(i)if(n.state&Pv)Gi(t,new eL);else{if(n.destroyed||n.errored)return!1;Cc(t,n,e,!0)}else if(n.ended)Gi(t,new XN);else{if(n.destroyed||n.errored)return!1;n.state&=~us,n.decoder&&!r?(e=n.decoder.write(e),n.objectMode||e.length!==0?Cc(t,n,e,!1):Ia(t,n)):Cc(t,n,e,!1)}else i||(n.state&=~us,Ia(t,n));return!n.ended&&(n.length<n.highWaterMark||n.length===0)}function Cc(t,e,r,i){e.flowing&&e.length===0&&!e.sync&&t.listenerCount("data")>0?(e.state&qv?e.awaitDrainWriters.clear():e.awaitDrainWriters=null,e.dataEmitted=!0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.state&Ma&&Ca(t)),Ia(t,e)}L.prototype.isPaused=function(){let t=this._readableState;return t[Gr]===!0||t.flowing===!1};L.prototype.setEncoding=function(t){let e=new Av(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;let r=this._readableState.buffer,i="";for(let n of r)i+=e.write(n);return r.clear(),i!==""&&r.push(i),this._readableState.length=i.length,this};var dL=1073741824;function pL(t){if(t>dL)throw new ZN("size","<= 1GiB",t);return t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++,t}function xv(t,e){return t<=0||e.length===0&&e.ended?0:e.state&zi?1:jN(t)?e.flowing&&e.length?e.buffer.first().length:e.length:t<=e.length?t:e.ended?e.length:0}L.prototype.read=function(t){U("read",t),t===void 0?t=NaN:LN(t)||(t=DN(t,10));let e=this._readableState,r=t;if(t>e.highWaterMark&&(e.highWaterMark=pL(t)),t!==0&&(e.state&=~Iv),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return U("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?kc(this):Ca(this),null;if(t=xv(t,e),t===0&&e.ended)return e.length===0&&kc(this),null;let i=(e.state&Ma)!==0;if(U("need readable",i),(e.length===0||e.length-t<e.highWaterMark)&&(i=!0,U("length less than watermark",i)),e.ended||e.reading||e.destroyed||e.errored||!e.constructed)i=!1,U("reading, ended or constructing",i);else if(i){U("do read"),e.state|=us|Pa,e.length===0&&(e.state|=Ma);try{this._read(e.highWaterMark)}catch(s){Gi(this,s)}e.state&=~Pa,e.reading||(t=xv(r,e))}let n;return t>0?n=Dv(t,e):n=null,n===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.multiAwaitDrain?e.awaitDrainWriters.clear():e.awaitDrainWriters=null),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&kc(this)),n!==null&&!e.errorEmitted&&!e.closeEmitted&&(e.dataEmitted=!0,this.emit("data",n)),n};function gL(t,e){if(U("onEofChunk"),!e.ended){if(e.decoder){let r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Ca(t):(e.needReadable=!1,e.emittedReadable=!0,kv(t))}}function Ca(t){let e=t._readableState;U("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(U("emitReadable",e.flowing),e.emittedReadable=!0,nt.nextTick(kv,t))}function kv(t){let e=t._readableState;U("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&!e.errored&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Lv(t)}function Ia(t,e){!e.readingMore&&e.constructed&&(e.readingMore=!0,nt.nextTick(bL,t,e))}function bL(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){let r=e.length;if(U("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}L.prototype._read=function(t){throw new JN("_read()")};L.prototype.pipe=function(t,e){let r=this,i=this._readableState;i.pipes.length===1&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new FN(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(t),U("pipe count=%d opts=%j",i.pipes.length,e);let s=(!e||e.end!==!1)&&t!==nt.stdout&&t!==nt.stderr?a:y;i.endEmitted?nt.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(_,m){U("onunpipe"),_===r&&m&&m.hasUnpiped===!1&&(m.hasUnpiped=!0,f())}function a(){U("onend"),t.end()}let l,u=!1;function f(){U("cleanup"),t.removeListener("close",d),t.removeListener("finish",g),l&&t.removeListener("drain",l),t.removeListener("error",b),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",y),r.removeListener("data",h),u=!0,l&&i.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}function c(){u||(i.pipes.length===1&&i.pipes[0]===t?(U("false write response, pause",0),i.awaitDrainWriters=t,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(t)&&(U("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(t)),r.pause()),l||(l=_L(r,t),t.on("drain",l))}r.on("data",h);function h(_){U("ondata");let m=t.write(_);U("dest.write",m),m===!1&&c()}function b(_){if(U("onerror",_),y(),t.removeListener("error",b),t.listenerCount("error")===0){let m=t._writableState||t._readableState;m&&!m.errorEmitted?Gi(t,_):t.emit("error",_)}}HN(t,"error",b);function d(){t.removeListener("finish",g),y()}t.once("close",d);function g(){U("onfinish"),t.removeListener("close",d),y()}t.once("finish",g);function y(){U("unpipe"),r.unpipe(t)}return t.emit("pipe",r),t.writableNeedDrain===!0?c():i.flowing||(U("pipe resume"),r.resume()),t};function _L(t,e){return function(){let i=t._readableState;i.awaitDrainWriters===e?(U("pipeOnDrain",1),i.awaitDrainWriters=null):i.multiAwaitDrain&&(U("pipeOnDrain",i.awaitDrainWriters.size),i.awaitDrainWriters.delete(e)),(!i.awaitDrainWriters||i.awaitDrainWriters.size===0)&&t.listenerCount("data")&&t.resume()}}L.prototype.unpipe=function(t){let e=this._readableState,r={hasUnpiped:!1};if(e.pipes.length===0)return this;if(!t){let n=e.pipes;e.pipes=[],this.pause();for(let s=0;s<n.length;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}let i=NN(e.pipes,t);return i===-1?this:(e.pipes.splice(i,1),e.pipes.length===0&&this.pause(),t.emit("unpipe",this,r),this)};L.prototype.on=function(t,e){let r=fr.prototype.on.call(this,t,e),i=this._readableState;return t==="data"?(i.readableListening=this.listenerCount("readable")>0,i.flowing!==!1&&this.resume()):t==="readable"&&!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,U("on readable",i.length,i.reading),i.length?Ca(this):i.reading||nt.nextTick(yL,this)),r};L.prototype.addListener=L.prototype.on;L.prototype.removeListener=function(t,e){let r=fr.prototype.removeListener.call(this,t,e);return t==="readable"&&nt.nextTick(Nv,this),r};L.prototype.off=L.prototype.removeListener;L.prototype.removeAllListeners=function(t){let e=fr.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&nt.nextTick(Nv,this),e};function Nv(t){let e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&e[Gr]===!1?e.flowing=!0:t.listenerCount("data")>0?t.resume():e.readableListening||(e.flowing=null)}function yL(t){U("readable nexttick read 0"),t.read(0)}L.prototype.resume=function(){let t=this._readableState;return t.flowing||(U("resume"),t.flowing=!t.readableListening,mL(this,t)),t[Gr]=!1,this};function mL(t,e){e.resumeScheduled||(e.resumeScheduled=!0,nt.nextTick(wL,t,e))}function wL(t,e){U("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Lv(t),e.flowing&&!e.reading&&t.read(0)}L.prototype.pause=function(){return U("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(U("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Gr]=!0,this};function Lv(t){let e=t._readableState;for(U("flow",e.flowing);e.flowing&&t.read()!==null;);}L.prototype.wrap=function(t){let e=!1;t.on("data",i=>{!this.push(i)&&t.pause&&(e=!0,t.pause())}),t.on("end",()=>{this.push(null)}),t.on("error",i=>{Gi(this,i)}),t.on("close",()=>{this.destroy()}),t.on("destroy",()=>{this.destroy()}),this._read=()=>{e&&t.resume&&(e=!1,t.resume())};let r=BN(t);for(let i=1;i<r.length;i++){let n=r[i];this[n]===void 0&&typeof t[n]=="function"&&(this[n]=t[n].bind(t))}return this};L.prototype[WN]=function(){return jv(this)};L.prototype.iterator=function(t){return t!==void 0&&rL(t,"options"),jv(this,t)};function jv(t,e){typeof t.read!="function"&&(t=L.wrap(t,{objectMode:!0}));let r=vL(t,e);return r.stream=t,r}async function*vL(t,e){let r=qc;function i(o){this===t?(r(),r=qc):r=o}t.on("readable",i);let n,s=Ov(t,{writable:!1},o=>{n=o?Ev(n,o):null,r(),r=qc});try{for(;;){let o=t.destroyed?null:t.read();if(o!==null)yield o;else{if(n)throw n;if(n===null)return;await new Rv(i)}}}catch(o){throw n=Ev(n,o),n}finally{(n||e?.destroyOnReturn!==!1)&&(n===void 0||t._readableState.autoDestroy)?Yi.destroyer(t,null):(t.off("readable",i),s())}}Dc(L.prototype,{readable:{__proto__:null,get(){let t=this._readableState;return!!t&&t.readable!==!1&&!t.destroyed&&!t.errorEmitted&&!t.endEmitted},set(t){this._readableState&&(this._readableState.readable=!!t)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(t){this._readableState&&(this._readableState.destroyed=t)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}});Dc(qa.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[Gr]!==!1},set(t){this[Gr]=!!t}}});L._fromList=Dv;function Dv(t,e){if(e.length===0)return null;let r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function kc(t){let e=t._readableState;U("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,nt.nextTick(SL,e,t))}function SL(t,e){if(U("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&t.length===0){if(t.endEmitted=!0,e.emit("end"),e.writable&&e.allowHalfOpen===!1)nt.nextTick(EL,e);else if(t.autoDestroy){let r=e._writableState;(!r||r.autoDestroy&&(r.finished||r.writable===!1))&&e.destroy()}}}function EL(t){t.writable&&!t.writableEnded&&!t.destroyed&&t.end()}L.from=function(t,e){return iL(L,t,e)};var Nc;function Bv(){return Nc===void 0&&(Nc={}),Nc}L.fromWeb=function(t,e){return Bv().newStreamReadableFromReadableStream(t,e)};L.toWeb=function(t,e){return Bv().newReadableStreamFromStreamReadable(t,e)};L.wrap=function(t,e){var r,i;return new L({objectMode:(r=(i=t.readableObjectMode)!==null&&i!==void 0?i:t.objectMode)!==null&&r!==void 0?r:!0,...e,destroy(n,s){Yi.destroyer(t,n),s(n)}}).wrap(t)}});var Da=p((H8,Zv)=>{"use strict";var zr=lr(),{ArrayPrototypeSlice:$v,Error:xL,FunctionPrototypeSymbolHasInstance:Vv,ObjectDefineProperty:Hv,ObjectDefineProperties:TL,ObjectSetPrototypeOf:Gv,StringPrototypeToLowerCase:RL,Symbol:OL,SymbolHasInstance:AL}=X();Zv.exports=ee;ee.WritableState=ds;var{EventEmitter:PL}=E("events"),cs=Ra().Stream,{Buffer:ka}=E("buffer"),ja=Hr(),{addAbortSignal:ML}=as(),{getHighWaterMark:IL,getDefaultHighWaterMark:qL}=ls(),{ERR_INVALID_ARG_TYPE:CL,ERR_METHOD_NOT_IMPLEMENTED:kL,ERR_MULTIPLE_CALLBACK:zv,ERR_STREAM_CANNOT_PIPE:NL,ERR_STREAM_DESTROYED:hs,ERR_STREAM_ALREADY_FINISHED:LL,ERR_STREAM_NULL_VALUES:jL,ERR_STREAM_WRITE_AFTER_END:DL,ERR_UNKNOWN_ENCODING:Yv}=Re().codes,{errorOrDestroy:Ki}=ja;Gv(ee.prototype,cs.prototype);Gv(ee,cs);function Uc(){}var Qi=OL("kOnFinished");function ds(t,e,r){typeof r!="boolean"&&(r=e instanceof Et()),this.objectMode=!!(t&&t.objectMode),r&&(this.objectMode=this.objectMode||!!(t&&t.writableObjectMode)),this.highWaterMark=t?IL(this,t,"writableHighWaterMark",r):qL(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;let i=!!(t&&t.decodeStrings===!1);this.decodeStrings=!i,this.defaultEncoding=t&&t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=FL.bind(void 0,e),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,La(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!t||t.emitClose!==!1,this.autoDestroy=!t||t.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Qi]=[]}function La(t){t.buffered=[],t.bufferedIndex=0,t.allBuffers=!0,t.allNoop=!0}ds.prototype.getBuffer=function(){return $v(this.buffered,this.bufferedIndex)};Hv(ds.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ee(t){let e=this instanceof Et();if(!e&&!Vv(ee,this))return new ee(t);this._writableState=new ds(t,this,e),t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final),typeof t.construct=="function"&&(this._construct=t.construct),t.signal&&ML(t.signal,this)),cs.call(this,t),ja.construct(this,()=>{let r=this._writableState;r.writing||$c(this,r),Vc(this,r)})}Hv(ee,AL,{__proto__:null,value:function(t){return Vv(this,t)?!0:this!==ee?!1:t&&t._writableState instanceof ds}});ee.prototype.pipe=function(){Ki(this,new NL)};function Kv(t,e,r,i){let n=t._writableState;if(typeof r=="function")i=r,r=n.defaultEncoding;else{if(!r)r=n.defaultEncoding;else if(r!=="buffer"&&!ka.isEncoding(r))throw new Yv(r);typeof i!="function"&&(i=Uc)}if(e===null)throw new jL;if(!n.objectMode)if(typeof e=="string")n.decodeStrings!==!1&&(e=ka.from(e,r),r="buffer");else if(e instanceof ka)r="buffer";else if(cs._isUint8Array(e))e=cs._uint8ArrayToBuffer(e),r="buffer";else throw new CL("chunk",["string","Buffer","Uint8Array"],e);let s;return n.ending?s=new DL:n.destroyed&&(s=new hs("write")),s?(zr.nextTick(i,s),Ki(t,s,!0),s):(n.pendingcb++,BL(t,n,e,r,i))}ee.prototype.write=function(t,e,r){return Kv(this,t,e,r)===!0};ee.prototype.cork=function(){this._writableState.corked++};ee.prototype.uncork=function(){let t=this._writableState;t.corked&&(t.corked--,t.writing||$c(this,t))};ee.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=RL(e)),!ka.isEncoding(e))throw new Yv(e);return this._writableState.defaultEncoding=e,this};function BL(t,e,r,i,n){let s=e.objectMode?1:r.length;e.length+=s;let o=e.length<e.highWaterMark;return o||(e.needDrain=!0),e.writing||e.corked||e.errored||!e.constructed?(e.buffered.push({chunk:r,encoding:i,callback:n}),e.allBuffers&&i!=="buffer"&&(e.allBuffers=!1),e.allNoop&&n!==Uc&&(e.allNoop=!1)):(e.writelen=s,e.writecb=n,e.writing=!0,e.sync=!0,t._write(r,i,e.onwrite),e.sync=!1),o&&!e.errored&&!e.destroyed}function Uv(t,e,r,i,n,s,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new hs("write")):r?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function Wv(t,e,r,i){--e.pendingcb,i(r),Wc(e),Ki(t,r)}function FL(t,e){let r=t._writableState,i=r.sync,n=r.writecb;if(typeof n!="function"){Ki(t,new zv);return}r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,e?(e.stack,r.errored||(r.errored=e),t._readableState&&!t._readableState.errored&&(t._readableState.errored=e),i?zr.nextTick(Wv,t,r,e,n):Wv(t,r,e,n)):(r.buffered.length>r.bufferedIndex&&$c(t,r),i?r.afterWriteTickInfo!==null&&r.afterWriteTickInfo.cb===n?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:n,stream:t,state:r},zr.nextTick(UL,r.afterWriteTickInfo)):Qv(t,r,1,n))}function UL({stream:t,state:e,count:r,cb:i}){return e.afterWriteTickInfo=null,Qv(t,e,r,i)}function Qv(t,e,r,i){for(!e.ending&&!t.destroyed&&e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"));r-- >0;)e.pendingcb--,i();e.destroyed&&Wc(e),Vc(t,e)}function Wc(t){if(t.writing)return;for(let n=t.bufferedIndex;n<t.buffered.length;++n){var e;let{chunk:s,callback:o}=t.buffered[n],a=t.objectMode?1:s.length;t.length-=a,o((e=t.errored)!==null&&e!==void 0?e:new hs("write"))}let r=t[Qi].splice(0);for(let n=0;n<r.length;n++){var i;r[n]((i=t.errored)!==null&&i!==void 0?i:new hs("end"))}La(t)}function $c(t,e){if(e.corked||e.bufferProcessing||e.destroyed||!e.constructed)return;let{buffered:r,bufferedIndex:i,objectMode:n}=e,s=r.length-i;if(!s)return;let o=i;if(e.bufferProcessing=!0,s>1&&t._writev){e.pendingcb-=s-1;let a=e.allNoop?Uc:u=>{for(let f=o;f<r.length;++f)r[f].callback(u)},l=e.allNoop&&o===0?r:$v(r,o);l.allBuffers=e.allBuffers,Uv(t,e,!0,e.length,l,"",a),La(e)}else{do{let{chunk:a,encoding:l,callback:u}=r[o];r[o++]=null;let f=n?1:a.length;Uv(t,e,!1,f,a,l,u)}while(o<r.length&&!e.writing);o===r.length?La(e):o>256?(r.splice(0,o),e.bufferedIndex=0):e.bufferedIndex=o}e.bufferProcessing=!1}ee.prototype._write=function(t,e,r){if(this._writev)this._writev([{chunk:t,encoding:e}],r);else throw new kL("_write()")};ee.prototype._writev=null;ee.prototype.end=function(t,e,r){let i=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null);let n;if(t!=null){let s=Kv(this,t,e);s instanceof xL&&(n=s)}return i.corked&&(i.corked=1,this.uncork()),n||(!i.errored&&!i.ending?(i.ending=!0,Vc(this,i,!0),i.ended=!0):i.finished?n=new LL("end"):i.destroyed&&(n=new hs("end"))),typeof r=="function"&&(n||i.finished?zr.nextTick(r,n):i[Qi].push(r)),this};function Na(t){return t.ending&&!t.destroyed&&t.constructed&&t.length===0&&!t.errored&&t.buffered.length===0&&!t.finished&&!t.writing&&!t.errorEmitted&&!t.closeEmitted}function WL(t,e){let r=!1;function i(n){if(r){Ki(t,n??zv());return}if(r=!0,e.pendingcb--,n){let s=e[Qi].splice(0);for(let o=0;o<s.length;o++)s[o](n);Ki(t,n,e.sync)}else Na(e)&&(e.prefinished=!0,t.emit("prefinish"),e.pendingcb++,zr.nextTick(Fc,t,e))}e.sync=!0,e.pendingcb++;try{t._final(i)}catch(n){i(n)}e.sync=!1}function $L(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.finalCalled=!0,WL(t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Vc(t,e,r){Na(e)&&($L(t,e),e.pendingcb===0&&(r?(e.pendingcb++,zr.nextTick((i,n)=>{Na(n)?Fc(i,n):n.pendingcb--},t,e)):Na(e)&&(e.pendingcb++,Fc(t,e))))}function Fc(t,e){e.pendingcb--,e.finished=!0;let r=e[Qi].splice(0);for(let i=0;i<r.length;i++)r[i]();if(t.emit("finish"),e.autoDestroy){let i=t._readableState;(!i||i.autoDestroy&&(i.endEmitted||i.readable===!1))&&t.destroy()}}TL(ee.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(t){this._writableState&&(this._writableState.destroyed=t)}},writable:{__proto__:null,get(){let t=this._writableState;return!!t&&t.writable!==!1&&!t.destroyed&&!t.errored&&!t.ending&&!t.ended},set(t){this._writableState&&(this._writableState.writable=!!t)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){let t=this._writableState;return t?!t.destroyed&&!t.ending&&t.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});var VL=ja.destroy;ee.prototype.destroy=function(t,e){let r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[Qi].length)&&zr.nextTick(Wc,r),VL.call(this,t,e),this};ee.prototype._undestroy=ja.undestroy;ee.prototype._destroy=function(t,e){e(t)};ee.prototype[PL.captureRejectionSymbol]=function(t){this.destroy(t)};var Bc;function Jv(){return Bc===void 0&&(Bc={}),Bc}ee.fromWeb=function(t,e){return Jv().newStreamWritableFromWritableStream(t,e)};ee.toWeb=function(t){return Jv().newWritableStreamFromStreamWritable(t)}});var dS=p((G8,hS)=>{"use strict";var Hc=lr(),HL=E("buffer"),{isReadable:GL,isWritable:zL,isIterable:Xv,isNodeStream:YL,isReadableNodeStream:eS,isWritableNodeStream:tS,isDuplexNodeStream:KL,isReadableStream:rS,isWritableStream:iS}=vt(),nS=Lt(),{AbortError:fS,codes:{ERR_INVALID_ARG_TYPE:QL,ERR_INVALID_RETURN_VALUE:sS}}=Re(),{destroyer:Zi}=Hr(),JL=Et(),cS=fs(),ZL=Da(),{createDeferredPromise:oS}=we(),aS=Mc(),lS=globalThis.Blob||HL.Blob,XL=typeof lS<"u"?function(e){return e instanceof lS}:function(e){return!1},e5=globalThis.AbortController||Wi().AbortController,{FunctionPrototypeCall:uS}=X(),cr=class extends JL{constructor(e){super(e),e?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),e?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}};hS.exports=function t(e,r){if(KL(e))return e;if(eS(e))return Ji({readable:e});if(tS(e))return Ji({writable:e});if(YL(e))return Ji({writable:!1,readable:!1});if(rS(e))return Ji({readable:cS.fromWeb(e)});if(iS(e))return Ji({writable:ZL.fromWeb(e)});if(typeof e=="function"){let{value:n,write:s,final:o,destroy:a}=t5(e);if(Xv(n))return aS(cr,n,{objectMode:!0,write:s,final:o,destroy:a});let l=n?.then;if(typeof l=="function"){let u,f=uS(l,n,c=>{if(c!=null)throw new sS("nully","body",c)},c=>{Zi(u,c)});return u=new cr({objectMode:!0,readable:!1,write:s,final(c){o(async()=>{try{await f,Hc.nextTick(c,null)}catch(h){Hc.nextTick(c,h)}})},destroy:a})}throw new sS("Iterable, AsyncIterable or AsyncFunction",r,n)}if(XL(e))return t(e.arrayBuffer());if(Xv(e))return aS(cr,e,{objectMode:!0,writable:!1});if(rS(e?.readable)&&iS(e?.writable))return cr.fromWeb(e);if(typeof e?.writable=="object"||typeof e?.readable=="object"){let n=e!=null&&e.readable?eS(e?.readable)?e?.readable:t(e.readable):void 0,s=e!=null&&e.writable?tS(e?.writable)?e?.writable:t(e.writable):void 0;return Ji({readable:n,writable:s})}let i=e?.then;if(typeof i=="function"){let n;return uS(i,e,s=>{s!=null&&n.push(s),n.push(null)},s=>{Zi(n,s)}),n=new cr({objectMode:!0,writable:!1,read(){}})}throw new QL(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],e)};function t5(t){let{promise:e,resolve:r}=oS(),i=new e5,n=i.signal;return{value:t(async function*(){for(;;){let o=e;e=null;let{chunk:a,done:l,cb:u}=await o;if(Hc.nextTick(u),l)return;if(n.aborted)throw new fS(void 0,{cause:n.reason});({promise:e,resolve:r}=oS()),yield a}}(),{signal:n}),write(o,a,l){let u=r;r=null,u({chunk:o,done:!1,cb:l})},final(o){let a=r;r=null,a({done:!0,cb:o})},destroy(o,a){i.abort(),a(o)}}}function Ji(t){let e=t.readable&&typeof t.readable.read!="function"?cS.wrap(t.readable):t.readable,r=t.writable,i=!!GL(e),n=!!zL(r),s,o,a,l,u;function f(c){let h=l;l=null,h?h(c):c&&u.destroy(c)}return u=new cr({readableObjectMode:!!(e!=null&&e.readableObjectMode),writableObjectMode:!!(r!=null&&r.writableObjectMode),readable:i,writable:n}),n&&(nS(r,c=>{n=!1,c&&Zi(e,c),f(c)}),u._write=function(c,h,b){r.write(c,h)?b():s=b},u._final=function(c){r.end(),o=c},r.on("drain",function(){if(s){let c=s;s=null,c()}}),r.on("finish",function(){if(o){let c=o;o=null,c()}})),i&&(nS(e,c=>{i=!1,c&&Zi(e,c),f(c)}),e.on("readable",function(){if(a){let c=a;a=null,c()}}),e.on("end",function(){u.push(null)}),u._read=function(){for(;;){let c=e.read();if(c===null){a=u._read;return}if(!u.push(c))return}}),u._destroy=function(c,h){!c&&l!==null&&(c=new fS),a=null,s=null,o=null,l===null?h(c):(l=h,Zi(r,c),Zi(e,c))},u}});var Et=p((z8,bS)=>{"use strict";var{ObjectDefineProperties:r5,ObjectGetOwnPropertyDescriptor:jt,ObjectKeys:i5,ObjectSetPrototypeOf:pS}=X();bS.exports=st;var Yc=fs(),Ve=Da();pS(st.prototype,Yc.prototype);pS(st,Yc);{let t=i5(Ve.prototype);for(let e=0;e<t.length;e++){let r=t[e];st.prototype[r]||(st.prototype[r]=Ve.prototype[r])}}function st(t){if(!(this instanceof st))return new st(t);Yc.call(this,t),Ve.call(this,t),t?(this.allowHalfOpen=t.allowHalfOpen!==!1,t.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),t.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}r5(st.prototype,{writable:{__proto__:null,...jt(Ve.prototype,"writable")},writableHighWaterMark:{__proto__:null,...jt(Ve.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...jt(Ve.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...jt(Ve.prototype,"writableBuffer")},writableLength:{__proto__:null,...jt(Ve.prototype,"writableLength")},writableFinished:{__proto__:null,...jt(Ve.prototype,"writableFinished")},writableCorked:{__proto__:null,...jt(Ve.prototype,"writableCorked")},writableEnded:{__proto__:null,...jt(Ve.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...jt(Ve.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(t){this._readableState&&this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}});var Gc;function gS(){return Gc===void 0&&(Gc={}),Gc}st.fromWeb=function(t,e){return gS().newStreamDuplexFromReadableWritablePair(t,e)};st.toWeb=function(t){return gS().newReadableWritablePairFromDuplex(t)};var zc;st.from=function(t){return zc||(zc=dS()),zc(t,"body")}});var Jc=p((Y8,yS)=>{"use strict";var{ObjectSetPrototypeOf:_S,Symbol:n5}=X();yS.exports=Dt;var{ERR_METHOD_NOT_IMPLEMENTED:s5}=Re().codes,Qc=Et(),{getHighWaterMark:o5}=ls();_S(Dt.prototype,Qc.prototype);_S(Dt,Qc);var ps=n5("kCallback");function Dt(t){if(!(this instanceof Dt))return new Dt(t);let e=t?o5(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),Qc.call(this,t),this._readableState.sync=!1,this[ps]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",a5)}function Kc(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,r)=>{if(e){t?t(e):this.destroy(e);return}r!=null&&this.push(r),this.push(null),t&&t()}):(this.push(null),t&&t())}function a5(){this._final!==Kc&&Kc.call(this)}Dt.prototype._final=Kc;Dt.prototype._transform=function(t,e,r){throw new s5("_transform()")};Dt.prototype._write=function(t,e,r){let i=this._readableState,n=this._writableState,s=i.length;this._transform(t,e,(o,a)=>{if(o){r(o);return}a!=null&&this.push(a),n.ended||s===i.length||i.length<i.highWaterMark?r():this[ps]=r})};Dt.prototype._read=function(){if(this[ps]){let t=this[ps];this[ps]=null,t()}}});var Xc=p((K8,wS)=>{"use strict";var{ObjectSetPrototypeOf:mS}=X();wS.exports=Xi;var Zc=Jc();mS(Xi.prototype,Zc.prototype);mS(Xi,Zc);function Xi(t){if(!(this instanceof Xi))return new Xi(t);Zc.call(this,t)}Xi.prototype._transform=function(t,e,r){r(null,t)}});var Wa=p((Q8,TS)=>{"use strict";var gs=lr(),{ArrayIsArray:l5,Promise:u5,SymbolAsyncIterator:f5,SymbolDispose:c5}=X(),Ua=Lt(),{once:h5}=we(),d5=Hr(),vS=Et(),{aggregateTwoErrors:p5,codes:{ERR_INVALID_ARG_TYPE:lh,ERR_INVALID_RETURN_VALUE:eh,ERR_MISSING_ARGS:g5,ERR_STREAM_DESTROYED:b5,ERR_STREAM_PREMATURE_CLOSE:_5},AbortError:y5}=Re(),{validateFunction:m5,validateAbortSignal:w5}=Vi(),{isIterable:Yr,isReadable:th,isReadableNodeStream:Fa,isNodeStream:SS,isTransformStream:en,isWebStream:v5,isReadableStream:rh,isReadableFinished:S5}=vt(),E5=globalThis.AbortController||Wi().AbortController,ih,nh,sh;function ES(t,e,r){let i=!1;t.on("close",()=>{i=!0});let n=Ua(t,{readable:e,writable:r},s=>{i=!s});return{destroy:s=>{i||(i=!0,d5.destroyer(t,s||new b5("pipe")))},cleanup:n}}function x5(t){return m5(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function oh(t){if(Yr(t))return t;if(Fa(t))return T5(t);throw new lh("val",["Readable","Iterable","AsyncIterable"],t)}async function*T5(t){nh||(nh=fs()),yield*nh.prototype[f5].call(t)}async function Ba(t,e,r,{end:i}){let n,s=null,o=u=>{if(u&&(n=u),s){let f=s;s=null,f()}},a=()=>new u5((u,f)=>{n?f(n):s=()=>{n?f(n):u()}});e.on("drain",o);let l=Ua(e,{readable:!1},o);try{e.writableNeedDrain&&await a();for await(let u of t)e.write(u)||await a();i&&(e.end(),await a()),r()}catch(u){r(n!==u?p5(n,u):u)}finally{l(),e.off("drain",o)}}async function ah(t,e,r,{end:i}){en(e)&&(e=e.writable);let n=e.getWriter();try{for await(let s of t)await n.ready,n.write(s).catch(()=>{});await n.ready,i&&await n.close(),r()}catch(s){try{await n.abort(s),r(s)}catch(o){r(o)}}}function R5(...t){return xS(t,h5(x5(t)))}function xS(t,e,r){if(t.length===1&&l5(t[0])&&(t=t[0]),t.length<2)throw new g5("streams");let i=new E5,n=i.signal,s=r?.signal,o=[];w5(s,"options.signal");function a(){d(new y5)}sh=sh||we().addAbortListener;let l;s&&(l=sh(s,a));let u,f,c=[],h=0;function b(S){d(S,--h===0)}function d(S,w){var T;if(S&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=S),!(!u&&!w)){for(;c.length;)c.shift()(u);(T=l)===null||T===void 0||T[c5](),i.abort(),w&&(u||o.forEach(M=>M()),gs.nextTick(e,u,f))}}let g;for(let S=0;S<t.length;S++){let w=t[S],T=S<t.length-1,M=S>0,O=T||r?.end!==!1,N=S===t.length-1;if(SS(w)){let R=function($){$&&$.name!=="AbortError"&&$.code!=="ERR_STREAM_PREMATURE_CLOSE"&&b($)};var m=R;if(O){let{destroy:$,cleanup:te}=ES(w,T,M);c.push($),th(w)&&N&&o.push(te)}w.on("error",R),th(w)&&N&&o.push(()=>{w.removeListener("error",R)})}if(S===0)if(typeof w=="function"){if(g=w({signal:n}),!Yr(g))throw new eh("Iterable, AsyncIterable or Stream","source",g)}else Yr(w)||Fa(w)||en(w)?g=w:g=vS.from(w);else if(typeof w=="function"){if(en(g)){var y;g=oh((y=g)===null||y===void 0?void 0:y.readable)}else g=oh(g);if(g=w(g,{signal:n}),T){if(!Yr(g,!0))throw new eh("AsyncIterable",`transform[${S-1}]`,g)}else{var _;ih||(ih=Xc());let R=new ih({objectMode:!0}),$=(_=g)===null||_===void 0?void 0:_.then;if(typeof $=="function")h++,$.call(g,re=>{f=re,re!=null&&R.write(re),O&&R.end(),gs.nextTick(b)},re=>{R.destroy(re),gs.nextTick(b,re)});else if(Yr(g,!0))h++,Ba(g,R,b,{end:O});else if(rh(g)||en(g)){let re=g.readable||g;h++,Ba(re,R,b,{end:O})}else throw new eh("AsyncIterable or Promise","destination",g);g=R;let{destroy:te,cleanup:oe}=ES(g,!1,!0);c.push(te),N&&o.push(oe)}}else if(SS(w)){if(Fa(g)){h+=2;let R=O5(g,w,b,{end:O});th(w)&&N&&o.push(R)}else if(en(g)||rh(g)){let R=g.readable||g;h++,Ba(R,w,b,{end:O})}else if(Yr(g))h++,Ba(g,w,b,{end:O});else throw new lh("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);g=w}else if(v5(w)){if(Fa(g))h++,ah(oh(g),w,b,{end:O});else if(rh(g)||Yr(g))h++,ah(g,w,b,{end:O});else if(en(g))h++,ah(g.readable,w,b,{end:O});else throw new lh("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);g=w}else g=vS.from(w)}return(n!=null&&n.aborted||s!=null&&s.aborted)&&gs.nextTick(a),g}function O5(t,e,r,{end:i}){let n=!1;if(e.on("close",()=>{n||r(new _5)}),t.pipe(e,{end:!1}),i){let o=function(){n=!0,e.end()};var s=o;S5(t)?gs.nextTick(o):t.once("end",o)}else r();return Ua(t,{readable:!0,writable:!1},o=>{let a=t._readableState;o&&o.code==="ERR_STREAM_PREMATURE_CLOSE"&&a&&a.ended&&!a.errored&&!a.errorEmitted?t.once("end",r).once("error",r):r(o)}),Ua(e,{readable:!1,writable:!0},r)}TS.exports={pipelineImpl:xS,pipeline:R5}});var fh=p((J8,IS)=>{"use strict";var{pipeline:A5}=Wa(),$a=Et(),{destroyer:P5}=Hr(),{isNodeStream:Va,isReadable:RS,isWritable:OS,isWebStream:uh,isTransformStream:Kr,isWritableStream:AS,isReadableStream:PS}=vt(),{AbortError:M5,codes:{ERR_INVALID_ARG_VALUE:MS,ERR_MISSING_ARGS:I5}}=Re(),q5=Lt();IS.exports=function(...e){if(e.length===0)throw new I5("streams");if(e.length===1)return $a.from(e[0]);let r=[...e];if(typeof e[0]=="function"&&(e[0]=$a.from(e[0])),typeof e[e.length-1]=="function"){let b=e.length-1;e[b]=$a.from(e[b])}for(let b=0;b<e.length;++b)if(!(!Va(e[b])&&!uh(e[b]))){if(b<e.length-1&&!(RS(e[b])||PS(e[b])||Kr(e[b])))throw new MS(`streams[${b}]`,r[b],"must be readable");if(b>0&&!(OS(e[b])||AS(e[b])||Kr(e[b])))throw new MS(`streams[${b}]`,r[b],"must be writable")}let i,n,s,o,a;function l(b){let d=o;o=null,d?d(b):b?a.destroy(b):!h&&!c&&a.destroy()}let u=e[0],f=A5(e,l),c=!!(OS(u)||AS(u)||Kr(u)),h=!!(RS(f)||PS(f)||Kr(f));if(a=new $a({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(f!=null&&f.readableObjectMode),writable:c,readable:h}),c){if(Va(u))a._write=function(d,g,y){u.write(d,g)?y():i=y},a._final=function(d){u.end(),n=d},u.on("drain",function(){if(i){let d=i;i=null,d()}});else if(uh(u)){let g=(Kr(u)?u.writable:u).getWriter();a._write=async function(y,_,m){try{await g.ready,g.write(y).catch(()=>{}),m()}catch(S){m(S)}},a._final=async function(y){try{await g.ready,g.close().catch(()=>{}),n=y}catch(_){y(_)}}}let b=Kr(f)?f.readable:f;q5(b,()=>{if(n){let d=n;n=null,d()}})}if(h){if(Va(f))f.on("readable",function(){if(s){let b=s;s=null,b()}}),f.on("end",function(){a.push(null)}),a._read=function(){for(;;){let b=f.read();if(b===null){s=a._read;return}if(!a.push(b))return}};else if(uh(f)){let d=(Kr(f)?f.readable:f).getReader();a._read=async function(){for(;;)try{let{value:g,done:y}=await d.read();if(!a.push(g))return;if(y){a.push(null);return}}catch{return}}}}return a._destroy=function(b,d){!b&&o!==null&&(b=new M5),s=null,i=null,n=null,o===null?d(b):(o=d,Va(f)&&P5(f,b))},a}});var US=p((Z8,dh)=>{"use strict";var C5=globalThis.AbortController||Wi().AbortController,{codes:{ERR_INVALID_ARG_VALUE:k5,ERR_INVALID_ARG_TYPE:bs,ERR_MISSING_ARGS:N5,ERR_OUT_OF_RANGE:L5},AbortError:xt}=Re(),{validateAbortSignal:Qr,validateInteger:qS,validateObject:Jr}=Vi(),j5=X().Symbol("kWeak"),D5=X().Symbol("kResistStopPropagation"),{finished:B5}=Lt(),F5=fh(),{addAbortSignalNoValidate:U5}=as(),{isWritable:W5,isNodeStream:$5}=vt(),{deprecate:V5}=we(),{ArrayPrototypePush:H5,Boolean:G5,MathFloor:CS,Number:z5,NumberIsNaN:Y5,Promise:kS,PromiseReject:NS,PromiseResolve:K5,PromisePrototypeThen:LS,Symbol:DS}=X(),Ha=DS("kEmpty"),jS=DS("kEof");function Q5(t,e){if(e!=null&&Jr(e,"options"),e?.signal!=null&&Qr(e.signal,"options.signal"),$5(t)&&!W5(t))throw new k5("stream",t,"must be writable");let r=F5(this,t);return e!=null&&e.signal&&U5(e.signal,r),r}function Ga(t,e){if(typeof t!="function")throw new bs("fn",["Function","AsyncFunction"],t);e!=null&&Jr(e,"options"),e?.signal!=null&&Qr(e.signal,"options.signal");let r=1;e?.concurrency!=null&&(r=CS(e.concurrency));let i=r-1;return e?.highWaterMark!=null&&(i=CS(e.highWaterMark)),qS(r,"options.concurrency",1),qS(i,"options.highWaterMark",0),i+=r,async function*(){let s=we().AbortSignalAny([e?.signal].filter(G5)),o=this,a=[],l={signal:s},u,f,c=!1,h=0;function b(){c=!0,d()}function d(){h-=1,g()}function g(){f&&!c&&h<r&&a.length<i&&(f(),f=null)}async function y(){try{for await(let _ of o){if(c)return;if(s.aborted)throw new xt;try{if(_=t(_,l),_===Ha)continue;_=K5(_)}catch(m){_=NS(m)}h+=1,LS(_,d,b),a.push(_),u&&(u(),u=null),!c&&(a.length>=i||h>=r)&&await new kS(m=>{f=m})}a.push(jS)}catch(_){let m=NS(_);LS(m,d,b),a.push(m)}finally{c=!0,u&&(u(),u=null)}}y();try{for(;;){for(;a.length>0;){let _=await a[0];if(_===jS)return;if(s.aborted)throw new xt;_!==Ha&&(yield _),a.shift(),g()}await new kS(_=>{u=_})}}finally{c=!0,f&&(f(),f=null)}}.call(this)}function J5(t=void 0){return t!=null&&Jr(t,"options"),t?.signal!=null&&Qr(t.signal,"options.signal"),async function*(){let r=0;for await(let n of this){var i;if(t!=null&&(i=t.signal)!==null&&i!==void 0&&i.aborted)throw new xt({cause:t.signal.reason});yield[r++,n]}}.call(this)}async function BS(t,e=void 0){for await(let r of hh.call(this,t,e))return!0;return!1}async function Z5(t,e=void 0){if(typeof t!="function")throw new bs("fn",["Function","AsyncFunction"],t);return!await BS.call(this,async(...r)=>!await t(...r),e)}async function X5(t,e){for await(let r of hh.call(this,t,e))return r}async function ej(t,e){if(typeof t!="function")throw new bs("fn",["Function","AsyncFunction"],t);async function r(i,n){return await t(i,n),Ha}for await(let i of Ga.call(this,r,e));}function hh(t,e){if(typeof t!="function")throw new bs("fn",["Function","AsyncFunction"],t);async function r(i,n){return await t(i,n)?i:Ha}return Ga.call(this,r,e)}var ch=class extends N5{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function tj(t,e,r){var i;if(typeof t!="function")throw new bs("reducer",["Function","AsyncFunction"],t);r!=null&&Jr(r,"options"),r?.signal!=null&&Qr(r.signal,"options.signal");let n=arguments.length>1;if(r!=null&&(i=r.signal)!==null&&i!==void 0&&i.aborted){let u=new xt(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await B5(this.destroy(u)),u}let s=new C5,o=s.signal;if(r!=null&&r.signal){let u={once:!0,[j5]:this,[D5]:!0};r.signal.addEventListener("abort",()=>s.abort(),u)}let a=!1;try{for await(let u of this){var l;if(a=!0,r!=null&&(l=r.signal)!==null&&l!==void 0&&l.aborted)throw new xt;n?e=await t(e,u,{signal:o}):(e=u,n=!0)}if(!a&&!n)throw new ch}finally{s.abort()}return e}async function rj(t){t!=null&&Jr(t,"options"),t?.signal!=null&&Qr(t.signal,"options.signal");let e=[];for await(let i of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new xt(void 0,{cause:t.signal.reason});H5(e,i)}return e}function ij(t,e){let r=Ga.call(this,t,e);return async function*(){for await(let n of r)yield*n}.call(this)}function FS(t){if(t=z5(t),Y5(t))return 0;if(t<0)throw new L5("number",">= 0",t);return t}function nj(t,e=void 0){return e!=null&&Jr(e,"options"),e?.signal!=null&&Qr(e.signal,"options.signal"),t=FS(t),async function*(){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new xt;for await(let s of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new xt;t--<=0&&(yield s)}}.call(this)}function sj(t,e=void 0){return e!=null&&Jr(e,"options"),e?.signal!=null&&Qr(e.signal,"options.signal"),t=FS(t),async function*(){var i;if(e!=null&&(i=e.signal)!==null&&i!==void 0&&i.aborted)throw new xt;for await(let s of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new xt;if(t-- >0&&(yield s),t<=0)return}}.call(this)}dh.exports.streamReturningOperators={asIndexedPairs:V5(J5,"readable.asIndexedPairs will be removed in a future version."),drop:nj,filter:hh,flatMap:ij,map:Ga,take:sj,compose:Q5};dh.exports.promiseReturningOperators={every:Z5,forEach:ej,reduce:tj,toArray:rj,some:BS,find:X5}});var ph=p((X8,WS)=>{"use strict";var{ArrayPrototypePop:oj,Promise:aj}=X(),{isIterable:lj,isNodeStream:uj,isWebStream:fj}=vt(),{pipelineImpl:cj}=Wa(),{finished:hj}=Lt();gh();function dj(...t){return new aj((e,r)=>{let i,n,s=t[t.length-1];if(s&&typeof s=="object"&&!uj(s)&&!lj(s)&&!fj(s)){let o=oj(t);i=o.signal,n=o.end}cj(t,(o,a)=>{o?r(o):e(a)},{signal:i,end:n})})}WS.exports={finished:hj,pipeline:dj}});var gh=p((e$,JS)=>{"use strict";var{Buffer:pj}=E("buffer"),{ObjectDefineProperty:Bt,ObjectKeys:HS,ReflectApply:GS}=X(),{promisify:{custom:zS}}=we(),{streamReturningOperators:$S,promiseReturningOperators:VS}=US(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:YS}}=Re(),gj=fh(),{setDefaultHighWaterMark:bj,getDefaultHighWaterMark:_j}=ls(),{pipeline:KS}=Wa(),{destroyer:yj}=Hr(),QS=Lt(),bh=ph(),_s=vt(),J=JS.exports=Ra().Stream;J.isDestroyed=_s.isDestroyed;J.isDisturbed=_s.isDisturbed;J.isErrored=_s.isErrored;J.isReadable=_s.isReadable;J.isWritable=_s.isWritable;J.Readable=fs();for(let t of HS($S)){let r=function(...i){if(new.target)throw YS();return J.Readable.from(GS(e,this,i))};_h=r;let e=$S[t];Bt(r,"name",{__proto__:null,value:e.name}),Bt(r,"length",{__proto__:null,value:e.length}),Bt(J.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var _h;for(let t of HS(VS)){let r=function(...n){if(new.target)throw YS();return GS(e,this,n)};_h=r;let e=VS[t];Bt(r,"name",{__proto__:null,value:e.name}),Bt(r,"length",{__proto__:null,value:e.length}),Bt(J.Readable.prototype,t,{__proto__:null,value:r,enumerable:!1,configurable:!0,writable:!0})}var _h;J.Writable=Da();J.Duplex=Et();J.Transform=Jc();J.PassThrough=Xc();J.pipeline=KS;var{addAbortSignal:mj}=as();J.addAbortSignal=mj;J.finished=QS;J.destroy=yj;J.compose=gj;J.setDefaultHighWaterMark=bj;J.getDefaultHighWaterMark=_j;Bt(J,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return bh}});Bt(KS,zS,{__proto__:null,enumerable:!0,get(){return bh.pipeline}});Bt(QS,zS,{__proto__:null,enumerable:!0,get(){return bh.finished}});J.Stream=J;J._isUint8Array=function(e){return e instanceof Uint8Array};J._uint8ArrayToBuffer=function(e){return pj.from(e.buffer,e.byteOffset,e.byteLength)}});var hr=p((t$,F)=>{"use strict";var ce=E("stream");if(ce&&process.env.READABLE_STREAM==="disable"){let t=ce.promises;F.exports._uint8ArrayToBuffer=ce._uint8ArrayToBuffer,F.exports._isUint8Array=ce._isUint8Array,F.exports.isDisturbed=ce.isDisturbed,F.exports.isErrored=ce.isErrored,F.exports.isReadable=ce.isReadable,F.exports.Readable=ce.Readable,F.exports.Writable=ce.Writable,F.exports.Duplex=ce.Duplex,F.exports.Transform=ce.Transform,F.exports.PassThrough=ce.PassThrough,F.exports.addAbortSignal=ce.addAbortSignal,F.exports.finished=ce.finished,F.exports.destroy=ce.destroy,F.exports.pipeline=ce.pipeline,F.exports.compose=ce.compose,Object.defineProperty(ce,"promises",{configurable:!0,enumerable:!0,get(){return t}}),F.exports.Stream=ce.Stream}else{let t=gh(),e=ph(),r=t.Readable.destroy;F.exports=t.Readable,F.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,F.exports._isUint8Array=t._isUint8Array,F.exports.isDisturbed=t.isDisturbed,F.exports.isErrored=t.isErrored,F.exports.isReadable=t.isReadable,F.exports.Readable=t.Readable,F.exports.Writable=t.Writable,F.exports.Duplex=t.Duplex,F.exports.Transform=t.Transform,F.exports.PassThrough=t.PassThrough,F.exports.addAbortSignal=t.addAbortSignal,F.exports.finished=t.finished,F.exports.destroy=t.destroy,F.exports.destroy=r,F.exports.pipeline=t.pipeline,F.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return e}}),F.exports.Stream=t.Stream}F.exports.default=F.exports});var eE=p((r$,XS)=>{"use strict";var{Buffer:ot}=E("buffer"),ZS=Symbol.for("BufferList");function K(t){if(!(this instanceof K))return new K(t);K._init.call(this,t)}K._init=function(e){Object.defineProperty(this,ZS,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)};K.prototype._new=function(e){return new K(e)};K.prototype._offset=function(e){if(e===0)return[0,0];let r=0;for(let i=0;i<this._bufs.length;i++){let n=r+this._bufs[i].length;if(e<n||i===this._bufs.length-1)return[i,e-r];r=n}};K.prototype._reverseOffset=function(t){let e=t[0],r=t[1];for(let i=0;i<e;i++)r+=this._bufs[i].length;return r};K.prototype.get=function(e){if(e>this.length||e<0)return;let r=this._offset(e);return this._bufs[r[0]][r[1]]};K.prototype.slice=function(e,r){return typeof e=="number"&&e<0&&(e+=this.length),typeof r=="number"&&r<0&&(r+=this.length),this.copy(null,0,e,r)};K.prototype.copy=function(e,r,i,n){if((typeof i!="number"||i<0)&&(i=0),(typeof n!="number"||n>this.length)&&(n=this.length),i>=this.length||n<=0)return e||ot.alloc(0);let s=!!e,o=this._offset(i),a=n-i,l=a,u=s&&r||0,f=o[1];if(i===0&&n===this.length){if(!s)return this._bufs.length===1?this._bufs[0]:ot.concat(this._bufs,this.length);for(let c=0;c<this._bufs.length;c++)this._bufs[c].copy(e,u),u+=this._bufs[c].length;return e}if(l<=this._bufs[o[0]].length-f)return s?this._bufs[o[0]].copy(e,r,f,f+l):this._bufs[o[0]].slice(f,f+l);s||(e=ot.allocUnsafe(a));for(let c=o[0];c<this._bufs.length;c++){let h=this._bufs[c].length-f;if(l>h)this._bufs[c].copy(e,u,f),u+=h;else{this._bufs[c].copy(e,u,f,f+l),u+=h;break}l-=h,f&&(f=0)}return e.length>u?e.slice(0,u):e};K.prototype.shallowSlice=function(e,r){if(e=e||0,r=typeof r!="number"?this.length:r,e<0&&(e+=this.length),r<0&&(r+=this.length),e===r)return this._new();let i=this._offset(e),n=this._offset(r),s=this._bufs.slice(i[0],n[0]+1);return n[1]===0?s.pop():s[s.length-1]=s[s.length-1].slice(0,n[1]),i[1]!==0&&(s[0]=s[0].slice(i[1])),this._new(s)};K.prototype.toString=function(e,r,i){return this.slice(r,i).toString(e)};K.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this};K.prototype.duplicate=function(){let e=this._new();for(let r=0;r<this._bufs.length;r++)e.append(this._bufs[r]);return e};K.prototype.append=function(e){if(e==null)return this;if(e.buffer)this._appendBuffer(ot.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let r=0;r<e.length;r++)this.append(e[r]);else if(this._isBufferList(e))for(let r=0;r<e._bufs.length;r++)this.append(e._bufs[r]);else typeof e=="number"&&(e=e.toString()),this._appendBuffer(ot.from(e));return this};K.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length};K.prototype.indexOf=function(t,e,r){if(r===void 0&&typeof e=="string"&&(r=e,e=void 0),typeof t=="function"||Array.isArray(t))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof t=="number"?t=ot.from([t]):typeof t=="string"?t=ot.from(t,r):this._isBufferList(t)?t=t.slice():Array.isArray(t.buffer)?t=ot.from(t.buffer,t.byteOffset,t.byteLength):ot.isBuffer(t)||(t=ot.from(t)),e=Number(e||0),isNaN(e)&&(e=0),e<0&&(e=this.length+e),e<0&&(e=0),t.length===0)return e>this.length?this.length:e;let i=this._offset(e),n=i[0],s=i[1];for(;n<this._bufs.length;n++){let o=this._bufs[n];for(;s<o.length;)if(o.length-s>=t.length){let l=o.indexOf(t,s);if(l!==-1)return this._reverseOffset([n,l]);s=o.length-t.length+1}else{let l=this._reverseOffset([n,s]);if(this._match(l,t))return l;s++}s=0}return-1};K.prototype._match=function(t,e){if(this.length-t<e.length)return!1;for(let r=0;r<e.length;r++)if(this.get(t+r)!==e[r])return!1;return!0};(function(){let t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readBigInt64BE:8,readBigInt64LE:8,readBigUInt64BE:8,readBigUInt64LE:8,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(let e in t)(function(r){t[r]===null?K.prototype[r]=function(i,n){return this.slice(i,i+n)[r](0,n)}:K.prototype[r]=function(i=0){return this.slice(i,i+t[r])[r](0)}})(e)})();K.prototype._isBufferList=function(e){return e instanceof K||K.isBufferList(e)};K.isBufferList=function(e){return e!=null&&e[ZS]};XS.exports=K});var tE=p((i$,za)=>{"use strict";var yh=hr().Duplex,wj=ht(),ys=eE();function Se(t){if(!(this instanceof Se))return new Se(t);if(typeof t=="function"){this._callback=t;let e=function(i){this._callback&&(this._callback(i),this._callback=null)}.bind(this);this.on("pipe",function(i){i.on("error",e)}),this.on("unpipe",function(i){i.removeListener("error",e)}),t=null}ys._init.call(this,t),yh.call(this)}wj(Se,yh);Object.assign(Se.prototype,ys.prototype);Se.prototype._new=function(e){return new Se(e)};Se.prototype._write=function(e,r,i){this._appendBuffer(e),typeof i=="function"&&i()};Se.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)};Se.prototype.end=function(e){yh.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)};Se.prototype._destroy=function(e,r){this._bufs.length=0,this.length=0,r(e)};Se.prototype._isBufferList=function(e){return e instanceof Se||e instanceof ys||Se.isBufferList(e)};Se.isBufferList=ys.isBufferList;za.exports=Se;za.exports.BufferListStream=Se;za.exports.BufferList=ys});var iE=p((n$,rE)=>{"use strict";var mh=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}};rE.exports=mh});var wh=p((s$,nE)=>{"use strict";var x=nE.exports,{Buffer:qe}=E("buffer");x.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"};x.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0};x.requiredHeaderFlagsErrors={};for(let t in x.requiredHeaderFlags){let e=x.requiredHeaderFlags[t];x.requiredHeaderFlagsErrors[t]="Invalid header flag bits, must be 0x"+e.toString(16)+" for "+x.types[t]+" packet"}x.codes={};for(let t in x.types){let e=x.types[t];x.codes[e]=t}x.CMD_SHIFT=4;x.CMD_MASK=240;x.DUP_MASK=8;x.QOS_MASK=3;x.QOS_SHIFT=1;x.RETAIN_MASK=1;x.VARBYTEINT_MASK=127;x.VARBYTEINT_FIN_MASK=128;x.VARBYTEINT_MAX=268435455;x.SESSIONPRESENT_MASK=1;x.SESSIONPRESENT_HEADER=qe.from([x.SESSIONPRESENT_MASK]);x.CONNACK_HEADER=qe.from([x.codes.connack<<x.CMD_SHIFT]);x.USERNAME_MASK=128;x.PASSWORD_MASK=64;x.WILL_RETAIN_MASK=32;x.WILL_QOS_MASK=24;x.WILL_QOS_SHIFT=3;x.WILL_FLAG_MASK=4;x.CLEAN_SESSION_MASK=2;x.CONNECT_HEADER=qe.from([x.codes.connect<<x.CMD_SHIFT]);x.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11};x.propertiesCodes={};for(let t in x.properties){let e=x.properties[t];x.propertiesCodes[e]=t}x.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function dr(t){return[0,1,2].map(e=>[0,1].map(r=>[0,1].map(i=>{let n=qe.alloc(1);return n.writeUInt8(x.codes[t]<<x.CMD_SHIFT|(r?x.DUP_MASK:0)|e<<x.QOS_SHIFT|i,0,!0),n})))}x.PUBLISH_HEADER=dr("publish");x.SUBSCRIBE_HEADER=dr("subscribe");x.SUBSCRIBE_OPTIONS_QOS_MASK=3;x.SUBSCRIBE_OPTIONS_NL_MASK=1;x.SUBSCRIBE_OPTIONS_NL_SHIFT=2;x.SUBSCRIBE_OPTIONS_RAP_MASK=1;x.SUBSCRIBE_OPTIONS_RAP_SHIFT=3;x.SUBSCRIBE_OPTIONS_RH_MASK=3;x.SUBSCRIBE_OPTIONS_RH_SHIFT=4;x.SUBSCRIBE_OPTIONS_RH=[0,16,32];x.SUBSCRIBE_OPTIONS_NL=4;x.SUBSCRIBE_OPTIONS_RAP=8;x.SUBSCRIBE_OPTIONS_QOS=[0,1,2];x.UNSUBSCRIBE_HEADER=dr("unsubscribe");x.ACKS={unsuback:dr("unsuback"),puback:dr("puback"),pubcomp:dr("pubcomp"),pubrel:dr("pubrel"),pubrec:dr("pubrec")};x.SUBACK_HEADER=qe.from([x.codes.suback<<x.CMD_SHIFT]);x.VERSION3=qe.from([3]);x.VERSION4=qe.from([4]);x.VERSION5=qe.from([5]);x.VERSION131=qe.from([131]);x.VERSION132=qe.from([132]);x.QOS=[0,1,2].map(t=>qe.from([t]));x.EMPTY={pingreq:qe.from([x.codes.pingreq<<4,0]),pingresp:qe.from([x.codes.pingresp<<4,0]),disconnect:qe.from([x.codes.disconnect<<4,0])};x.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"};x.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"};x.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};x.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"};x.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};x.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}});var vh=p((o$,sE)=>{"use strict";function vj(t){r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=n,r.enabled=a,r.humanize=mu(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let c=0;for(let h=0;h<f.length;h++)c=(c<<5)-c+f.charCodeAt(h),c|=0;return r.colors[Math.abs(c)%r.colors.length]}r.selectColor=e;function r(f){let c,h=null,b,d;function g(...y){if(!g.enabled)return;let _=g,m=Number(new Date),S=m-(c||m);_.diff=S,_.prev=c,_.curr=m,c=m,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let w=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(M,O)=>{if(M==="%%")return"%";w++;let N=r.formatters[O];if(typeof N=="function"){let R=y[w];M=N.call(_,R),y.splice(w,1),w--}return M}),r.formatArgs.call(_,y),(_.log||r.log).apply(_,y)}return g.namespace=f,g.useColors=r.useColors(),g.color=r.selectColor(f),g.extend=i,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(b!==r.namespaces&&(b=r.namespaces,d=r.enabled(f)),d),set:y=>{h=y}}),typeof r.init=="function"&&r.init(g),g}function i(f,c){let h=r(this.namespace+(typeof c>"u"?":":c)+f);return h.log=this.log,h}function n(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let c=(typeof f=="string"?f:"").trim().replace(" ",",").split(",").filter(Boolean);for(let h of c)h[0]==="-"?r.skips.push(h.slice(1)):r.names.push(h)}function s(f,c){let h=0,b=0,d=-1,g=0;for(;h<f.length;)if(b<c.length&&(c[b]===f[h]||c[b]==="*"))c[b]==="*"?(d=b,g=h,b++):(h++,b++);else if(d!==-1)b=d+1,g++,h=g;else return!1;for(;b<c.length&&c[b]==="*";)b++;return b===c.length}function o(){let f=[...r.names,...r.skips.map(c=>"-"+c)].join(",");return r.enable(""),f}function a(f){for(let c of r.skips)if(s(f,c))return!1;for(let c of r.names)if(s(f,c))return!0;return!1}function l(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}sE.exports=vj});var oE=p((je,Ya)=>{"use strict";je.formatArgs=Ej;je.save=xj;je.load=Tj;je.useColors=Sj;je.storage=Rj();je.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();je.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Sj(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ej(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Ya.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),t.splice(i,0,e)}je.log=console.debug||console.log||(()=>{});function xj(t){try{t?je.storage.setItem("debug",t):je.storage.removeItem("debug")}catch{}}function Tj(){let t;try{t=je.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function Rj(){try{return localStorage}catch{}}Ya.exports=vh()(je);var{formatters:Oj}=Ya.exports;Oj.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var lE=p((a$,aE)=>{"use strict";aE.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",i=e.indexOf(r+t),n=e.indexOf("--");return i!==-1&&(n===-1||i<n)}});var cE=p((l$,fE)=>{"use strict";var Aj=E("os"),uE=E("tty"),He=lE(),{env:pe}=process,pr;He("no-color")||He("no-colors")||He("color=false")||He("color=never")?pr=0:(He("color")||He("colors")||He("color=true")||He("color=always"))&&(pr=1);"FORCE_COLOR"in pe&&(pe.FORCE_COLOR==="true"?pr=1:pe.FORCE_COLOR==="false"?pr=0:pr=pe.FORCE_COLOR.length===0?1:Math.min(parseInt(pe.FORCE_COLOR,10),3));function Sh(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Eh(t,e){if(pr===0)return 0;if(He("color=16m")||He("color=full")||He("color=truecolor"))return 3;if(He("color=256"))return 2;if(t&&!e&&pr===void 0)return 0;let r=pr||0;if(pe.TERM==="dumb")return r;if(process.platform==="win32"){let i=Aj.release().split(".");return Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in pe)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(i=>i in pe)||pe.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in pe)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(pe.TEAMCITY_VERSION)?1:0;if(pe.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in pe){let i=parseInt((pe.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(pe.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(pe.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(pe.TERM)||"COLORTERM"in pe?1:r}function Pj(t){let e=Eh(t,t&&t.isTTY);return Sh(e)}fE.exports={supportsColor:Pj,stdout:Sh(Eh(!0,uE.isatty(1))),stderr:Sh(Eh(!0,uE.isatty(2)))}});var dE=p((ge,Qa)=>{"use strict";var Mj=E("tty"),Ka=E("util");ge.init=jj;ge.log=kj;ge.formatArgs=qj;ge.save=Nj;ge.load=Lj;ge.useColors=Ij;ge.destroy=Ka.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ge.colors=[6,2,3,4,5,1];try{let t=cE();t&&(t.stderr||t).level>=2&&(ge.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ge.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(n,s)=>s.toUpperCase()),i=process.env[e];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),t[r]=i,t},{});function Ij(){return"colors"in ge.inspectOpts?!!ge.inspectOpts.colors:Mj.isatty(process.stderr.fd)}function qj(t){let{namespace:e,useColors:r}=this;if(r){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),s=`  ${n};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(n+"m+"+Qa.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Cj()+e+" "+t[0]}function Cj(){return ge.inspectOpts.hideDate?"":new Date().toISOString()+" "}function kj(...t){return process.stderr.write(Ka.formatWithOptions(ge.inspectOpts,...t)+`
`)}function Nj(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Lj(){return process.env.DEBUG}function jj(t){t.inspectOpts={};let e=Object.keys(ge.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=ge.inspectOpts[e[r]]}Qa.exports=vh()(ge);var{formatters:hE}=Qa.exports;hE.o=function(t){return this.inspectOpts.colors=this.useColors,Ka.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};hE.O=function(t){return this.inspectOpts.colors=this.useColors,Ka.inspect(t,this.inspectOpts)}});var Tt=p((u$,xh)=>{"use strict";typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?xh.exports=oE():xh.exports=dE()});var bE=p((f$,gE)=>{"use strict";var Dj=tE(),{EventEmitter:Bj}=E("events"),pE=iE(),W=wh(),C=Tt()("mqtt-packet:parser"),Th=class t extends Bj{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof t?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new t().parser(e)}_resetState(){C("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new pE,this.error=null,this._list=Dj(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),C("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,C("parse: state complete. _stateCounter is now: %d",this._stateCounter),C("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return C("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){let e=this._list.readUInt8(0),r=e>>W.CMD_SHIFT;this.packet.cmd=W.types[r];let i=e&15,n=W.requiredHeaderFlags[r];return n!=null&&i!==n?this._emitError(new Error(W.requiredHeaderFlagsErrors[r])):(this.packet.retain=(e&W.RETAIN_MASK)!==0,this.packet.qos=e>>W.QOS_SHIFT&W.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(e&W.DUP_MASK)!==0,C("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){let e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),C("_parseLength %d",e.value),!!e}_parsePayload(){C("_parsePayload: payload %O",this._list);let e=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return C("_parsePayload complete result: %s",e),e}_parseConnect(){C("_parseConnect");let e,r,i,n,s={},o=this.packet,a=this._parseString();if(a===null)return this._emitError(new Error("Cannot parse protocolId"));if(a!=="MQTT"&&a!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(o.protocolId=a,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(o.protocolVersion=this._list.readUInt8(this._pos),o.protocolVersion>=128&&(o.bridgeMode=!0,o.protocolVersion=o.protocolVersion-128),o.protocolVersion!==3&&o.protocolVersion!==4&&o.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));s.username=this._list.readUInt8(this._pos)&W.USERNAME_MASK,s.password=this._list.readUInt8(this._pos)&W.PASSWORD_MASK,s.will=this._list.readUInt8(this._pos)&W.WILL_FLAG_MASK;let l=!!(this._list.readUInt8(this._pos)&W.WILL_RETAIN_MASK),u=(this._list.readUInt8(this._pos)&W.WILL_QOS_MASK)>>W.WILL_QOS_SHIFT;if(s.will)o.will={},o.will.retain=l,o.will.qos=u;else{if(l)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(u)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(o.clean=(this._list.readUInt8(this._pos)&W.CLEAN_SESSION_MASK)!==0,this._pos++,o.keepalive=this._parseNum(),o.keepalive===-1)return this._emitError(new Error("Packet too short"));if(o.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(o.properties=c)}let f=this._parseString();if(f===null)return this._emitError(new Error("Packet too short"));if(o.clientId=f,C("_parseConnect: packet.clientId: %s",o.clientId),s.will){if(o.protocolVersion===5){let c=this._parseProperties();Object.getOwnPropertyNames(c).length&&(o.will.properties=c)}if(e=this._parseString(),e===null)return this._emitError(new Error("Cannot parse will topic"));if(o.will.topic=e,C("_parseConnect: packet.will.topic: %s",o.will.topic),r=this._parseBuffer(),r===null)return this._emitError(new Error("Cannot parse will payload"));o.will.payload=r,C("_parseConnect: packet.will.paylaod: %s",o.will.payload)}if(s.username){if(n=this._parseString(),n===null)return this._emitError(new Error("Cannot parse username"));o.username=n,C("_parseConnect: packet.username: %s",o.username)}if(s.password){if(i=this._parseBuffer(),i===null)return this._emitError(new Error("Cannot parse password"));o.password=i}return this.settings=o,C("_parseConnect: complete"),o}_parseConnack(){C("_parseConnack");let e=this.packet;if(this._list.length<1)return null;let r=this._list.readUInt8(this._pos++);if(r>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(e.sessionPresent=!!(r&W.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(e.returnCode===-1||e.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){let i=this._parseProperties();Object.getOwnPropertyNames(i).length&&(e.properties=i)}C("_parseConnack: complete")}_parsePublish(){C("_parsePublish");let e=this.packet;if(e.topic=this._parseString(),e.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){let r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}e.payload=this._list.slice(this._pos,e.length),C("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){C("_parseSubscribe");let e=this.packet,r,i,n,s,o,a,l;if(e.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let u=this._parseProperties();Object.getOwnPropertyNames(u).length&&(e.properties=u)}if(e.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<e.length;){if(r=this._parseString(),r===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(i=this._parseByte(),this.settings.protocolVersion===5){if(i&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(i&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(n=i&W.SUBSCRIBE_OPTIONS_QOS_MASK,n>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(a=(i>>W.SUBSCRIBE_OPTIONS_NL_SHIFT&W.SUBSCRIBE_OPTIONS_NL_MASK)!==0,o=(i>>W.SUBSCRIBE_OPTIONS_RAP_SHIFT&W.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,s=i>>W.SUBSCRIBE_OPTIONS_RH_SHIFT&W.SUBSCRIBE_OPTIONS_RH_MASK,s>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));l={topic:r,qos:n},this.settings.protocolVersion===5?(l.nl=a,l.rap=o,l.rh=s):this.settings.bridgeMode&&(l.rh=0,l.rap=!0,l.nl=!0),C("_parseSubscribe: push subscription `%s` to subscription",l),e.subscriptions.push(l)}}}_parseSuback(){C("_parseSuback");let e=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}if(e.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){let r=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!W.MQTT5_SUBACK_CODES[r])return this._emitError(new Error("Invalid suback code"))}else if(r>2&&r!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(r)}}}_parseUnsubscribe(){C("_parseUnsubscribe");let e=this.packet;if(e.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){let r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}if(e.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<e.length;){let r=this._parseString();if(r===null)return this._emitError(new Error("Cannot parse topic"));C("_parseUnsubscribe: push topic `%s` to unsubscriptions",r),e.unsubscriptions.push(r)}}}_parseUnsuback(){C("_parseUnsuback");let e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&e.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(e.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){let r=this._parseProperties();for(Object.getOwnPropertyNames(r).length&&(e.properties=r),e.granted=[];this._pos<this.packet.length;){let i=this._list.readUInt8(this._pos++);if(!W.MQTT5_UNSUBACK_CODES[i])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(i)}}}_parseConfirmation(){C("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);let e=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(e.length>2){switch(e.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!W.MQTT5_PUBACK_PUBREC_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!W.MQTT5_PUBREL_PUBCOMP_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}C("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)}else e.reasonCode=0;if(e.length>3){let r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}}return!0}_parseDisconnect(){let e=this.packet;if(C("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(e.reasonCode=this._parseByte(),W.MQTT5_DISCONNECT_CODES[e.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):e.reasonCode=0;let r=this._parseProperties();Object.getOwnPropertyNames(r).length&&(e.properties=r)}return C("_parseDisconnect result: true"),!0}_parseAuth(){C("_parseAuth");let e=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(e.reasonCode=this._parseByte(),!W.MQTT5_AUTH_CODES[e.reasonCode])return this._emitError(new Error("Invalid auth reason code"));let r=this._parseProperties();return Object.getOwnPropertyNames(r).length&&(e.properties=r),C("_parseAuth: result: true"),!0}_parseMessageId(){let e=this.packet;return e.messageId=this._parseNum(),e.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(C("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){let r=this._parseNum(),i=r+this._pos;if(r===-1||i>this._list.length||i>this.packet.length)return null;let n=this._list.toString("utf8",this._pos,i);return this._pos+=r,C("_parseString: result: %s",n),n}_parseStringPair(){return C("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){let e=this._parseNum(),r=e+this._pos;if(e===-1||r>this._list.length||r>this.packet.length)return null;let i=this._list.slice(this._pos,r);return this._pos+=e,C("_parseBuffer: result: %o",i),i}_parseNum(){if(this._list.length-this._pos<2)return-1;let e=this._list.readUInt16BE(this._pos);return this._pos+=2,C("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;let e=this._list.readUInt32BE(this._pos);return this._pos+=4,C("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){C("_parseVarByteNum");let r=4,i=0,n=1,s=0,o=!1,a,l=this._pos?this._pos:0;for(;i<r&&l+i<this._list.length;){if(a=this._list.readUInt8(l+i++),s+=n*(a&W.VARBYTEINT_MASK),n*=128,!(a&W.VARBYTEINT_FIN_MASK)){o=!0;break}if(this._list.length<=i)break}return!o&&i===r&&this._list.length>=i&&this._emitError(new Error("Invalid variable byte integer")),l&&(this._pos+=i),o?e?o={bytes:i,value:s}:o=s:o=!1,C("_parseVarByteNum: result: %o",o),o}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),C("_parseByte: result: %o",e),e}_parseByType(e){switch(C("_parseByType: type: %s",e),e){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){C("_parseProperties");let e=this._parseVarByteNum(),i=this._pos+e,n={};for(;this._pos<i;){let s=this._parseByte();if(!s)return this._emitError(new Error("Cannot parse property code type")),!1;let o=W.propertiesCodes[s];if(!o)return this._emitError(new Error("Unknown property")),!1;if(o==="userProperties"){n[o]||(n[o]=Object.create(null));let a=this._parseByType(W.propertiesTypes[o]);if(n[o][a.name])if(Array.isArray(n[o][a.name]))n[o][a.name].push(a.value);else{let l=n[o][a.name];n[o][a.name]=[l],n[o][a.name].push(a.value)}else n[o][a.name]=a.value;continue}n[o]?Array.isArray(n[o])?n[o].push(this._parseByType(W.propertiesTypes[o])):(n[o]=[n[o]],n[o].push(this._parseByType(W.propertiesTypes[o]))):n[o]=this._parseByType(W.propertiesTypes[o])}return n}_newPacket(){return C("_newPacket"),this.packet&&(this._list.consume(this.packet.length),C("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),C("_newPacket: new packet"),this.packet=new pE,this._pos=0,!0}_emitError(e){C("_emitError",e),this.error=e,this.emit("error",e)}};gE.exports=Th});var wE=p((c$,mE)=>{"use strict";var{Buffer:ms}=E("buffer"),Fj=65536,_E={},Uj=ms.isBuffer(ms.from([1,2]).subarray(0,1));function yE(t){let e=ms.allocUnsafe(2);return e.writeUInt8(t>>8,0),e.writeUInt8(t&255,1),e}function Wj(){for(let t=0;t<Fj;t++)_E[t]=yE(t)}function $j(t){let r=0,i=0,n=ms.allocUnsafe(4);do r=t%128|0,t=t/128|0,t>0&&(r=r|128),n.writeUInt8(r,i++);while(t>0&&i<4);return t>0&&(i=0),Uj?n.subarray(0,i):n.slice(0,i)}function Vj(t){let e=ms.allocUnsafe(4);return e.writeUInt32BE(t,0),e}mE.exports={cache:_E,generateCache:Wj,generateNumber:yE,genBufVariableByteInt:$j,generate4ByteBuffer:Vj}});var vE=p((h$,Rh)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Rh.exports={nextTick:Hj}:Rh.exports=process;function Hj(t,e,r,i){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,s,o;switch(n){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,i)});default:for(s=new Array(n-1),o=0;o<s.length;)s[o++]=arguments[o];return process.nextTick(function(){t.apply(null,s)})}}});var Ph=p((d$,PE)=>{"use strict";var k=wh(),{Buffer:I}=E("buffer"),Gj=I.allocUnsafe(0),zj=I.from([0]),ws=wE(),Yj=vE().nextTick,Ge=Tt()("mqtt-packet:writeToStream"),Ja=ws.cache,Kj=ws.generateNumber,Qj=ws.generateCache,Oh=ws.genBufVariableByteInt,Jj=ws.generate4ByteBuffer,Oe=Ah,Za=!0;function OE(t,e,r){switch(Ge("generate called"),e.cork&&(e.cork(),Yj(Zj,e)),Za&&(Za=!1,Qj()),Ge("generate: packet.cmd: %s",t.cmd),t.cmd){case"connect":return Xj(t,e,r);case"connack":return eD(t,e,r);case"publish":return tD(t,e,r);case"puback":case"pubrec":case"pubrel":case"pubcomp":return rD(t,e,r);case"subscribe":return iD(t,e,r);case"suback":return nD(t,e,r);case"unsubscribe":return sD(t,e,r);case"unsuback":return oD(t,e,r);case"pingreq":case"pingresp":return aD(t,e,r);case"disconnect":return lD(t,e,r);case"auth":return uD(t,e,r);default:return e.destroy(new Error("Unknown command")),!1}}Object.defineProperty(OE,"cacheNumbers",{get(){return Oe===Ah},set(t){t?((!Ja||Object.keys(Ja).length===0)&&(Za=!0),Oe=Ah):(Za=!1,Oe=fD)}});function Zj(t){t.uncork()}function Xj(t,e,r){let i=t||{},n=i.protocolId||"MQTT",s=i.protocolVersion||4,o=i.will,a=i.clean,l=i.keepalive||0,u=i.clientId||"",f=i.username,c=i.password,h=i.properties;a===void 0&&(a=!0);let b=0;if(!n||typeof n!="string"&&!I.isBuffer(n))return e.destroy(new Error("Invalid protocolId")),!1;if(b+=n.length+2,s!==3&&s!==4&&s!==5)return e.destroy(new Error("Invalid protocol version")),!1;if(b+=1,(typeof u=="string"||I.isBuffer(u))&&(u||s>=4)&&(u||a))b+=I.byteLength(u)+2;else{if(s<4)return e.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(a*1===0)return e.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof l!="number"||l<0||l>65535||l%1!==0)return e.destroy(new Error("Invalid keepalive")),!1;b+=2,b+=1;let d,g;if(s===5){if(d=gr(e,h),!d)return!1;b+=d.length}if(o){if(typeof o!="object")return e.destroy(new Error("Invalid will")),!1;if(!o.topic||typeof o.topic!="string")return e.destroy(new Error("Invalid will topic")),!1;if(b+=I.byteLength(o.topic)+2,b+=2,o.payload)if(o.payload.length>=0)typeof o.payload=="string"?b+=I.byteLength(o.payload):b+=o.payload.length;else return e.destroy(new Error("Invalid will payload")),!1;if(g={},s===5){if(g=gr(e,o.properties),!g)return!1;b+=g.length}}let y=!1;if(f!=null)if(RE(f))y=!0,b+=I.byteLength(f)+2;else return e.destroy(new Error("Invalid username")),!1;if(c!=null){if(!y)return e.destroy(new Error("Username is required to use password")),!1;if(RE(c))b+=AE(c)+2;else return e.destroy(new Error("Invalid password")),!1}e.write(k.CONNECT_HEADER),ze(e,b),tn(e,n),i.bridgeMode&&(s+=128),e.write(s===131?k.VERSION131:s===132?k.VERSION132:s===4?k.VERSION4:s===5?k.VERSION5:k.VERSION3);let _=0;return _|=f!=null?k.USERNAME_MASK:0,_|=c!=null?k.PASSWORD_MASK:0,_|=o&&o.retain?k.WILL_RETAIN_MASK:0,_|=o&&o.qos?o.qos<<k.WILL_QOS_SHIFT:0,_|=o?k.WILL_FLAG_MASK:0,_|=a?k.CLEAN_SESSION_MASK:0,e.write(I.from([_])),Oe(e,l),s===5&&d.write(),tn(e,u),o&&(s===5&&g.write(),Zr(e,o.topic),tn(e,o.payload)),f!=null&&tn(e,f),c!=null&&tn(e,c),!0}function eD(t,e,r){let i=r?r.protocolVersion:4,n=t||{},s=i===5?n.reasonCode:n.returnCode,o=n.properties,a=2;if(typeof s!="number")return e.destroy(new Error("Invalid return code")),!1;let l=null;if(i===5){if(l=gr(e,o),!l)return!1;a+=l.length}return e.write(k.CONNACK_HEADER),ze(e,a),e.write(n.sessionPresent?k.SESSIONPRESENT_HEADER:zj),e.write(I.from([s])),l?.write(),!0}function tD(t,e,r){Ge("publish: packet: %o",t);let i=r?r.protocolVersion:4,n=t||{},s=n.qos||0,o=n.retain?k.RETAIN_MASK:0,a=n.topic,l=n.payload||Gj,u=n.messageId,f=n.properties,c=0;if(typeof a=="string")c+=I.byteLength(a)+2;else if(I.isBuffer(a))c+=a.length+2;else return e.destroy(new Error("Invalid topic")),!1;if(I.isBuffer(l)?c+=l.length:c+=I.byteLength(l),s&&typeof u!="number")return e.destroy(new Error("Invalid messageId")),!1;s&&(c+=2);let h=null;if(i===5){if(h=gr(e,f),!h)return!1;c+=h.length}return e.write(k.PUBLISH_HEADER[s][n.dup?1:0][o?1:0]),ze(e,c),Oe(e,AE(a)),e.write(a),s>0&&Oe(e,u),h?.write(),Ge("publish: payload: %o",l),e.write(l)}function rD(t,e,r){let i=r?r.protocolVersion:4,n=t||{},s=n.cmd||"puback",o=n.messageId,a=n.dup&&s==="pubrel"?k.DUP_MASK:0,l=0,u=n.reasonCode,f=n.properties,c=i===5?3:2;if(s==="pubrel"&&(l=1),typeof o!="number")return e.destroy(new Error("Invalid messageId")),!1;let h=null;if(i===5&&typeof f=="object"){if(h=vs(e,f,r,c),!h)return!1;c+=h.length}return e.write(k.ACKS[s][l][a][0]),c===3&&(c+=u!==0?1:-1),ze(e,c),Oe(e,o),i===5&&c!==2&&e.write(I.from([u])),h!==null?h.write():c===4&&e.write(I.from([0])),!0}function iD(t,e,r){Ge("subscribe: packet: ");let i=r?r.protocolVersion:4,n=t||{},s=n.dup?k.DUP_MASK:0,o=n.messageId,a=n.subscriptions,l=n.properties,u=0;if(typeof o!="number")return e.destroy(new Error("Invalid messageId")),!1;u+=2;let f=null;if(i===5){if(f=gr(e,l),!f)return!1;u+=f.length}if(typeof a=="object"&&a.length)for(let h=0;h<a.length;h+=1){let b=a[h].topic,d=a[h].qos;if(typeof b!="string")return e.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof d!="number")return e.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(i===5){if(typeof(a[h].nl||!1)!="boolean")return e.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(a[h].rap||!1)!="boolean")return e.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;let _=a[h].rh||0;if(typeof _!="number"||_>2)return e.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}u+=I.byteLength(b)+2+1}else return e.destroy(new Error("Invalid subscriptions")),!1;Ge("subscribe: writing to stream: %o",k.SUBSCRIBE_HEADER),e.write(k.SUBSCRIBE_HEADER[1][s?1:0][0]),ze(e,u),Oe(e,o),f!==null&&f.write();let c=!0;for(let h of a){let b=h.topic,d=h.qos,g=+h.nl,y=+h.rap,_=h.rh,m;Zr(e,b),m=k.SUBSCRIBE_OPTIONS_QOS[d],i===5&&(m|=g?k.SUBSCRIBE_OPTIONS_NL:0,m|=y?k.SUBSCRIBE_OPTIONS_RAP:0,m|=_?k.SUBSCRIBE_OPTIONS_RH[_]:0),c=e.write(I.from([m]))}return c}function nD(t,e,r){let i=r?r.protocolVersion:4,n=t||{},s=n.messageId,o=n.granted,a=n.properties,l=0;if(typeof s!="number")return e.destroy(new Error("Invalid messageId")),!1;if(l+=2,typeof o=="object"&&o.length)for(let f=0;f<o.length;f+=1){if(typeof o[f]!="number")return e.destroy(new Error("Invalid qos vector")),!1;l+=1}else return e.destroy(new Error("Invalid qos vector")),!1;let u=null;if(i===5){if(u=vs(e,a,r,l),!u)return!1;l+=u.length}return e.write(k.SUBACK_HEADER),ze(e,l),Oe(e,s),u!==null&&u.write(),e.write(I.from(o))}function sD(t,e,r){let i=r?r.protocolVersion:4,n=t||{},s=n.messageId,o=n.dup?k.DUP_MASK:0,a=n.unsubscriptions,l=n.properties,u=0;if(typeof s!="number")return e.destroy(new Error("Invalid messageId")),!1;if(u+=2,typeof a=="object"&&a.length)for(let h=0;h<a.length;h+=1){if(typeof a[h]!="string")return e.destroy(new Error("Invalid unsubscriptions")),!1;u+=I.byteLength(a[h])+2}else return e.destroy(new Error("Invalid unsubscriptions")),!1;let f=null;if(i===5){if(f=gr(e,l),!f)return!1;u+=f.length}e.write(k.UNSUBSCRIBE_HEADER[1][o?1:0][0]),ze(e,u),Oe(e,s),f!==null&&f.write();let c=!0;for(let h=0;h<a.length;h++)c=Zr(e,a[h]);return c}function oD(t,e,r){let i=r?r.protocolVersion:4,n=t||{},s=n.messageId,o=n.dup?k.DUP_MASK:0,a=n.granted,l=n.properties,u=n.cmd,f=0,c=2;if(typeof s!="number")return e.destroy(new Error("Invalid messageId")),!1;if(i===5)if(typeof a=="object"&&a.length)for(let b=0;b<a.length;b+=1){if(typeof a[b]!="number")return e.destroy(new Error("Invalid qos vector")),!1;c+=1}else return e.destroy(new Error("Invalid qos vector")),!1;let h=null;if(i===5){if(h=vs(e,l,r,c),!h)return!1;c+=h.length}return e.write(k.ACKS[u][f][o][0]),ze(e,c),Oe(e,s),h!==null&&h.write(),i===5&&e.write(I.from(a)),!0}function aD(t,e,r){return e.write(k.EMPTY[t.cmd])}function lD(t,e,r){let i=r?r.protocolVersion:4,n=t||{},s=n.reasonCode,o=n.properties,a=i===5?1:0,l=null;if(i===5){if(l=vs(e,o,r,a),!l)return!1;a+=l.length}return e.write(I.from([k.codes.disconnect<<4])),ze(e,a),i===5&&e.write(I.from([s])),l!==null&&l.write(),!0}function uD(t,e,r){let i=r?r.protocolVersion:4,n=t||{},s=n.reasonCode,o=n.properties,a=i===5?1:0;i!==5&&e.destroy(new Error("Invalid mqtt version for auth packet"));let l=vs(e,o,r,a);return l?(a+=l.length,e.write(I.from([k.codes.auth<<4])),ze(e,a),e.write(I.from([s])),l!==null&&l.write(),!0):!1}var SE={};function ze(t,e){if(e>k.VARBYTEINT_MAX)return t.destroy(new Error(`Invalid variable byte integer: ${e}`)),!1;let r=SE[e];return r||(r=Oh(e),e<16384&&(SE[e]=r)),Ge("writeVarByteInt: writing to stream: %o",r),t.write(r)}function Zr(t,e){let r=I.byteLength(e);return Oe(t,r),Ge("writeString: %s",e),t.write(e,"utf8")}function EE(t,e,r){Zr(t,e),Zr(t,r)}function Ah(t,e){return Ge("writeNumberCached: number: %d",e),Ge("writeNumberCached: %o",Ja[e]),t.write(Ja[e])}function fD(t,e){let r=Kj(e);return Ge("writeNumberGenerated: %o",r),t.write(r)}function cD(t,e){let r=Jj(e);return Ge("write4ByteNumber: %o",r),t.write(r)}function tn(t,e){typeof e=="string"?Zr(t,e):e?(Oe(t,e.length),t.write(e)):Oe(t,0)}function gr(t,e){if(typeof e!="object"||e.length!=null)return{length:1,write(){TE(t,{},0)}};let r=0;function i(s,o){let a=k.propertiesTypes[s],l=0;switch(a){case"byte":{if(typeof o!="boolean")return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=2;break}case"int8":{if(typeof o!="number"||o<0||o>255)return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=2;break}case"binary":{if(o&&o===null)return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=1+I.byteLength(o)+2;break}case"int16":{if(typeof o!="number"||o<0||o>65535)return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=3;break}case"int32":{if(typeof o!="number"||o<0||o>4294967295)return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=5;break}case"var":{if(typeof o!="number"||o<0||o>268435455)return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=1+I.byteLength(Oh(o));break}case"string":{if(typeof o!="string")return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=3+I.byteLength(o.toString());break}case"pair":{if(typeof o!="object")return t.destroy(new Error(`Invalid ${s}: ${o}`)),!1;l+=Object.getOwnPropertyNames(o).reduce((u,f)=>{let c=o[f];return Array.isArray(c)?u+=c.reduce((h,b)=>(h+=3+I.byteLength(f.toString())+2+I.byteLength(b.toString()),h),0):u+=3+I.byteLength(f.toString())+2+I.byteLength(o[f].toString()),u},0);break}default:return t.destroy(new Error(`Invalid property ${s}: ${o}`)),!1}return l}if(e)for(let s in e){let o=0,a=0,l=e[s];if(Array.isArray(l))for(let u=0;u<l.length;u++){if(a=i(s,l[u]),!a)return!1;o+=a}else{if(a=i(s,l),!a)return!1;o=a}if(!o)return!1;r+=o}return{length:I.byteLength(Oh(r))+r,write(){TE(t,e,r)}}}function vs(t,e,r,i){let n=["reasonString","userProperties"],s=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0,o=gr(t,e);if(s)for(;i+o.length>s;){let a=n.shift();if(a&&e[a])delete e[a],o=gr(t,e);else return!1}return o}function xE(t,e,r){switch(k.propertiesTypes[e]){case"byte":{t.write(I.from([k.properties[e]])),t.write(I.from([+r]));break}case"int8":{t.write(I.from([k.properties[e]])),t.write(I.from([r]));break}case"binary":{t.write(I.from([k.properties[e]])),tn(t,r);break}case"int16":{t.write(I.from([k.properties[e]])),Oe(t,r);break}case"int32":{t.write(I.from([k.properties[e]])),cD(t,r);break}case"var":{t.write(I.from([k.properties[e]])),ze(t,r);break}case"string":{t.write(I.from([k.properties[e]])),Zr(t,r);break}case"pair":{Object.getOwnPropertyNames(r).forEach(n=>{let s=r[n];Array.isArray(s)?s.forEach(o=>{t.write(I.from([k.properties[e]])),EE(t,n.toString(),o.toString())}):(t.write(I.from([k.properties[e]])),EE(t,n.toString(),s.toString()))});break}default:return t.destroy(new Error(`Invalid property ${e} value: ${r}`)),!1}}function TE(t,e,r){ze(t,r);for(let i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==null){let n=e[i];if(Array.isArray(n))for(let s=0;s<n.length;s++)xE(t,i,n[s]);else xE(t,i,n)}}function AE(t){return t?t instanceof I?t.length:I.byteLength(t):0}function RE(t){return typeof t=="string"||t instanceof I}PE.exports=OE});var qE=p((p$,IE)=>{"use strict";var hD=Ph(),{EventEmitter:dD}=E("events"),{Buffer:ME}=E("buffer");function pD(t,e){let r=new Mh;return hD(t,r,e),r.concat()}var Mh=class extends dD{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0,r=new Array(this._array.length),i=this._array,n=0,s;for(s=0;s<i.length&&i[s]!==void 0;s++)typeof i[s]!="string"?r[s]=i[s].length:r[s]=ME.byteLength(i[s]),e+=r[s];let o=ME.allocUnsafe(e);for(s=0;s<i.length&&i[s]!==void 0;s++)typeof i[s]!="string"?(i[s].copy(o,n),n+=r[s]):(o.write(i[s],n),n+=r[s]);return o}destroy(e){e&&this.emit("error",e)}};IE.exports=pD});var CE=p(Xa=>{"use strict";Xa.parser=bE().parser;Xa.generate=qE();Xa.writeToStream=Ph()});var Ch=p(qh=>{"use strict";Object.defineProperty(qh,"__esModule",{value:!0});var Ih=class{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){let e=this.nextId++;return this.nextId===65536&&(this.nextId=1),e}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(e){return!0}deallocate(e){}clear(){}};qh.default=Ih});var NE=p((_$,kE)=>{"use strict";kE.exports=gD;function rn(t){return t instanceof Buffer?Buffer.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function gD(t){if(t=t||{},t.circles)return bD(t);let e=new Map;if(e.set(Date,o=>new Date(o)),e.set(Map,(o,a)=>new Map(i(Array.from(o),a))),e.set(Set,(o,a)=>new Set(i(Array.from(o),a))),t.constructorHandlers)for(let o of t.constructorHandlers)e.set(o[0],o[1]);let r=null;return t.proto?s:n;function i(o,a){let l=Object.keys(o),u=new Array(l.length);for(let f=0;f<l.length;f++){let c=l[f],h=o[c];typeof h!="object"||h===null?u[c]=h:h.constructor!==Object&&(r=e.get(h.constructor))?u[c]=r(h,a):ArrayBuffer.isView(h)?u[c]=rn(h):u[c]=a(h)}return u}function n(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return i(o,n);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,n);let a={};for(let l in o){if(Object.hasOwnProperty.call(o,l)===!1)continue;let u=o[l];typeof u!="object"||u===null?a[l]=u:u.constructor!==Object&&(r=e.get(u.constructor))?a[l]=r(u,n):ArrayBuffer.isView(u)?a[l]=rn(u):a[l]=n(u)}return a}function s(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return i(o,s);if(o.constructor!==Object&&(r=e.get(o.constructor)))return r(o,s);let a={};for(let l in o){let u=o[l];typeof u!="object"||u===null?a[l]=u:u.constructor!==Object&&(r=e.get(u.constructor))?a[l]=r(u,s):ArrayBuffer.isView(u)?a[l]=rn(u):a[l]=s(u)}return a}}function bD(t){let e=[],r=[],i=new Map;if(i.set(Date,l=>new Date(l)),i.set(Map,(l,u)=>new Map(s(Array.from(l),u))),i.set(Set,(l,u)=>new Set(s(Array.from(l),u))),t.constructorHandlers)for(let l of t.constructorHandlers)i.set(l[0],l[1]);let n=null;return t.proto?a:o;function s(l,u){let f=Object.keys(l),c=new Array(f.length);for(let h=0;h<f.length;h++){let b=f[h],d=l[b];if(typeof d!="object"||d===null)c[b]=d;else if(d.constructor!==Object&&(n=i.get(d.constructor)))c[b]=n(d,u);else if(ArrayBuffer.isView(d))c[b]=rn(d);else{let g=e.indexOf(d);g!==-1?c[b]=r[g]:c[b]=u(d)}}return c}function o(l){if(typeof l!="object"||l===null)return l;if(Array.isArray(l))return s(l,o);if(l.constructor!==Object&&(n=i.get(l.constructor)))return n(l,o);let u={};e.push(l),r.push(u);for(let f in l){if(Object.hasOwnProperty.call(l,f)===!1)continue;let c=l[f];if(typeof c!="object"||c===null)u[f]=c;else if(c.constructor!==Object&&(n=i.get(c.constructor)))u[f]=n(c,o);else if(ArrayBuffer.isView(c))u[f]=rn(c);else{let h=e.indexOf(c);h!==-1?u[f]=r[h]:u[f]=o(c)}}return e.pop(),r.pop(),u}function a(l){if(typeof l!="object"||l===null)return l;if(Array.isArray(l))return s(l,a);if(l.constructor!==Object&&(n=i.get(l.constructor)))return n(l,a);let u={};e.push(l),r.push(u);for(let f in l){let c=l[f];if(typeof c!="object"||c===null)u[f]=c;else if(c.constructor!==Object&&(n=i.get(c.constructor)))u[f]=n(c,a);else if(ArrayBuffer.isView(c))u[f]=rn(c);else{let h=e.indexOf(c);h!==-1?u[f]=r[h]:u[f]=a(c)}}return e.pop(),r.pop(),u}}});var jE=p((y$,LE)=>{"use strict";LE.exports=NE()()});var BE=p(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.validateTopics=nn.validateTopic=void 0;function DE(t){let e=t.split("/");for(let r=0;r<e.length;r++)if(e[r]!=="+"){if(e[r]==="#")return r===e.length-1;if(e[r].indexOf("+")!==-1||e[r].indexOf("#")!==-1)return!1}return!0}nn.validateTopic=DE;function _D(t){if(t.length===0)return"empty_topic_list";for(let e=0;e<t.length;e++)if(!DE(t[e]))return t[e];return null}nn.validateTopics=_D});var Lh=p(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});var yD=hr(),mD={objectMode:!0},wD={clean:!0},kh=class{constructor(e){this.options=e||{},this.options=Object.assign(Object.assign({},wD),e),this._inflights=new Map}put(e,r){return this._inflights.set(e.messageId,e),r&&r(),this}createStream(){let e=new yD.Readable(mD),r=[],i=!1,n=0;return this._inflights.forEach((s,o)=>{r.push(s)}),e._read=()=>{!i&&n<r.length?e.push(r[n++]):e.push(null)},e.destroy=s=>{if(!i)return i=!0,setTimeout(()=>{e.emit("close")},0),e},e}del(e,r){let i=this._inflights.get(e.messageId);return i?(this._inflights.delete(e.messageId),r(null,i)):r&&r(new Error("missing packet")),this}get(e,r){let i=this._inflights.get(e.messageId);return i?r(null,i):r&&r(new Error("missing packet")),this}close(e){this.options.clean&&(this._inflights=null),e&&e()}};Nh.default=kh});var UE=p(jh=>{"use strict";Object.defineProperty(jh,"__esModule",{value:!0});var FE=[0,16,128,131,135,144,145,151,153],vD=(t,e,r)=>{t.log("handlePublish: packet %o",e),r=typeof r<"u"?r:t.noop;let i=e.topic.toString(),n=e.payload,{qos:s}=e,{messageId:o}=e,{options:a}=t;if(t.options.protocolVersion===5){let l;if(e.properties&&(l=e.properties.topicAlias),typeof l<"u")if(i.length===0)if(l>0&&l<=65535){let u=t.topicAliasRecv.getTopicByAlias(l);if(u)i=u,t.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,l);else{t.log("handlePublish :: unregistered topic alias. alias: %d",l),t.emit("error",new Error("Received unregistered Topic Alias"));return}}else{t.log("handlePublish :: topic alias out of range. alias: %d",l),t.emit("error",new Error("Received Topic Alias is out of range"));return}else if(t.topicAliasRecv.put(i,l))t.log("handlePublish :: registered topic: %s - alias: %d",i,l);else{t.log("handlePublish :: topic alias out of range. alias: %d",l),t.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(t.log("handlePublish: qos %d",s),s){case 2:{a.customHandleAcks(i,n,e,(l,u)=>{if(typeof l=="number"&&(u=l,l=null),l)return t.emit("error",l);if(FE.indexOf(u)===-1)return t.emit("error",new Error("Wrong reason code for pubrec"));u?t._sendPacket({cmd:"pubrec",messageId:o,reasonCode:u},r):t.incomingStore.put(e,()=>{t._sendPacket({cmd:"pubrec",messageId:o},r)})});break}case 1:{a.customHandleAcks(i,n,e,(l,u)=>{if(typeof l=="number"&&(u=l,l=null),l)return t.emit("error",l);if(FE.indexOf(u)===-1)return t.emit("error",new Error("Wrong reason code for puback"));u||t.emit("message",i,n,e),t.handleMessage(e,f=>{if(f)return r&&r(f);t._sendPacket({cmd:"puback",messageId:o,reasonCode:u},r)})});break}case 0:t.emit("message",i,n,e),t.handleMessage(e,r);break;default:t.log("handlePublish: unknown QoS. Doing nothing.");break}};jh.default=vD});var WE=p((S$,SD)=>{SD.exports={name:"mqtt",description:"A library for the MQTT protocol",version:"5.10.3",contributors:["Adam Rudd <adamvrr@gmail.com>","Matteo Collina <matteo.collina@gmail.com> (https://github.com/mcollina)","Siarhei Buntsevich <scarry0506@gmail.com> (https://github.com/scarry1992)","Yoseph Maguire <yomaguir@microsoft.com> (https://github.com/YoDaMa)","Daniel Lando <daniel.sorridi@gmail.com> (https://github.com/robertsLando)"],keywords:["mqtt","publish/subscribe","publish","subscribe"],license:"MIT",repository:{type:"git",url:"git://github.com/mqttjs/MQTT.js.git"},main:"./build/index.js",module:"./dist/mqtt.esm.js",bin:{mqtt_pub:"./build/bin/pub.js",mqtt_sub:"./build/bin/sub.js",mqtt:"./build/bin/mqtt.js"},files:["dist/","CONTRIBUTING.md","LICENSE.md","help/","build/","src/"],exports:{".":{browser:{import:"./dist/mqtt.esm.js",default:"./dist/mqtt.min.js"},default:"./build/index.js"},"./package.json":"./package.json","./*.map":"./build/*.js.map","./dist/*":"./dist/*.js","./*":"./build/*.js"},types:"build/index.d.ts",typesVersions:{"*":{"*":["./build/index.d.ts"]}},scripts:{lint:"eslint --ext .ts .","lint-fix":"eslint --fix --ext .ts .","build:ts":"rimraf build/ && tsc -p tsconfig.build.json","build:browser":"node esbuild.js",build:"npm run build:ts && npm run build:browser",prepare:"npm run build","unit-test:node":"node -r esbuild-register --test-concurrency 4 --test-reporter=junit --test-reporter-destination=junit.xml --test-reporter=spec --test-reporter-destination=stdout --test test/node/*.ts ","unit-test:browser":"wtr","test:node":"node_modules/.bin/nyc npm run unit-test:node","test:browser":"npm run build && npm run unit-test:browser",test:"npm run test:node",changelog:"conventional-changelog -p angular -i CHANGELOG.md -s && git add CHANGELOG.md","changelog-init":"conventional-changelog -p angular -i CHANGELOG.md -s -r 0",release:"read -p 'GITHUB_TOKEN: ' GITHUB_TOKEN && export GITHUB_TOKEN=$GITHUB_TOKEN && release-it"},"release-it":{github:{release:!0},git:{tagName:"v${version}",commitMessage:"chore(release): ${version}"},hooks:{"before:init":["npm run test"]},npm:{publish:!0},plugins:{"@release-it/conventional-changelog":{preset:"angular",infile:"CHANGELOG.md"}}},publishConfig:{provenance:!0},"pre-commit":["lint"],engines:{node:">=16.0.0"},browser:{"./mqtt.js":"./dist/mqtt.js",fs:!1,tls:!1,net:!1},dependencies:{"@types/readable-stream":"^4.0.5","@types/ws":"^8.5.9",commist:"^3.2.0","concat-stream":"^2.0.0",debug:"^4.3.4","help-me":"^5.0.0","lru-cache":"^10.0.1",minimist:"^1.2.8","mqtt-packet":"^9.0.1","number-allocator":"^1.0.14","readable-stream":"^4.4.2",reinterval:"^1.1.0",rfdc:"^1.3.0",split2:"^4.2.0","worker-timers":"^7.1.4",ws:"^8.17.1"},devDependencies:{"@esm-bundle/chai":"^4.3.4-fix.0","@release-it/conventional-changelog":"^7.0.2","@types/chai":"^4.3.10","@types/node":"^20.9.0","@types/sinon":"^17.0.1","@types/tape":"^5.6.4","@typescript-eslint/eslint-plugin":"^6.10.0","@typescript-eslint/parser":"^6.10.0","@web/test-runner":"^0.18.0","@web/test-runner-playwright":"^0.11.0","aedes-cli":"^0.8.0",chai:"^4.3.10",chokidar:"^3.5.3","conventional-changelog-cli":"^4.1.0","end-of-stream":"^1.4.4",esbuild:"^0.19.5","esbuild-plugin-polyfill-node":"^0.3.0","esbuild-register":"^3.5.0",eslint:"^8.53.0","eslint-config-airbnb-base":"^15.0.0","eslint-config-airbnb-typescript":"^17.1.0","eslint-config-prettier":"^9.0.0","eslint-plugin-import":"^2.29.0","eslint-plugin-prettier":"^5.0.1",global:"^4.4.0","leaked-handles":"^5.2.0",mkdirp:"^3.0.1","mqtt-connection":"^4.1.0","mqtt-level-store":"^3.1.0",nyc:"^15.1.0","pre-commit":"^1.2.2",prettier:"^3.0.3","release-it":"^16.2.1",rimraf:"^5.0.5",should:"^13.2.3",sinon:"^17.0.1",snazzy:"^9.0.0",tape:"^5.7.2","ts-node":"^10.9.1",typescript:"^5.2.2"}}});var Xr=p(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.MQTTJS_VERSION=Rt.nextTick=Rt.applyMixin=Rt.ErrorWithReasonCode=void 0;var Dh=class t extends Error{constructor(e,r){super(e),this.code=r,Object.setPrototypeOf(this,t.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}};Rt.ErrorWithReasonCode=Dh;function ED(t,e,r=!1){var i;let n=[e];for(;;){let s=n[0],o=Object.getPrototypeOf(s);if(o?.prototype)n.unshift(o);else break}for(let s of n)for(let o of Object.getOwnPropertyNames(s.prototype))(r||o!=="constructor")&&Object.defineProperty(t.prototype,o,(i=Object.getOwnPropertyDescriptor(s.prototype,o))!==null&&i!==void 0?i:Object.create(null))}Rt.applyMixin=ED;Rt.nextTick=typeof(process==null?void 0:process.nextTick)=="function"?process.nextTick:t=>{setTimeout(t,0)};Rt.MQTTJS_VERSION=WE().version});var Ss=p(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});br.ReasonCodes=void 0;var $E=Xr();br.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};var xD=(t,e)=>{let{messageId:r}=e,i=e.cmd,n=null,s=t.outgoing[r]?t.outgoing[r].cb:null,o=null;if(!s){t.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(t.log("_handleAck :: packet type",i),i){case"pubcomp":case"puback":{let a=e.reasonCode;a&&a>0&&a!==16?(o=new $E.ErrorWithReasonCode(`Publish error: ${br.ReasonCodes[a]}`,a),t._removeOutgoingAndStoreMessage(r,()=>{s(o,e)})):t._removeOutgoingAndStoreMessage(r,s);break}case"pubrec":{n={cmd:"pubrel",qos:2,messageId:r};let a=e.reasonCode;a&&a>0&&a!==16?(o=new $E.ErrorWithReasonCode(`Publish error: ${br.ReasonCodes[a]}`,a),t._removeOutgoingAndStoreMessage(r,()=>{s(o,e)})):t._sendPacket(n);break}case"suback":{delete t.outgoing[r],t.messageIdProvider.deallocate(r);let a=e.granted;for(let l=0;l<a.length;l++){let u=a[l];if(u&128){o=new Error(`Subscribe error: ${br.ReasonCodes[u]}`),o.code=u;let f=t.messageIdToTopic[r];f&&f.forEach(c=>{delete t._resubscribeTopics[c]})}}delete t.messageIdToTopic[r],t._invokeStoreProcessingQueue(),s(o,e);break}case"unsuback":{delete t.outgoing[r],t.messageIdProvider.deallocate(r),t._invokeStoreProcessingQueue(),s(null,e);break}default:t.emit("error",new Error("unrecognized packet type"))}t.disconnecting&&Object.keys(t.outgoing).length===0&&t.emit("outgoingEmpty")};br.default=xD});var HE=p(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});var VE=Xr(),TD=Ss(),RD=(t,e)=>{let{options:r}=t,i=r.protocolVersion,n=i===5?e.reasonCode:e.returnCode;if(i!==5){let s=new VE.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${i}`,n);t.emit("error",s);return}t.handleAuth(e,(s,o)=>{if(s){t.emit("error",s);return}if(n===24)t.reconnecting=!1,t._sendPacket(o);else{let a=new VE.ErrorWithReasonCode(`Connection refused: ${TD.ReasonCodes[n]}`,n);t.emit("error",a)}})};Bh.default=RD});var QE=p(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.LRUCache=void 0;var sn=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,zE=new Set,Fh=typeof process=="object"&&process?process:{},YE=(t,e,r,i)=>{typeof Fh.emitWarning=="function"?Fh.emitWarning(t,e,r,i):console.error(`[${r}] ${e}: ${t}`)},el=globalThis.AbortController,GE=globalThis.AbortSignal;if(typeof el>"u"){GE=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(i,n){this._onabort.push(n)}},el=class{constructor(){e()}signal=new GE;abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let n of this.signal._onabort)n(i);this.signal.onabort?.(i)}}};let t=Fh.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,YE("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var OD=t=>!zE.has(t),A$=Symbol("type"),_r=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),KE=t=>_r(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?on:null:null,on=class extends Array{constructor(e){super(e),this.fill(0)}},Uh=class t{heap;length;static#l=!1;static create(e){let r=KE(e);if(!r)return[];t.#l=!0;let i=new t(e,r);return t.#l=!1,i}constructor(e,r){if(!t.#l)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Wh=class t{#l;#c;#g;#b;#M;#I;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#_;#i;#r;#e;#u;#h;#a;#s;#y;#o;#m;#w;#d;#v;#R;#f;static unsafeExposeInternals(e){return{starts:e.#w,ttls:e.#d,sizes:e.#m,keyMap:e.#i,keyList:e.#r,valList:e.#e,next:e.#u,prev:e.#h,get head(){return e.#a},get tail(){return e.#s},free:e.#y,isBackgroundFetch:r=>e.#t(r),backgroundFetch:(r,i,n,s)=>e.#k(r,i,n,s),moveToTail:r=>e.#P(r),indexes:r=>e.#S(r),rindexes:r=>e.#E(r),isStale:r=>e.#p(r)}}get max(){return this.#l}get maxSize(){return this.#c}get calculatedSize(){return this.#_}get size(){return this.#n}get fetchMethod(){return this.#M}get memoMethod(){return this.#I}get dispose(){return this.#g}get disposeAfter(){return this.#b}constructor(e){let{max:r=0,ttl:i,ttlResolution:n=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:l,dispose:u,disposeAfter:f,noDisposeOnSet:c,noUpdateTTL:h,maxSize:b=0,maxEntrySize:d=0,sizeCalculation:g,fetchMethod:y,memoMethod:_,noDeleteOnFetchRejection:m,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:T,ignoreFetchAbort:M}=e;if(r!==0&&!_r(r))throw new TypeError("max option must be a nonnegative integer");let O=r?KE(r):Array;if(!O)throw new Error("invalid max value: "+r);if(this.#l=r,this.#c=b,this.maxEntrySize=d||this.#c,this.sizeCalculation=g,this.sizeCalculation){if(!this.#c&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(_!==void 0&&typeof _!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#I=_,y!==void 0&&typeof y!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#M=y,this.#R=!!y,this.#i=new Map,this.#r=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#u=new O(r),this.#h=new O(r),this.#a=0,this.#s=0,this.#y=Uh.create(r),this.#n=0,this.#_=0,typeof u=="function"&&(this.#g=u),typeof f=="function"?(this.#b=f,this.#o=[]):(this.#b=void 0,this.#o=void 0),this.#v=!!this.#g,this.#f=!!this.#b,this.noDisposeOnSet=!!c,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!m,this.allowStaleOnFetchRejection=!!w,this.allowStaleOnFetchAbort=!!T,this.ignoreFetchAbort=!!M,this.maxEntrySize!==0){if(this.#c!==0&&!_r(this.#c))throw new TypeError("maxSize must be a positive integer if specified");if(!_r(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#U()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=_r(n)||n===0?n:1,this.ttlAutopurge=!!s,this.ttl=i||0,this.ttl){if(!_r(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#N()}if(this.#l===0&&this.ttl===0&&this.#c===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#l&&!this.#c){let N="LRU_CACHE_UNBOUNDED";OD(N)&&(zE.add(N),YE("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",N,t))}}getRemainingTTL(e){return this.#i.has(e)?1/0:0}#N(){let e=new on(this.#l),r=new on(this.#l);this.#d=e,this.#w=r,this.#L=(s,o,a=sn.now())=>{if(r[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#p(s)&&this.#x(this.#r[s],"expire")},o+1);l.unref&&l.unref()}},this.#O=s=>{r[s]=e[s]!==0?sn.now():0},this.#T=(s,o)=>{if(e[o]){let a=e[o],l=r[o];if(!a||!l)return;s.ttl=a,s.start=l,s.now=i||n();let u=s.now-l;s.remainingTTL=a-u}};let i=0,n=()=>{let s=sn.now();if(this.ttlResolution>0){i=s;let o=setTimeout(()=>i=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#i.get(s);if(o===void 0)return 0;let a=e[o],l=r[o];if(!a||!l)return 1/0;let u=(i||n())-l;return a-u},this.#p=s=>{let o=r[s],a=e[s];return!!a&&!!o&&(i||n())-o>a}}#O=()=>{};#T=()=>{};#L=()=>{};#p=()=>!1;#U(){let e=new on(this.#l);this.#_=0,this.#m=e,this.#A=r=>{this.#_-=e[r],e[r]=0},this.#j=(r,i,n,s)=>{if(this.#t(i))return 0;if(!_r(n))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(n=s(i,r),!_r(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.#q=(r,i,n)=>{if(e[r]=i,this.#c){let s=this.#c-e[r];for(;this.#_>s;)this.#C(!0)}this.#_+=e[r],n&&(n.entrySize=i,n.totalCalculatedSize=this.#_)}}#A=e=>{};#q=(e,r,i)=>{};#j=(e,r,i,n)=>{if(i||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#S({allowStale:e=this.allowStale}={}){if(this.#n)for(let r=this.#s;!(!this.#D(r)||((e||!this.#p(r))&&(yield r),r===this.#a));)r=this.#h[r]}*#E({allowStale:e=this.allowStale}={}){if(this.#n)for(let r=this.#a;!(!this.#D(r)||((e||!this.#p(r))&&(yield r),r===this.#s));)r=this.#u[r]}#D(e){return e!==void 0&&this.#i.get(this.#r[e])===e}*entries(){for(let e of this.#S())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*rentries(){for(let e of this.#E())this.#e[e]!==void 0&&this.#r[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#r[e],this.#e[e]])}*keys(){for(let e of this.#S()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*rkeys(){for(let e of this.#E()){let r=this.#r[e];r!==void 0&&!this.#t(this.#e[e])&&(yield r)}}*values(){for(let e of this.#S())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#E())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let i of this.#S()){let n=this.#e[i],s=this.#t(n)?n.__staleWhileFetching:n;if(s!==void 0&&e(s,this.#r[i],this))return this.get(this.#r[i],r)}}forEach(e,r=this){for(let i of this.#S()){let n=this.#e[i],s=this.#t(n)?n.__staleWhileFetching:n;s!==void 0&&e.call(r,s,this.#r[i],this)}}rforEach(e,r=this){for(let i of this.#E()){let n=this.#e[i],s=this.#t(n)?n.__staleWhileFetching:n;s!==void 0&&e.call(r,s,this.#r[i],this)}}purgeStale(){let e=!1;for(let r of this.#E({allowStale:!0}))this.#p(r)&&(this.#x(this.#r[r],"expire"),e=!0);return e}info(e){let r=this.#i.get(e);if(r===void 0)return;let i=this.#e[r],n=this.#t(i)?i.__staleWhileFetching:i;if(n===void 0)return;let s={value:n};if(this.#d&&this.#w){let o=this.#d[r],a=this.#w[r];if(o&&a){let l=o-(sn.now()-a);s.ttl=l,s.start=Date.now()}}return this.#m&&(s.size=this.#m[r]),s}dump(){let e=[];for(let r of this.#S({allowStale:!0})){let i=this.#r[r],n=this.#e[r],s=this.#t(n)?n.__staleWhileFetching:n;if(s===void 0||i===void 0)continue;let o={value:s};if(this.#d&&this.#w){o.ttl=this.#d[r];let a=sn.now()-this.#w[r];o.start=Math.floor(Date.now()-a)}this.#m&&(o.size=this.#m[r]),e.unshift([i,o])}return e}load(e){this.clear();for(let[r,i]of e){if(i.start){let n=Date.now()-i.start;i.start=sn.now()-n}this.set(r,i.value,i)}}set(e,r,i={}){if(r===void 0)return this.delete(e),this;let{ttl:n=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=i,{noUpdateTTL:u=this.noUpdateTTL}=i,f=this.#j(e,r,i.size||0,a);if(this.maxEntrySize&&f>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#x(e,"set"),this;let c=this.#n===0?void 0:this.#i.get(e);if(c===void 0)c=this.#n===0?this.#s:this.#y.length!==0?this.#y.pop():this.#n===this.#l?this.#C(!1):this.#n,this.#r[c]=e,this.#e[c]=r,this.#i.set(e,c),this.#u[this.#s]=c,this.#h[c]=this.#s,this.#s=c,this.#n++,this.#q(c,f,l),l&&(l.set="add"),u=!1;else{this.#P(c);let h=this.#e[c];if(r!==h){if(this.#R&&this.#t(h)){h.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:b}=h;b!==void 0&&!o&&(this.#v&&this.#g?.(b,e,"set"),this.#f&&this.#o?.push([b,e,"set"]))}else o||(this.#v&&this.#g?.(h,e,"set"),this.#f&&this.#o?.push([h,e,"set"]));if(this.#A(c),this.#q(c,f,l),this.#e[c]=r,l){l.set="replace";let b=h&&this.#t(h)?h.__staleWhileFetching:h;b!==void 0&&(l.oldValue=b)}}else l&&(l.set="update")}if(n!==0&&!this.#d&&this.#N(),this.#d&&(u||this.#L(c,n,s),l&&this.#T(l,c)),!o&&this.#f&&this.#o){let h=this.#o,b;for(;b=h?.shift();)this.#b?.(...b)}return this}pop(){try{for(;this.#n;){let e=this.#e[this.#a];if(this.#C(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#f&&this.#o){let e=this.#o,r;for(;r=e?.shift();)this.#b?.(...r)}}}#C(e){let r=this.#a,i=this.#r[r],n=this.#e[r];return this.#R&&this.#t(n)?n.__abortController.abort(new Error("evicted")):(this.#v||this.#f)&&(this.#v&&this.#g?.(n,i,"evict"),this.#f&&this.#o?.push([n,i,"evict"])),this.#A(r),e&&(this.#r[r]=void 0,this.#e[r]=void 0,this.#y.push(r)),this.#n===1?(this.#a=this.#s=0,this.#y.length=0):this.#a=this.#u[r],this.#i.delete(i),this.#n--,r}has(e,r={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:n}=r,s=this.#i.get(e);if(s!==void 0){let o=this.#e[s];if(this.#t(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#p(s))n&&(n.has="stale",this.#T(n,s));else return i&&this.#O(s),n&&(n.has="hit",this.#T(n,s)),!0}else n&&(n.has="miss");return!1}peek(e,r={}){let{allowStale:i=this.allowStale}=r,n=this.#i.get(e);if(n===void 0||!i&&this.#p(n))return;let s=this.#e[n];return this.#t(s)?s.__staleWhileFetching:s}#k(e,r,i,n){let s=r===void 0?void 0:this.#e[r];if(this.#t(s))return s;let o=new el,{signal:a}=i;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let l={signal:o.signal,options:i,context:n},u=(g,y=!1)=>{let{aborted:_}=o.signal,m=i.ignoreFetchAbort&&g!==void 0;if(i.status&&(_&&!y?(i.status.fetchAborted=!0,i.status.fetchError=o.signal.reason,m&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),_&&!m&&!y)return c(o.signal.reason);let S=b;return this.#e[r]===b&&(g===void 0?S.__staleWhileFetching?this.#e[r]=S.__staleWhileFetching:this.#x(e,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(e,g,l.options))),g},f=g=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=g),c(g)),c=g=>{let{aborted:y}=o.signal,_=y&&i.allowStaleOnFetchAbort,m=_||i.allowStaleOnFetchRejection,S=m||i.noDeleteOnFetchRejection,w=b;if(this.#e[r]===b&&(!S||w.__staleWhileFetching===void 0?this.#x(e,"fetch"):_||(this.#e[r]=w.__staleWhileFetching)),m)return i.status&&w.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),w.__staleWhileFetching;if(w.__returned===w)throw g},h=(g,y)=>{let _=this.#M?.(e,s,l);_&&_ instanceof Promise&&_.then(m=>g(m===void 0?void 0:m),y),o.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(g(void 0),i.allowStaleOnFetchAbort&&(g=m=>u(m,!0)))})};i.status&&(i.status.fetchDispatched=!0);let b=new Promise(h).then(u,f),d=Object.assign(b,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(e,d,{...l.options,status:void 0}),r=this.#i.get(e)):this.#e[r]=d,d}#t(e){if(!this.#R)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof el}async fetch(e,r={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:f=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:b=this.ignoreFetchAbort,allowStaleOnFetchAbort:d=this.allowStaleOnFetchAbort,context:g,forceRefresh:y=!1,status:_,signal:m}=r;if(!this.#R)return _&&(_.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,status:_});let S={allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:u,noUpdateTTL:f,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:d,ignoreFetchAbort:b,status:_,signal:m},w=this.#i.get(e);if(w===void 0){_&&(_.fetch="miss");let T=this.#k(e,w,S,g);return T.__returned=T}else{let T=this.#e[w];if(this.#t(T)){let $=i&&T.__staleWhileFetching!==void 0;return _&&(_.fetch="inflight",$&&(_.returnedStale=!0)),$?T.__staleWhileFetching:T.__returned=T}let M=this.#p(w);if(!y&&!M)return _&&(_.fetch="hit"),this.#P(w),n&&this.#O(w),_&&this.#T(_,w),T;let O=this.#k(e,w,S,g),R=O.__staleWhileFetching!==void 0&&i;return _&&(_.fetch=M?"stale":"refresh",R&&M&&(_.returnedStale=!0)),R?O.__staleWhileFetching:O.__returned=O}}async forceFetch(e,r={}){let i=await this.fetch(e,r);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(e,r={}){let i=this.#I;if(!i)throw new Error("no memoMethod provided to constructor");let{context:n,forceRefresh:s,...o}=r,a=this.get(e,o);if(!s&&a!==void 0)return a;let l=i(e,a,{options:o,context:n});return this.set(e,l,o),l}get(e,r={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=r,a=this.#i.get(e);if(a!==void 0){let l=this.#e[a],u=this.#t(l);return o&&this.#T(o,a),this.#p(a)?(o&&(o.get="stale"),u?(o&&i&&l.__staleWhileFetching!==void 0&&(o.returnedStale=!0),i?l.__staleWhileFetching:void 0):(s||this.#x(e,"expire"),o&&i&&(o.returnedStale=!0),i?l:void 0)):(o&&(o.get="hit"),u?l.__staleWhileFetching:(this.#P(a),n&&this.#O(a),l))}else o&&(o.get="miss")}#B(e,r){this.#h[r]=e,this.#u[e]=r}#P(e){e!==this.#s&&(e===this.#a?this.#a=this.#u[e]:this.#B(this.#h[e],this.#u[e]),this.#B(this.#s,e),this.#s=e)}delete(e){return this.#x(e,"delete")}#x(e,r){let i=!1;if(this.#n!==0){let n=this.#i.get(e);if(n!==void 0)if(i=!0,this.#n===1)this.#F(r);else{this.#A(n);let s=this.#e[n];if(this.#t(s)?s.__abortController.abort(new Error("deleted")):(this.#v||this.#f)&&(this.#v&&this.#g?.(s,e,r),this.#f&&this.#o?.push([s,e,r])),this.#i.delete(e),this.#r[n]=void 0,this.#e[n]=void 0,n===this.#s)this.#s=this.#h[n];else if(n===this.#a)this.#a=this.#u[n];else{let o=this.#h[n];this.#u[o]=this.#u[n];let a=this.#u[n];this.#h[a]=this.#h[n]}this.#n--,this.#y.push(n)}}if(this.#f&&this.#o?.length){let n=this.#o,s;for(;s=n?.shift();)this.#b?.(...s)}return i}clear(){return this.#F("delete")}#F(e){for(let r of this.#E({allowStale:!0})){let i=this.#e[r];if(this.#t(i))i.__abortController.abort(new Error("deleted"));else{let n=this.#r[r];this.#v&&this.#g?.(i,n,e),this.#f&&this.#o?.push([i,n,e])}}if(this.#i.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#d&&this.#w&&(this.#d.fill(0),this.#w.fill(0)),this.#m&&this.#m.fill(0),this.#a=0,this.#s=0,this.#y.length=0,this.#_=0,this.#n=0,this.#f&&this.#o){let r=this.#o,i;for(;i=r?.shift();)this.#b?.(...i)}}};tl.LRUCache=Wh});var Ot=p(yr=>{"use strict";Object.defineProperty(yr,"t",{value:!0});yr.ContainerIterator=yr.Container=yr.Base=void 0;var $h=class{constructor(e=0){this.iteratorType=e}equals(e){return this.o===e.o}};yr.ContainerIterator=$h;var rl=class{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}};yr.Base=rl;var Vh=class extends rl{};yr.Container=Vh});var JE=p(il=>{"use strict";Object.defineProperty(il,"t",{value:!0});il.default=void 0;var AD=Ot(),Hh=class extends AD.Base{constructor(e=[]){super(),this.S=[];let r=this;e.forEach(function(i){r.push(i)})}clear(){this.i=0,this.S=[]}push(e){return this.S.push(e),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}},PD=Hh;il.default=PD});var ZE=p(nl=>{"use strict";Object.defineProperty(nl,"t",{value:!0});nl.default=void 0;var MD=Ot(),Gh=class extends MD.Base{constructor(e=[]){super(),this.j=0,this.q=[];let r=this;e.forEach(function(i){r.push(i)})}clear(){this.q=[],this.i=this.j=0}push(e){let r=this.q.length;if(this.j/r>.5&&this.j+this.i>=r&&r>4096){let i=this.i;for(let n=0;n<i;++n)this.q[n]=this.q[this.j+n];this.j=0,this.q[this.i]=e}else this.q[this.j+this.i]=e;return++this.i}pop(){if(this.i===0)return;let e=this.q[this.j++];return this.i-=1,e}front(){if(this.i!==0)return this.q[this.j]}},ID=Gh;nl.default=ID});var XE=p(sl=>{"use strict";Object.defineProperty(sl,"t",{value:!0});sl.default=void 0;var qD=Ot(),zh=class extends qD.Base{constructor(e=[],r=function(n,s){return n>s?-1:n<s?1:0},i=!0){if(super(),this.v=r,Array.isArray(e))this.C=i?[...e]:e;else{this.C=[];let s=this;e.forEach(function(o){s.C.push(o)})}this.i=this.C.length;let n=this.i>>1;for(let s=this.i-1>>1;s>=0;--s)this.k(s,n)}m(e){let r=this.C[e];for(;e>0;){let i=e-1>>1,n=this.C[i];if(this.v(n,r)<=0)break;this.C[e]=n,e=i}this.C[e]=r}k(e,r){let i=this.C[e];for(;e<r;){let n=e<<1|1,s=n+1,o=this.C[n];if(s<this.i&&this.v(o,this.C[s])>0&&(n=s,o=this.C[s]),this.v(o,i)>=0)break;this.C[e]=o,e=n}this.C[e]=i}clear(){this.i=0,this.C.length=0}push(e){this.C.push(e),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;let e=this.C[0],r=this.C.pop();return this.i-=1,this.i&&(this.C[0]=r,this.k(0,this.i>>1)),e}top(){return this.C[0]}find(e){return this.C.indexOf(e)>=0}remove(e){let r=this.C.indexOf(e);return r<0?!1:(r===0?this.pop():r===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(r,1,this.C.pop()),this.i-=1,this.m(r),this.k(r,this.i>>1)),!0)}updateItem(e){let r=this.C.indexOf(e);return r<0?!1:(this.m(r),this.k(r,this.i>>1),!0)}toArray(){return[...this.C]}},CD=zh;sl.default=CD});var al=p(ol=>{"use strict";Object.defineProperty(ol,"t",{value:!0});ol.default=void 0;var kD=Ot(),Yh=class extends kD.Container{},ND=Yh;ol.default=ND});var At=p(Kh=>{"use strict";Object.defineProperty(Kh,"t",{value:!0});Kh.throwIteratorAccessError=LD;function LD(){throw new RangeError("Iterator access denied!")}});var Jh=p(ul=>{"use strict";Object.defineProperty(ul,"t",{value:!0});ul.RandomIterator=void 0;var jD=Ot(),ll=At(),Qh=class extends jD.ContainerIterator{constructor(e,r){super(r),this.o=e,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,ll.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,ll.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,ll.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,ll.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(e){this.container.setElementByPos(this.o,e)}};ul.RandomIterator=Qh});var e1=p(fl=>{"use strict";Object.defineProperty(fl,"t",{value:!0});fl.default=void 0;var DD=FD(al()),BD=Jh();function FD(t){return t&&t.t?t:{default:t}}var ei=class t extends BD.RandomIterator{constructor(e,r,i){super(e,i),this.container=r}copy(){return new t(this.o,this.container,this.iteratorType)}},Zh=class extends DD.default{constructor(e=[],r=!0){if(super(),Array.isArray(e))this.J=r?[...e]:e,this.i=e.length;else{this.J=[];let i=this;e.forEach(function(n){i.pushBack(n)})}}clear(){this.i=0,this.J.length=0}begin(){return new ei(0,this)}end(){return new ei(this.i,this)}rBegin(){return new ei(this.i-1,this,1)}rEnd(){return new ei(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J[e]}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J.splice(e,1),this.i-=1,this.i}eraseElementByValue(e){let r=0;for(let i=0;i<this.i;++i)this.J[i]!==e&&(this.J[r++]=this.J[i]);return this.i=this.J.length=r,this.i}eraseElementByIterator(e){let r=e.o;return e=e.next(),this.eraseElementByPos(r),e}pushBack(e){return this.J.push(e),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(e,r){if(e<0||e>this.i-1)throw new RangeError;this.J[e]=r}insert(e,r,i=1){if(e<0||e>this.i)throw new RangeError;return this.J.splice(e,0,...new Array(i).fill(r)),this.i+=i,this.i}find(e){for(let r=0;r<this.i;++r)if(this.J[r]===e)return new ei(r,this);return this.end()}reverse(){this.J.reverse()}unique(){let e=1;for(let r=1;r<this.i;++r)this.J[r]!==this.J[r-1]&&(this.J[e++]=this.J[r]);return this.i=this.J.length=e,this.i}sort(e){this.J.sort(e)}forEach(e){for(let r=0;r<this.i;++r)e(this.J[r],r,this)}[Symbol.iterator](){return function*(){yield*this.J}.bind(this)()}},UD=Zh;fl.default=UD});var t1=p(cl=>{"use strict";Object.defineProperty(cl,"t",{value:!0});cl.default=void 0;var WD=VD(al()),$D=Ot(),ti=At();function VD(t){return t&&t.t?t:{default:t}}var ri=class t extends $D.ContainerIterator{constructor(e,r,i,n){super(n),this.o=e,this.h=r,this.container=i,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,ti.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,ti.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,ti.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,ti.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,ti.throwIteratorAccessError)(),this.o.l}set pointer(e){this.o===this.h&&(0,ti.throwIteratorAccessError)(),this.o.l=e}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},Xh=class extends WD.default{constructor(e=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;let r=this;e.forEach(function(i){r.pushBack(i)})}V(e){let{L:r,B:i}=e;r.B=i,i.L=r,e===this.p&&(this.p=i),e===this._&&(this._=r),this.i-=1}G(e,r){let i=r.B,n={l:e,L:r,B:i};r.B=n,i.L=n,r===this.h&&(this.p=n),i===this.h&&(this._=n),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new ri(this.p,this.h,this)}end(){return new ri(this.h,this.h,this)}rBegin(){return new ri(this._,this.h,this,1)}rEnd(){return new ri(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return r.l}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return this.V(r),this.i}eraseElementByValue(e){let r=this.p;for(;r!==this.h;)r.l===e&&this.V(r),r=r.B;return this.i}eraseElementByIterator(e){let r=e.o;return r===this.h&&(0,ti.throwIteratorAccessError)(),e=e.next(),this.V(r),e}pushBack(e){return this.G(e,this._),this.i}popBack(){if(this.i===0)return;let e=this._.l;return this.V(this._),e}pushFront(e){return this.G(e,this.h),this.i}popFront(){if(this.i===0)return;let e=this.p.l;return this.V(this.p),e}setElementByPos(e,r){if(e<0||e>this.i-1)throw new RangeError;let i=this.p;for(;e--;)i=i.B;i.l=r}insert(e,r,i=1){if(e<0||e>this.i)throw new RangeError;if(i<=0)return this.i;if(e===0)for(;i--;)this.pushFront(r);else if(e===this.i)for(;i--;)this.pushBack(r);else{let n=this.p;for(let o=1;o<e;++o)n=n.B;let s=n.B;for(this.i+=i;i--;)n.B={l:r,L:n},n.B.L=n,n=n.B;n.B=s,s.L=n}return this.i}find(e){let r=this.p;for(;r!==this.h;){if(r.l===e)return new ri(r,this.h,this);r=r.B}return this.end()}reverse(){if(this.i<=1)return;let e=this.p,r=this._,i=0;for(;i<<1<this.i;){let n=e.l;e.l=r.l,r.l=n,e=e.B,r=r.L,i+=1}}unique(){if(this.i<=1)return this.i;let e=this.p;for(;e!==this.h;){let r=e;for(;r.B!==this.h&&r.l===r.B.l;)r=r.B,this.i-=1;e.B=r.B,e.B.L=e,e=e.B}return this.i}sort(e){if(this.i<=1)return;let r=[];this.forEach(function(n){r.push(n)}),r.sort(e);let i=this.p;r.forEach(function(n){i.l=n,i=i.B})}merge(e){let r=this;if(this.i===0)e.forEach(function(i){r.pushBack(i)});else{let i=this.p;e.forEach(function(n){for(;i!==r.h&&i.l<=n;)i=i.B;r.G(n,i.L)})}return this.i}forEach(e){let r=this.p,i=0;for(;r!==this.h;)e(r.l,i++,this),r=r.B}[Symbol.iterator](){return function*(){if(this.i===0)return;let e=this.p;for(;e!==this.h;)yield e.l,e=e.B}.bind(this)()}},HD=Xh;cl.default=HD});var r1=p(hl=>{"use strict";Object.defineProperty(hl,"t",{value:!0});hl.default=void 0;var GD=YD(al()),zD=Jh();function YD(t){return t&&t.t?t:{default:t}}var ii=class t extends zD.RandomIterator{constructor(e,r,i){super(e,i),this.container=r}copy(){return new t(this.o,this.container,this.iteratorType)}},ed=class extends GD.default{constructor(e=[],r=4096){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];let i=(()=>{if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size;if(typeof e.size=="function")return e.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=r,this.P=Math.max(Math.ceil(i/this.F),1);for(let o=0;o<this.P;++o)this.A.push(new Array(this.F));let n=Math.ceil(i/this.F);this.j=this.R=(this.P>>1)-(n>>1),this.D=this.N=this.F-i%this.F>>1;let s=this;e.forEach(function(o){s.pushBack(o)})}T(){let e=[],r=Math.max(this.P>>1,1);for(let i=0;i<r;++i)e[i]=new Array(this.F);for(let i=this.j;i<this.P;++i)e[e.length]=this.A[i];for(let i=0;i<this.R;++i)e[e.length]=this.A[i];e[e.length]=[...this.A[this.R]],this.j=r,this.R=e.length-1;for(let i=0;i<r;++i)e[e.length]=new Array(this.F);this.A=e,this.P=e.length}O(e){let r=this.D+e+1,i=r%this.F,n=i-1,s=this.j+(r-i)/this.F;return i===0&&(s-=1),s%=this.P,n<0&&(n+=this.F),{curNodeBucketIndex:s,curNodePointerIndex:n}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new ii(0,this)}end(){return new ii(this.i,this)}rBegin(){return new ii(this.i-1,this,1)}rEnd(){return new ii(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(e){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=e,this.i}popBack(){if(this.i===0)return;let e=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,e}pushFront(e){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=e,this.i}popFront(){if(this.i===0)return;let e=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,e}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let{curNodeBucketIndex:r,curNodePointerIndex:i}=this.O(e);return this.A[r][i]}setElementByPos(e,r){if(e<0||e>this.i-1)throw new RangeError;let{curNodeBucketIndex:i,curNodePointerIndex:n}=this.O(e);this.A[i][n]=r}insert(e,r,i=1){if(e<0||e>this.i)throw new RangeError;if(e===0)for(;i--;)this.pushFront(r);else if(e===this.i)for(;i--;)this.pushBack(r);else{let n=[];for(let s=e;s<this.i;++s)n.push(this.getElementByPos(s));this.cut(e-1);for(let s=0;s<i;++s)this.pushBack(r);for(let s=0;s<n.length;++s)this.pushBack(n[s])}return this.i}cut(e){if(e<0)return this.clear(),0;let{curNodeBucketIndex:r,curNodePointerIndex:i}=this.O(e);return this.R=r,this.N=i,this.i=e+1,this.i}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;if(e===0)this.popFront();else if(e===this.i-1)this.popBack();else{let r=[];for(let n=e+1;n<this.i;++n)r.push(this.getElementByPos(n));this.cut(e),this.popBack();let i=this;r.forEach(function(n){i.pushBack(n)})}return this.i}eraseElementByValue(e){if(this.i===0)return 0;let r=[];for(let n=0;n<this.i;++n){let s=this.getElementByPos(n);s!==e&&r.push(s)}let i=r.length;for(let n=0;n<i;++n)this.setElementByPos(n,r[n]);return this.cut(i-1)}eraseElementByIterator(e){let r=e.o;return this.eraseElementByPos(r),e=e.next(),e}find(e){for(let r=0;r<this.i;++r)if(this.getElementByPos(r)===e)return new ii(r,this);return this.end()}reverse(){let e=0,r=this.i-1;for(;e<r;){let i=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(r)),this.setElementByPos(r,i),e+=1,r-=1}}unique(){if(this.i<=1)return this.i;let e=1,r=this.getElementByPos(0);for(let i=1;i<this.i;++i){let n=this.getElementByPos(i);n!==r&&(r=n,this.setElementByPos(e++,n))}for(;this.i>e;)this.popBack();return this.i}sort(e){let r=[];for(let i=0;i<this.i;++i)r.push(this.getElementByPos(i));r.sort(e);for(let i=0;i<this.i;++i)this.setElementByPos(i,r[i])}shrinkToFit(){if(this.i===0)return;let e=[];this.forEach(function(r){e.push(r)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let r=0;r<this.P;++r)this.A.push(new Array(this.F));for(let r=0;r<e.length;++r)this.pushBack(e[r])}forEach(e){for(let r=0;r<this.i;++r)e(this.getElementByPos(r),r,this)}[Symbol.iterator](){return function*(){for(let e=0;e<this.i;++e)yield this.getElementByPos(e)}.bind(this)()}},KD=ed;hl.default=KD});var i1=p(an=>{"use strict";Object.defineProperty(an,"t",{value:!0});an.TreeNodeEnableIndex=an.TreeNode=void 0;var dl=class{constructor(e,r){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=e,this.l=r}L(){let e=this;if(e.ee===1&&e.tt.tt===e)e=e.W;else if(e.U)for(e=e.U;e.W;)e=e.W;else{let r=e.tt;for(;r.U===e;)e=r,r=e.tt;e=r}return e}B(){let e=this;if(e.W){for(e=e.W;e.U;)e=e.U;return e}else{let r=e.tt;for(;r.W===e;)e=r,r=e.tt;return e.W!==r?r:e}}te(){let e=this.tt,r=this.W,i=r.U;return e.tt===this?e.tt=r:e.U===this?e.U=r:e.W=r,r.tt=e,r.U=this,this.tt=r,this.W=i,i&&(i.tt=this),r}se(){let e=this.tt,r=this.U,i=r.W;return e.tt===this?e.tt=r:e.U===this?e.U=r:e.W=r,r.tt=e,r.W=this,this.tt=r,this.U=i,i&&(i.tt=this),r}};an.TreeNode=dl;var td=class extends dl{constructor(){super(...arguments),this.rt=1}te(){let e=super.te();return this.ie(),e.ie(),e}se(){let e=super.se();return this.ie(),e.ie(),e}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}};an.TreeNodeEnableIndex=td});var id=p(pl=>{"use strict";Object.defineProperty(pl,"t",{value:!0});pl.default=void 0;var n1=i1(),QD=Ot(),s1=At(),rd=class extends QD.Container{constructor(e=function(i,n){return i<n?-1:i>n?1:0},r=!1){super(),this.Y=void 0,this.v=e,r?(this.re=n1.TreeNodeEnableIndex,this.M=function(i,n,s){let o=this.ne(i,n,s);if(o){let a=o.tt;for(;a!==this.h;)a.rt+=1,a=a.tt;let l=this.he(o);if(l){let{parentNode:u,grandParent:f,curNode:c}=l;u.ie(),f.ie(),c.ie()}}return this.i},this.V=function(i){let n=this.fe(i);for(;n!==this.h;)n.rt-=1,n=n.tt}):(this.re=n1.TreeNode,this.M=function(i,n,s){let o=this.ne(i,n,s);return o&&this.he(o),this.i},this.V=this.fe),this.h=new this.re}X(e,r){let i=this.h;for(;e;){let n=this.v(e.u,r);if(n<0)e=e.W;else if(n>0)i=e,e=e.U;else return e}return i}Z(e,r){let i=this.h;for(;e;)this.v(e.u,r)<=0?e=e.W:(i=e,e=e.U);return i}$(e,r){let i=this.h;for(;e;){let n=this.v(e.u,r);if(n<0)i=e,e=e.W;else if(n>0)e=e.U;else return e}return i}rr(e,r){let i=this.h;for(;e;)this.v(e.u,r)<0?(i=e,e=e.W):e=e.U;return i}ue(e){for(;;){let r=e.tt;if(r===this.h)return;if(e.ee===1){e.ee=0;return}if(e===r.U){let i=r.W;if(i.ee===1)i.ee=0,r.ee=1,r===this.Y?this.Y=r.te():r.te();else if(i.W&&i.W.ee===1){i.ee=r.ee,r.ee=0,i.W.ee=0,r===this.Y?this.Y=r.te():r.te();return}else i.U&&i.U.ee===1?(i.ee=1,i.U.ee=0,i.se()):(i.ee=1,e=r)}else{let i=r.U;if(i.ee===1)i.ee=0,r.ee=1,r===this.Y?this.Y=r.se():r.se();else if(i.U&&i.U.ee===1){i.ee=r.ee,r.ee=0,i.U.ee=0,r===this.Y?this.Y=r.se():r.se();return}else i.W&&i.W.ee===1?(i.ee=1,i.W.ee=0,i.te()):(i.ee=1,e=r)}}}fe(e){if(this.i===1)return this.clear(),this.h;let r=e;for(;r.U||r.W;){if(r.W)for(r=r.W;r.U;)r=r.U;else r=r.U;[e.u,r.u]=[r.u,e.u],[e.l,r.l]=[r.l,e.l],e=r}this.h.U===r?this.h.U=r.tt:this.h.W===r&&(this.h.W=r.tt),this.ue(r);let i=r.tt;return r===i.U?i.U=void 0:i.W=void 0,this.i-=1,this.Y.ee=0,i}oe(e,r){return e===void 0?!1:this.oe(e.U,r)||r(e)?!0:this.oe(e.W,r)}he(e){for(;;){let r=e.tt;if(r.ee===0)return;let i=r.tt;if(r===i.U){let n=i.W;if(n&&n.ee===1){if(n.ee=r.ee=0,i===this.Y)return;i.ee=1,e=i;continue}else if(e===r.W){if(e.ee=0,e.U&&(e.U.tt=r),e.W&&(e.W.tt=i),r.W=e.U,i.U=e.W,e.U=r,e.W=i,i===this.Y)this.Y=e,this.h.tt=e;else{let s=i.tt;s.U===i?s.U=e:s.W=e}return e.tt=i.tt,r.tt=e,i.tt=e,i.ee=1,{parentNode:r,grandParent:i,curNode:e}}else r.ee=0,i===this.Y?this.Y=i.se():i.se(),i.ee=1}else{let n=i.U;if(n&&n.ee===1){if(n.ee=r.ee=0,i===this.Y)return;i.ee=1,e=i;continue}else if(e===r.U){if(e.ee=0,e.U&&(e.U.tt=i),e.W&&(e.W.tt=r),i.W=e.U,r.U=e.W,e.U=i,e.W=r,i===this.Y)this.Y=e,this.h.tt=e;else{let s=i.tt;s.U===i?s.U=e:s.W=e}return e.tt=i.tt,r.tt=e,i.tt=e,i.ee=1,{parentNode:r,grandParent:i,curNode:e}}else r.ee=0,i===this.Y?this.Y=i.te():i.te(),i.ee=1}return}}ne(e,r,i){if(this.Y===void 0){this.i+=1,this.Y=new this.re(e,r),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let n,s=this.h.U,o=this.v(s.u,e);if(o===0){s.l=r;return}else if(o>0)s.U=new this.re(e,r),s.U.tt=s,n=s.U,this.h.U=n;else{let a=this.h.W,l=this.v(a.u,e);if(l===0){a.l=r;return}else if(l<0)a.W=new this.re(e,r),a.W.tt=a,n=a.W,this.h.W=n;else{if(i!==void 0){let u=i.o;if(u!==this.h){let f=this.v(u.u,e);if(f===0){u.l=r;return}else if(f>0){let c=u.L(),h=this.v(c.u,e);if(h===0){c.l=r;return}else h<0&&(n=new this.re(e,r),c.W===void 0?(c.W=n,n.tt=c):(u.U=n,n.tt=u))}}}if(n===void 0)for(n=this.Y;;){let u=this.v(n.u,e);if(u>0){if(n.U===void 0){n.U=new this.re(e,r),n.U.tt=n,n=n.U;break}n=n.U}else if(u<0){if(n.W===void 0){n.W=new this.re(e,r),n.W.tt=n,n=n.W;break}n=n.W}else{n.l=r;return}}}}return this.i+=1,n}I(e,r){for(;e;){let i=this.v(e.u,r);if(i<0)e=e.W;else if(i>0)e=e.U;else return e}return e||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(e,r){let i=e.o;if(i===this.h&&(0,s1.throwIteratorAccessError)(),this.i===1)return i.u=r,!0;if(i===this.h.U)return this.v(i.B().u,r)>0?(i.u=r,!0):!1;if(i===this.h.W)return this.v(i.L().u,r)<0?(i.u=r,!0):!1;let n=i.L().u;if(this.v(n,r)>=0)return!1;let s=i.B().u;return this.v(s,r)<=0?!1:(i.u=r,!0)}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=0,i=this;return this.oe(this.Y,function(n){return e===r?(i.V(n),!0):(r+=1,!1)}),this.i}eraseElementByKey(e){if(this.i===0)return!1;let r=this.I(this.Y,e);return r===this.h?!1:(this.V(r),!0)}eraseElementByIterator(e){let r=e.o;r===this.h&&(0,s1.throwIteratorAccessError)();let i=r.W===void 0;return e.iteratorType===0?i&&e.next():(!i||r.U===void 0)&&e.next(),this.V(r),e}forEach(e){let r=0;for(let i of this)e(i,r++,this)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r,i=0;for(let n of this){if(i===e){r=n;break}i+=1}return r}getHeight(){if(this.i===0)return 0;let e=function(r){return r?Math.max(e(r.U),e(r.W))+1:0};return e(this.Y)}},JD=rd;pl.default=JD});var sd=p(bl=>{"use strict";Object.defineProperty(bl,"t",{value:!0});bl.default=void 0;var ZD=Ot(),gl=At(),nd=class extends ZD.ContainerIterator{constructor(e,r,i){super(i),this.o=e,this.h=r,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,gl.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,gl.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,gl.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,gl.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let e=this.o,r=this.h.tt;if(e===this.h)return r?r.rt-1:0;let i=0;for(e.U&&(i+=e.U.rt);e!==r;){let n=e.tt;e===n.W&&(i+=1,n.U&&(i+=n.U.rt)),e=n}return i}},XD=nd;bl.default=XD});var a1=p(_l=>{"use strict";Object.defineProperty(_l,"t",{value:!0});_l.default=void 0;var eB=o1(id()),tB=o1(sd()),rB=At();function o1(t){return t&&t.t?t:{default:t}}var at=class t extends tB.default{constructor(e,r,i,n){super(e,r,n),this.container=i}get pointer(){return this.o===this.h&&(0,rB.throwIteratorAccessError)(),this.o.u}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},od=class extends eB.default{constructor(e=[],r,i){super(r,i);let n=this;e.forEach(function(s){n.insert(s)})}*K(e){e!==void 0&&(yield*this.K(e.U),yield e.u,yield*this.K(e.W))}begin(){return new at(this.h.U||this.h,this.h,this)}end(){return new at(this.h,this.h,this)}rBegin(){return new at(this.h.W||this.h,this.h,this,1)}rEnd(){return new at(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(e,r){return this.M(e,void 0,r)}find(e){let r=this.I(this.Y,e);return new at(r,this.h,this)}lowerBound(e){let r=this.X(this.Y,e);return new at(r,this.h,this)}upperBound(e){let r=this.Z(this.Y,e);return new at(r,this.h,this)}reverseLowerBound(e){let r=this.$(this.Y,e);return new at(r,this.h,this)}reverseUpperBound(e){let r=this.rr(this.Y,e);return new at(r,this.h,this)}union(e){let r=this;return e.forEach(function(i){r.insert(i)}),this.i}[Symbol.iterator](){return this.K(this.Y)}},iB=od;_l.default=iB});var u1=p(yl=>{"use strict";Object.defineProperty(yl,"t",{value:!0});yl.default=void 0;var nB=l1(id()),sB=l1(sd()),oB=At();function l1(t){return t&&t.t?t:{default:t}}var lt=class t extends sB.default{constructor(e,r,i,n){super(e,r,n),this.container=i}get pointer(){this.o===this.h&&(0,oB.throwIteratorAccessError)();let e=this;return new Proxy([],{get(r,i){if(i==="0")return e.o.u;if(i==="1")return e.o.l},set(r,i,n){if(i!=="1")throw new TypeError("props must be 1");return e.o.l=n,!0}})}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},ad=class extends nB.default{constructor(e=[],r,i){super(r,i);let n=this;e.forEach(function(s){n.setElement(s[0],s[1])})}*K(e){e!==void 0&&(yield*this.K(e.U),yield[e.u,e.l],yield*this.K(e.W))}begin(){return new lt(this.h.U||this.h,this.h,this)}end(){return new lt(this.h,this.h,this)}rBegin(){return new lt(this.h.W||this.h,this.h,this,1)}rEnd(){return new lt(this.h,this.h,this,1)}front(){if(this.i===0)return;let e=this.h.U;return[e.u,e.l]}back(){if(this.i===0)return;let e=this.h.W;return[e.u,e.l]}lowerBound(e){let r=this.X(this.Y,e);return new lt(r,this.h,this)}upperBound(e){let r=this.Z(this.Y,e);return new lt(r,this.h,this)}reverseLowerBound(e){let r=this.$(this.Y,e);return new lt(r,this.h,this)}reverseUpperBound(e){let r=this.rr(this.Y,e);return new lt(r,this.h,this)}setElement(e,r,i){return this.M(e,r,i)}find(e){let r=this.I(this.Y,e);return new lt(r,this.h,this)}getElementByKey(e){return this.I(this.Y,e).l}union(e){let r=this;return e.forEach(function(i){r.setElement(i[0],i[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}},aB=ad;yl.default=aB});var ud=p(ld=>{"use strict";Object.defineProperty(ld,"t",{value:!0});ld.default=lB;function lB(t){let e=typeof t;return e==="object"&&t!==null||e==="function"}});var dd=p(ln=>{"use strict";Object.defineProperty(ln,"t",{value:!0});ln.HashContainerIterator=ln.HashContainer=void 0;var f1=Ot(),fd=uB(ud()),Es=At();function uB(t){return t&&t.t?t:{default:t}}var cd=class extends f1.ContainerIterator{constructor(e,r,i){super(i),this.o=e,this.h=r,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,Es.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,Es.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,Es.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,Es.throwIteratorAccessError)(),this.o=this.o.L,this})}};ln.HashContainerIterator=cd;var hd=class extends f1.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(e){let{L:r,B:i}=e;r.B=i,i.L=r,e===this.p&&(this.p=i),e===this._&&(this._=r),this.i-=1}M(e,r,i){i===void 0&&(i=(0,fd.default)(e));let n;if(i){let s=e[this.HASH_TAG];if(s!==void 0)return this.H[s].l=r,this.i;Object.defineProperty(e,this.HASH_TAG,{value:this.H.length,configurable:!0}),n={u:e,l:r,L:this._,B:this.h},this.H.push(n)}else{let s=this.g[e];if(s)return s.l=r,this.i;n={u:e,l:r,L:this._,B:this.h},this.g[e]=n}return this.i===0?(this.p=n,this.h.B=n):this._.B=n,this._=n,this.h.L=n,++this.i}I(e,r){if(r===void 0&&(r=(0,fd.default)(e)),r){let i=e[this.HASH_TAG];return i===void 0?this.h:this.H[i]}else return this.g[e]||this.h}clear(){let e=this.HASH_TAG;this.H.forEach(function(r){delete r.u[e]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(e,r){let i;if(r===void 0&&(r=(0,fd.default)(e)),r){let n=e[this.HASH_TAG];if(n===void 0)return!1;delete e[this.HASH_TAG],i=this.H[n],delete this.H[n]}else{if(i=this.g[e],i===void 0)return!1;delete this.g[e]}return this.V(i),!0}eraseElementByIterator(e){let r=e.o;return r===this.h&&(0,Es.throwIteratorAccessError)(),this.V(r),e.next()}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return this.V(r),this.i}};ln.HashContainer=hd});var h1=p(ml=>{"use strict";Object.defineProperty(ml,"t",{value:!0});ml.default=void 0;var c1=dd(),fB=At(),ni=class t extends c1.HashContainerIterator{constructor(e,r,i,n){super(e,r,n),this.container=i}get pointer(){return this.o===this.h&&(0,fB.throwIteratorAccessError)(),this.o.u}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},pd=class extends c1.HashContainer{constructor(e=[]){super();let r=this;e.forEach(function(i){r.insert(i)})}begin(){return new ni(this.p,this.h,this)}end(){return new ni(this.h,this.h,this)}rBegin(){return new ni(this._,this.h,this,1)}rEnd(){return new ni(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(e,r){return this.M(e,void 0,r)}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return r.u}find(e,r){let i=this.I(e,r);return new ni(i,this.h,this)}forEach(e){let r=0,i=this.p;for(;i!==this.h;)e(i.u,r++,this),i=i.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield e.u,e=e.B}.bind(this)()}},cB=pd;ml.default=cB});var p1=p(wl=>{"use strict";Object.defineProperty(wl,"t",{value:!0});wl.default=void 0;var d1=dd(),hB=pB(ud()),dB=At();function pB(t){return t&&t.t?t:{default:t}}var si=class t extends d1.HashContainerIterator{constructor(e,r,i,n){super(e,r,n),this.container=i}get pointer(){this.o===this.h&&(0,dB.throwIteratorAccessError)();let e=this;return new Proxy([],{get(r,i){if(i==="0")return e.o.u;if(i==="1")return e.o.l},set(r,i,n){if(i!=="1")throw new TypeError("props must be 1");return e.o.l=n,!0}})}copy(){return new t(this.o,this.h,this.container,this.iteratorType)}},gd=class extends d1.HashContainer{constructor(e=[]){super();let r=this;e.forEach(function(i){r.setElement(i[0],i[1])})}begin(){return new si(this.p,this.h,this)}end(){return new si(this.h,this.h,this)}rBegin(){return new si(this._,this.h,this,1)}rEnd(){return new si(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(e,r,i){return this.M(e,r,i)}getElementByKey(e,r){if(r===void 0&&(r=(0,hB.default)(e)),r){let n=e[this.HASH_TAG];return n!==void 0?this.H[n].l:void 0}let i=this.g[e];return i?i.l:void 0}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let r=this.p;for(;e--;)r=r.B;return[r.u,r.l]}find(e,r){let i=this.I(e,r);return new si(i,this.h,this)}forEach(e){let r=0,i=this.p;for(;i!==this.h;)e([i.u,i.l],r++,this),i=i.B}[Symbol.iterator](){return function*(){let e=this.p;for(;e!==this.h;)yield[e.u,e.l],e=e.B}.bind(this)()}},gB=gd;wl.default=gB});var g1=p(Ye=>{"use strict";Object.defineProperty(Ye,"t",{value:!0});Object.defineProperty(Ye,"Deque",{enumerable:!0,get:function(){return vB.default}});Object.defineProperty(Ye,"HashMap",{enumerable:!0,get:function(){return TB.default}});Object.defineProperty(Ye,"HashSet",{enumerable:!0,get:function(){return xB.default}});Object.defineProperty(Ye,"LinkList",{enumerable:!0,get:function(){return wB.default}});Object.defineProperty(Ye,"OrderedMap",{enumerable:!0,get:function(){return EB.default}});Object.defineProperty(Ye,"OrderedSet",{enumerable:!0,get:function(){return SB.default}});Object.defineProperty(Ye,"PriorityQueue",{enumerable:!0,get:function(){return yB.default}});Object.defineProperty(Ye,"Queue",{enumerable:!0,get:function(){return _B.default}});Object.defineProperty(Ye,"Stack",{enumerable:!0,get:function(){return bB.default}});Object.defineProperty(Ye,"Vector",{enumerable:!0,get:function(){return mB.default}});var bB=Pt(JE()),_B=Pt(ZE()),yB=Pt(XE()),mB=Pt(e1()),wB=Pt(t1()),vB=Pt(r1()),SB=Pt(a1()),EB=Pt(u1()),xB=Pt(h1()),TB=Pt(p1());function Pt(t){return t&&t.t?t:{default:t}}});var _1=p((Q$,b1)=>{"use strict";var RB=g1().OrderedSet,Mt=Tt()("number-allocator:trace"),OB=Tt()("number-allocator:error");function Ae(t,e){this.low=t,this.high=e}Ae.prototype.equals=function(t){return this.low===t.low&&this.high===t.high};Ae.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0};function It(t,e){if(!(this instanceof It))return new It(t,e);this.min=t,this.max=e,this.ss=new RB([],(r,i)=>r.compare(i)),Mt("Create"),this.clear()}It.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low};It.prototype.alloc=function(){if(this.ss.size()===0)return Mt("alloc():empty"),null;let t=this.ss.begin(),e=t.pointer.low,r=t.pointer.high,i=e;return i+1<=r?this.ss.updateKeyByIterator(t,new Ae(e+1,r)):this.ss.eraseElementByPos(0),Mt("alloc():"+i),i};It.prototype.use=function(t){let e=new Ae(t,t),r=this.ss.lowerBound(e);if(!r.equals(this.ss.end())){let i=r.pointer.low,n=r.pointer.high;return r.pointer.equals(e)?(this.ss.eraseElementByIterator(r),Mt("use():"+t),!0):i>t?!1:i===t?(this.ss.updateKeyByIterator(r,new Ae(i+1,n)),Mt("use():"+t),!0):n===t?(this.ss.updateKeyByIterator(r,new Ae(i,n-1)),Mt("use():"+t),!0):(this.ss.updateKeyByIterator(r,new Ae(t+1,n)),this.ss.insert(new Ae(i,t-1)),Mt("use():"+t),!0)}return Mt("use():failed"),!1};It.prototype.free=function(t){if(t<this.min||t>this.max){OB("free():"+t+" is out of range");return}let e=new Ae(t,t),r=this.ss.upperBound(e);if(r.equals(this.ss.end())){if(r.equals(this.ss.begin())){this.ss.insert(e);return}r.pre();let i=r.pointer.high;r.pointer.high+1===t?this.ss.updateKeyByIterator(r,new Ae(i,t)):this.ss.insert(e)}else if(r.equals(this.ss.begin()))if(t+1===r.pointer.low){let i=r.pointer.high;this.ss.updateKeyByIterator(r,new Ae(t,i))}else this.ss.insert(e);else{let i=r.pointer.low,n=r.pointer.high;r.pre();let s=r.pointer.low;r.pointer.high+1===t?t+1===i?(this.ss.eraseElementByIterator(r),this.ss.updateKeyByIterator(r,new Ae(s,n))):this.ss.updateKeyByIterator(r,new Ae(s,t)):t+1===i?(this.ss.eraseElementByIterator(r.next()),this.ss.insert(new Ae(t,n))):this.ss.insert(e)}Mt("free():"+t)};It.prototype.clear=function(){Mt("clear()"),this.ss.clear(),this.ss.insert(new Ae(this.min,this.max))};It.prototype.intervalCount=function(){return this.ss.size()};It.prototype.dump=function(){console.log("length:"+this.ss.size());for(let t of this.ss)console.log(t)};b1.exports=It});var bd=p((J$,y1)=>{"use strict";var AB=_1();y1.exports.NumberAllocator=AB});var m1=p(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});var PB=QE(),MB=bd(),_d=class{constructor(e){e>0&&(this.aliasToTopic=new PB.LRUCache({max:e}),this.topicToAlias={},this.numberAllocator=new MB.NumberAllocator(1,e),this.max=e,this.length=0)}put(e,r){if(r===0||r>this.max)return!1;let i=this.aliasToTopic.get(r);return i&&delete this.topicToAlias[i],this.aliasToTopic.set(r,e),this.topicToAlias[e]=r,this.numberAllocator.use(r),this.length=this.aliasToTopic.size,!0}getTopicByAlias(e){return this.aliasToTopic.get(e)}getAliasByTopic(e){let r=this.topicToAlias[e];return typeof r<"u"&&this.aliasToTopic.get(r),r}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){let e=this.numberAllocator.firstVacant();return e||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}};yd.default=_d});var w1=p(xs=>{"use strict";var IB=xs&&xs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xs,"__esModule",{value:!0});var qB=Ss(),CB=IB(m1()),kB=Xr(),NB=(t,e)=>{t.log("_handleConnack");let{options:r}=t,n=r.protocolVersion===5?e.reasonCode:e.returnCode;if(clearTimeout(t.connackTimer),delete t.topicAliasSend,e.properties){if(e.properties.topicAliasMaximum){if(e.properties.topicAliasMaximum>65535){t.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}e.properties.topicAliasMaximum>0&&(t.topicAliasSend=new CB.default(e.properties.topicAliasMaximum))}e.properties.serverKeepAlive&&r.keepalive&&(r.keepalive=e.properties.serverKeepAlive),e.properties.maximumPacketSize&&(r.properties||(r.properties={}),r.properties.maximumPacketSize=e.properties.maximumPacketSize)}if(n===0)t.reconnecting=!1,t._onConnect(e);else if(n>0){let s=new kB.ErrorWithReasonCode(`Connection refused: ${qB.ReasonCodes[n]}`,n);t.emit("error",s),t.options.reconnectOnConnackError&&t._cleanUp(!0)}};xs.default=NB});var v1=p(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});var LB=(t,e,r)=>{t.log("handling pubrel packet");let i=typeof r<"u"?r:t.noop,{messageId:n}=e,s={cmd:"pubcomp",messageId:n};t.incomingStore.get(e,(o,a)=>{o?t._sendPacket(s,i):(t.emit("message",a.topic,a.payload,a),t.handleMessage(a,l=>{if(l)return i(l);t.incomingStore.del(a,t.noop),t._sendPacket(s,i)}))})};md.default=LB});var S1=p(Ts=>{"use strict";var Rs=Ts&&Ts.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ts,"__esModule",{value:!0});var jB=Rs(UE()),DB=Rs(HE()),BB=Rs(w1()),FB=Rs(Ss()),UB=Rs(v1()),WB=(t,e,r)=>{let{options:i}=t;if(i.protocolVersion===5&&i.properties&&i.properties.maximumPacketSize&&i.properties.maximumPacketSize<e.length)return t.emit("error",new Error(`exceeding packets size ${e.cmd}`)),t.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),t;switch(t.log("_handlePacket :: emitting packetreceive"),t.emit("packetreceive",e),e.cmd){case"publish":(0,jB.default)(t,e,r);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":t.reschedulePing(),(0,FB.default)(t,e),r();break;case"pubrel":t.reschedulePing(),(0,UB.default)(t,e,r);break;case"connack":(0,BB.default)(t,e),r();break;case"auth":t.reschedulePing(),(0,DB.default)(t,e),r();break;case"pingresp":t.log("_handlePacket :: received pingresp"),t.reschedulePing(!0),r();break;case"disconnect":t.emit("disconnect",e),r();break;default:t.log("_handlePacket :: unknown command"),r();break}};Ts.default=WB});var E1=p(un=>{"use strict";var $B=un&&un.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(un,"__esModule",{value:!0});un.TypedEventEmitter=void 0;var VB=$B(E("events")),HB=Xr(),vl=class{};un.TypedEventEmitter=vl;(0,HB.applyMixin)(vl,VB.default)});var Os=p(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.isReactNativeBrowser=oi.isWebWorker=void 0;var GB=()=>{var t;return typeof window<"u"?typeof navigator<"u"&&((t=navigator.userAgent)===null||t===void 0?void 0:t.toLowerCase().indexOf(" electron/"))>-1&&(process!=null&&process.versions)?!Object.prototype.hasOwnProperty.call(process.versions,"electron"):typeof window.document<"u":!1},x1=()=>{var t,e;return!!(typeof self=="object"&&(!((e=(t=self?.constructor)===null||t===void 0?void 0:t.name)===null||e===void 0)&&e.includes("WorkerGlobalScope")))},T1=()=>typeof navigator<"u"&&navigator.product==="ReactNative",zB=GB()||x1()||T1();oi.isWebWorker=x1();oi.isReactNativeBrowser=T1();oi.default=zB});var R1=p(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.createAddUniqueNumber=void 0;var YB=t=>e=>{let r=t(e);return e.add(r),r};Sl.createAddUniqueNumber=YB});var O1=p(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.createCache=void 0;var KB=t=>(e,r)=>(t.set(e,r),r);El.createCache=KB});var I1=p(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.createGenerateUniqueNumber=void 0;var A1=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,M1=536870912,P1=M1*2,QB=(t,e)=>r=>{let i=e.get(r),n=i===void 0?r.size:i<P1?i+1:0;if(!r.has(n))return t(r,n);if(r.size<M1){for(;r.has(n);)n=Math.floor(Math.random()*P1);return t(r,n)}if(r.size>A1)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;r.has(n);)n=Math.floor(Math.random()*A1);return t(r,n)};xl.createGenerateUniqueNumber=QB});var C1=p(q1=>{"use strict";Object.defineProperty(q1,"__esModule",{value:!0})});var N1=p(k1=>{"use strict";Object.defineProperty(k1,"__esModule",{value:!0})});var j1=p(L1=>{"use strict";Object.defineProperty(L1,"__esModule",{value:!0})});var B1=p(D1=>{"use strict";Object.defineProperty(D1,"__esModule",{value:!0})});var U1=p(F1=>{"use strict";Object.defineProperty(F1,"__esModule",{value:!0})});var $1=p(W1=>{"use strict";Object.defineProperty(W1,"__esModule",{value:!0})});var V1=p(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});var wd=C1();Object.keys(wd).forEach(function(t){t==="default"||t==="__esModule"||t in le&&le[t]===wd[t]||Object.defineProperty(le,t,{enumerable:!0,get:function(){return wd[t]}})});var vd=N1();Object.keys(vd).forEach(function(t){t==="default"||t==="__esModule"||t in le&&le[t]===vd[t]||Object.defineProperty(le,t,{enumerable:!0,get:function(){return vd[t]}})});var Sd=j1();Object.keys(Sd).forEach(function(t){t==="default"||t==="__esModule"||t in le&&le[t]===Sd[t]||Object.defineProperty(le,t,{enumerable:!0,get:function(){return Sd[t]}})});var Ed=B1();Object.keys(Ed).forEach(function(t){t==="default"||t==="__esModule"||t in le&&le[t]===Ed[t]||Object.defineProperty(le,t,{enumerable:!0,get:function(){return Ed[t]}})});var xd=U1();Object.keys(xd).forEach(function(t){t==="default"||t==="__esModule"||t in le&&le[t]===xd[t]||Object.defineProperty(le,t,{enumerable:!0,get:function(){return xd[t]}})});var Td=$1();Object.keys(Td).forEach(function(t){t==="default"||t==="__esModule"||t in le&&le[t]===Td[t]||Object.defineProperty(le,t,{enumerable:!0,get:function(){return Td[t]}})})});var G1=p(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});var JB={addUniqueNumber:!0,generateUniqueNumber:!0};Ft.generateUniqueNumber=Ft.addUniqueNumber=void 0;var ZB=R1(),XB=O1(),e3=I1(),Rd=V1();Object.keys(Rd).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(JB,t)||t in Ft&&Ft[t]===Rd[t]||Object.defineProperty(Ft,t,{enumerable:!0,get:function(){return Rd[t]}})});var H1=new WeakMap,t3=(0,XB.createCache)(H1),r3=Ft.generateUniqueNumber=(0,e3.createGenerateUniqueNumber)(t3,H1),p6=Ft.addUniqueNumber=(0,ZB.createAddUniqueNumber)(r3)});var Y1=p((Tl,z1)=>{"use strict";(function(t,e){typeof Tl=="object"&&typeof z1<"u"?e(Tl,G1()):typeof define=="function"&&define.amd?define(["exports","fast-unique-numbers"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.workerTimersBroker={},t.fastUniqueNumbers))})(Tl,function(t,e){"use strict";var r=function(o){return o.method!==void 0&&o.method==="call"},i=function(o){return o.error===null&&typeof o.id=="number"},n=function(o){var a=new Map([[0,function(){}]]),l=new Map([[0,function(){}]]),u=new Map,f=new Worker(o);f.addEventListener("message",function(g){var y=g.data;if(r(y)){var _=y.params,m=_.timerId,S=_.timerType;if(S==="interval"){var w=a.get(m);if(typeof w=="number"){var T=u.get(w);if(T===void 0||T.timerId!==m||T.timerType!==S)throw new Error("The timer is in an undefined state.")}else if(typeof w<"u")w();else throw new Error("The timer is in an undefined state.")}else if(S==="timeout"){var M=l.get(m);if(typeof M=="number"){var O=u.get(M);if(O===void 0||O.timerId!==m||O.timerType!==S)throw new Error("The timer is in an undefined state.")}else if(typeof M<"u")M(),l.delete(m);else throw new Error("The timer is in an undefined state.")}}else if(i(y)){var N=y.id,R=u.get(N);if(R===void 0)throw new Error("The timer is in an undefined state.");var $=R.timerId,te=R.timerType;u.delete(N),te==="interval"?a.delete($):l.delete($)}else{var oe=y.error.message;throw new Error(oe)}});var c=function(y){var _=e.generateUniqueNumber(u);u.set(_,{timerId:y,timerType:"interval"}),a.set(y,_),f.postMessage({id:_,method:"clear",params:{timerId:y,timerType:"interval"}})},h=function(y){var _=e.generateUniqueNumber(u);u.set(_,{timerId:y,timerType:"timeout"}),l.set(y,_),f.postMessage({id:_,method:"clear",params:{timerId:y,timerType:"timeout"}})},b=function(y){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=e.generateUniqueNumber(a);return a.set(m,function(){y(),typeof a.get(m)=="function"&&f.postMessage({id:null,method:"set",params:{delay:_,now:performance.now(),timerId:m,timerType:"interval"}})}),f.postMessage({id:null,method:"set",params:{delay:_,now:performance.now(),timerId:m,timerType:"interval"}}),m},d=function(y){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=e.generateUniqueNumber(l);return l.set(m,y),f.postMessage({id:null,method:"set",params:{delay:_,now:performance.now(),timerId:m,timerType:"timeout"}}),m};return{clearInterval:c,clearTimeout:h,setInterval:b,setTimeout:d}};t.load=n})});var Q1=p((Rl,K1)=>{"use strict";(function(t,e){typeof Rl=="object"&&typeof K1<"u"?e(Rl,Y1()):typeof define=="function"&&define.amd?define(["exports","worker-timers-broker"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.workerTimers={},t.workerTimersBroker))})(Rl,function(t,e){"use strict";var r=function(f,c){var h=null;return function(){if(h!==null)return h;var b=new Blob([c],{type:"application/javascript; charset=utf-8"}),d=URL.createObjectURL(b);return h=f(d),setTimeout(function(){return URL.revokeObjectURL(d)}),h}},i=`(()=>{var e={472:(e,t,r)=>{var o,i;void 0===(i="function"==typeof(o=function(){"use strict";var e=new Map,t=new Map,r=function(t){var r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)},o=function(e){var r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)},i=function(e,t){var r,o=performance.now();return{expected:o+(r=e-Math.max(0,o-t)),remainingDelay:r}},n=function e(t,r,o,i){var n=performance.now();n>o?postMessage({id:null,method:"call",params:{timerId:r,timerType:i}}):t.set(r,setTimeout(e,o-n,t,r,o,i))},a=function(t,r,o){var a=i(t,o),s=a.expected,d=a.remainingDelay;e.set(r,setTimeout(n,d,e,r,s,"interval"))},s=function(e,r,o){var a=i(e,o),s=a.expected,d=a.remainingDelay;t.set(r,setTimeout(n,d,t,r,s,"timeout"))};addEventListener("message",(function(e){var t=e.data;try{if("clear"===t.method){var i=t.id,n=t.params,d=n.timerId,c=n.timerType;if("interval"===c)r(d),postMessage({error:null,id:i});else{if("timeout"!==c)throw new Error('The given type "'.concat(c,'" is not supported'));o(d),postMessage({error:null,id:i})}}else{if("set"!==t.method)throw new Error('The given method "'.concat(t.method,'" is not supported'));var u=t.params,l=u.delay,p=u.now,m=u.timerId,v=u.timerType;if("interval"===v)a(l,m,p);else{if("timeout"!==v)throw new Error('The given type "'.concat(v,'" is not supported'));s(l,m,p)}}}catch(e){postMessage({error:{message:e.message},id:t.id,result:null})}}))})?o.call(t,r,t,e):o)||(e.exports=i)}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";r(472)})()})();`,n=r(e.load,i),s=function(f){return n().clearInterval(f)},o=function(f){return n().clearTimeout(f)},a=function(){var f;return(f=n()).setInterval.apply(f,arguments)},l=function(){var f;return(f=n()).setTimeout.apply(f,arguments)};t.clearInterval=s,t.clearTimeout=o,t.setInterval=a,t.setTimeout=l})});var ex=p(Ut=>{"use strict";var i3=Ut&&Ut.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),n3=Ut&&Ut.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s3=Ut&&Ut.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&i3(e,t,r);return n3(e,t),e};Object.defineProperty(Ut,"__esModule",{value:!0});var Od=s3(Os()),J1=Q1(),Z1={set:J1.setInterval,clear:J1.clearInterval},X1={set:(t,e)=>setInterval(t,e),clear:t=>clearInterval(t)},o3=t=>{switch(t){case"native":return X1;case"worker":return Z1;case"auto":default:return Od.default&&!Od.isWebWorker&&!Od.isReactNativeBrowser?Z1:X1}};Ut.default=o3});var Pd=p(As=>{"use strict";var a3=As&&As.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(As,"__esModule",{value:!0});var l3=a3(ex()),Ad=class{get keepaliveTimeoutTimestamp(){return this._keepaliveTimeoutTimestamp}get intervalEvery(){return this._intervalEvery}get keepalive(){return this._keepalive}constructor(e,r){this.destroyed=!1,this.client=e,this.timer=typeof r=="object"&&"set"in r&&"clear"in r?r:(0,l3.default)(r),this.setKeepalive(e.options.keepalive)}clear(){this.timerId&&(this.timer.clear(this.timerId),this.timerId=null)}setKeepalive(e){if(e*=1e3,isNaN(e)||e<=0||e>2147483647)throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${e}`);this._keepalive=e,this.reschedule(),this.client.log(`KeepaliveManager: set keepalive to ${e}ms`)}destroy(){this.clear(),this.destroyed=!0}reschedule(){if(this.destroyed)return;this.clear(),this.counter=0;let e=Math.ceil(this._keepalive*1.5);this._keepaliveTimeoutTimestamp=Date.now()+e,this._intervalEvery=Math.ceil(this._keepalive/2),this.timerId=this.timer.set(()=>{this.destroyed||(this.counter+=1,this.counter===2?this.client.sendPing():this.counter>2&&this.client.onKeepaliveTimeout())},this._intervalEvery)}};As.default=Ad});var Pl=p(ut=>{"use strict";var u3=ut&&ut.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),f3=ut&&ut.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),sx=ut&&ut.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&u3(e,t,r);return f3(e,t),e},mr=ut&&ut.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ut,"__esModule",{value:!0});var c3=mr(J0()),Md=mr(CE()),h3=mr(Ch()),d3=hr(),tx=mr(jE()),rx=sx(BE()),p3=mr(Tt()),fn=mr(Lh()),g3=mr(S1()),Ol=Xr(),b3=E1(),_3=mr(Pd()),ix=sx(Os()),Id=globalThis.setImmediate||((...t)=>{let e=t.shift();(0,Ol.nextTick)(()=>{e(...t)})}),nx={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0,timerVariant:"auto"},Al=class t extends b3.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(e,r){super(),this.options=r||{};for(let i in nx)typeof this.options[i]>"u"?this.options[i]=nx[i]:this.options[i]=r[i];this.log=this.options.log||(0,p3.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: version:",t.VERSION),ix.isWebWorker?this.log("MqttClient :: environment","webworker"):this.log("MqttClient :: environment",ix.default?"browser":"node"),this.log("MqttClient :: options.protocol",r.protocol),this.log("MqttClient :: options.protocolVersion",r.protocolVersion),this.log("MqttClient :: options.username",r.username),this.log("MqttClient :: options.keepalive",r.keepalive),this.log("MqttClient :: options.reconnectPeriod",r.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",r.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",r.properties?r.properties.topicAliasMaximum:void 0),this.options.clientId=typeof r.clientId=="string"?r.clientId:t.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=r.protocolVersion===5&&r.customHandleAcks?r.customHandleAcks:(...i)=>{i[3](null,0)},this.options.writeCache||(Md.default.writeToStream.cacheNumbers=!1),this.streamBuilder=e,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new h3.default:this.options.messageIdProvider,this.outgoingStore=r.outgoingStore||new fn.default,this.incomingStore=r.incomingStore||new fn.default,this.queueQoSZero=r.queueQoSZero===void 0?!0:r.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.keepaliveManager=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,r.properties&&r.properties.topicAliasMaximum>0&&(r.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new c3.default(r.properties.topicAliasMaximum)),this.on("connect",()=>{let{queue:i}=this,n=()=>{let s=i.shift();this.log("deliver :: entry %o",s);let o=null;if(!s){this._resubscribe();return}o=s.packet,this.log("deliver :: call _sendPacket for %o",o);let a=!0;o.messageId&&o.messageId!==0&&(this.messageIdProvider.register(o.messageId)||(a=!1)),a?this._sendPacket(o,l=>{s.cb&&s.cb(l),n()}):(this.log("messageId: %d has already used. The message is skipped and removed.",o.messageId),n())};this.log("connect :: sending queued packets"),n()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this._destroyKeepaliveManager(),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(e,r){r()}handleMessage(e,r){r()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var e;let r=new d3.Writable,i=Md.default.parser(this.options),n=null,s=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.disconnected&&!this.reconnecting&&(this.incomingStore=this.options.incomingStore||new fn.default,this.outgoingStore=this.options.outgoingStore||new fn.default,this.disconnecting=!1,this.disconnected=!1),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),i.on("packet",f=>{this.log("parser :: on packet push to packets array."),s.push(f)});let o=()=>{this.log("work :: getting next packet in queue");let f=s.shift();if(f)this.log("work :: packet pulled from queue"),(0,g3.default)(this,f,a);else{this.log("work :: no packets in queue");let c=n;n=null,this.log("work :: done flag is %s",!!c),c&&c()}},a=()=>{if(s.length)(0,Ol.nextTick)(o);else{let f=n;n=null,f()}};r._write=(f,c,h)=>{n=h,this.log("writable stream :: parsing buffer"),i.parse(f),o()};let l=f=>{this.log("streamErrorHandler :: error",f.message),f.code?(this.log("streamErrorHandler :: emitting error"),this.emit("error",f)):this.noop(f)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(r),this.stream.on("error",l),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");let u={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(u.will=Object.assign(Object.assign({},this.options.will),{payload:(e=this.options.will)===null||e===void 0?void 0:e.payload})),this.topicAliasRecv&&(u.properties||(u.properties={}),this.topicAliasRecv&&(u.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(u),i.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){let f=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(f)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this.emit("error",new Error("connack timeout")),this._cleanUp(!0)},this.options.connectTimeout),this}publish(e,r,i,n){this.log("publish :: message `%s` to topic `%s`",r,e);let{options:s}=this;typeof i=="function"&&(n=i,i=null),i=i||{},i=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),i);let{qos:a,retain:l,dup:u,properties:f,cbStorePut:c}=i;if(this._checkDisconnecting(n))return this;let h=()=>{let b=0;if((a===1||a===2)&&(b=this._nextId(),b===null))return this.log("No messageId left"),!1;let d={cmd:"publish",topic:e,payload:r,qos:a,retain:l,messageId:b,dup:u};switch(s.protocolVersion===5&&(d.properties=f),this.log("publish :: qos",a),a){case 1:case 2:this.outgoing[d.messageId]={volatile:!1,cb:n||this.noop},this.log("MqttClient:publish: packet cmd: %s",d.cmd),this._sendPacket(d,void 0,c);break;default:this.log("MqttClient:publish: packet cmd: %s",d.cmd),this._sendPacket(d,n,c);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!h())&&this._storeProcessingQueue.push({invoke:h,cbStorePut:i.cbStorePut,callback:n}),this}publishAsync(e,r,i){return new Promise((n,s)=>{this.publish(e,r,i,(o,a)=>{o?s(o):n(a)})})}subscribe(e,r,i){let n=this.options.protocolVersion;typeof r=="function"&&(i=r),i=i||this.noop;let s=!1,o=[];typeof e=="string"?(e=[e],o=e):Array.isArray(e)?o=e:typeof e=="object"&&(s=e.resubscribe,delete e.resubscribe,o=Object.keys(e));let a=rx.validateTopics(o);if(a!==null)return Id(i,new Error(`Invalid topic ${a}`)),this;if(this._checkDisconnecting(i))return this.log("subscribe: discconecting true"),this;let l={qos:0};n===5&&(l.nl=!1,l.rap=!1,l.rh=0),r=Object.assign(Object.assign({},l),r);let u=r.properties,f=[],c=(b,d)=>{if(d=d||r,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,b)||this._resubscribeTopics[b].qos<d.qos||s){let g={topic:b,qos:d.qos};n===5&&(g.nl=d.nl,g.rap=d.rap,g.rh=d.rh,g.properties=u),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",g.topic,g.qos),f.push(g)}};if(Array.isArray(e)?e.forEach(b=>{this.log("subscribe: array topic %s",b),c(b)}):Object.keys(e).forEach(b=>{this.log("subscribe: object topic %s, %o",b,e[b]),c(b,e[b])}),!f.length)return i(null,[]),this;let h=()=>{let b=this._nextId();if(b===null)return this.log("No messageId left"),!1;let d={cmd:"subscribe",subscriptions:f,messageId:b};if(u&&(d.properties=u),this.options.resubscribe){this.log("subscribe :: resubscribe true");let g=[];f.forEach(y=>{if(this.options.reconnectPeriod>0){let _={qos:y.qos};n===5&&(_.nl=y.nl||!1,_.rap=y.rap||!1,_.rh=y.rh||0,_.properties=y.properties),this._resubscribeTopics[y.topic]=_,g.push(y.topic)}}),this.messageIdToTopic[d.messageId]=g}return this.outgoing[d.messageId]={volatile:!0,cb(g,y){if(!g){let{granted:_}=y;for(let m=0;m<_.length;m+=1)f[m].qos=_[m]}i(g,f,y)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(d),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!h())&&this._storeProcessingQueue.push({invoke:h,callback:i}),this}subscribeAsync(e,r){return new Promise((i,n)=>{this.subscribe(e,r,(s,o)=>{s?n(s):i(o)})})}unsubscribe(e,r,i){typeof e=="string"&&(e=[e]),typeof r=="function"&&(i=r),i=i||this.noop;let n=rx.validateTopics(e);if(n!==null)return Id(i,new Error(`Invalid topic ${n}`)),this;if(this._checkDisconnecting(i))return this;let s=()=>{let o=this._nextId();if(o===null)return this.log("No messageId left"),!1;let a={cmd:"unsubscribe",messageId:o,unsubscriptions:[]};return typeof e=="string"?a.unsubscriptions=[e]:Array.isArray(e)&&(a.unsubscriptions=e),this.options.resubscribe&&a.unsubscriptions.forEach(l=>{delete this._resubscribeTopics[l]}),typeof r=="object"&&r.properties&&(a.properties=r.properties),this.outgoing[a.messageId]={volatile:!0,cb:i},this.log("unsubscribe: call _sendPacket"),this._sendPacket(a),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!s())&&this._storeProcessingQueue.push({invoke:s,callback:i}),this}unsubscribeAsync(e,r){return new Promise((i,n)=>{this.unsubscribe(e,r,(s,o)=>{s?n(s):i(o)})})}end(e,r,i){this.log("end :: (%s)",this.options.clientId),(e==null||typeof e!="boolean")&&(i=i||r,r=e,e=!1),typeof r!="object"&&(i=i||r,r=null),this.log("end :: cb? %s",!!i),(!i||typeof i!="function")&&(i=this.noop);let n=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(o=>{this.outgoingStore.close(a=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),i){let l=o||a;this.log("end :: closeStores: invoking callback with args"),i(l)}})}),this._deferredReconnect?this._deferredReconnect():(this.options.reconnectPeriod===0||this.options.manualConnect)&&(this.disconnecting=!1)},s=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,e),this._cleanUp(e,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),(0,Ol.nextTick)(n)},r)};return this.disconnecting?(i(),this):(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,s,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),s()),this)}endAsync(e,r){return new Promise((i,n)=>{this.end(e,r,s=>{s?n(s):i()})})}removeOutgoingMessage(e){if(this.outgoing[e]){let{cb:r}=this.outgoing[e];this._removeOutgoingAndStoreMessage(e,()=>{r(new Error("Message removed"))})}return this}reconnect(e){this.log("client reconnect");let r=()=>{e?(this.options.incomingStore=e.incomingStore,this.options.outgoingStore=e.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new fn.default,this.outgoingStore=this.options.outgoingStore||new fn.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(e=>{this.outgoing[e].volatile&&typeof this.outgoing[e].cb=="function"&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(e=>{typeof this.outgoing[e].cb=="function"&&(this.outgoing[e].cb(new Error("Connection closed")),delete this.outgoing[e])}))}_removeTopicAliasAndRecoverTopicName(e){let r;e.properties&&(r=e.properties.topicAlias);let i=e.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",r,i),i.length===0){if(typeof r>"u")return new Error("Unregistered Topic Alias");if(i=this.topicAliasSend.getTopicByAlias(r),typeof i>"u")return new Error("Unregistered Topic Alias");e.topic=i}r&&delete e.properties.topicAlias}_checkDisconnecting(e){return this.disconnecting&&(e&&e!==this.noop?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(e,r,i={}){if(r&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",r)),this.log("_cleanUp :: forced? %s",e),e)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{let n=Object.assign({cmd:"disconnect"},i);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(n,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),Id(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}!this.disconnecting&&!this.reconnecting&&(this.log("_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this._destroyKeepaliveManager(),r&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",r),r())}_storeAndSend(e,r,i){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",e.cmd);let n=e,s;if(n.cmd==="publish"&&(n=(0,tx.default)(e),s=this._removeTopicAliasAndRecoverTopicName(n),s))return r&&r(s);this.outgoingStore.put(n,o=>{if(o)return r&&r(o);i(),this._writePacket(e,r)})}_applyTopicAlias(e){if(this.options.protocolVersion===5&&e.cmd==="publish"){let r;e.properties&&(r=e.properties.topicAlias);let i=e.topic.toString();if(this.topicAliasSend)if(r){if(i.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",i,r),!this.topicAliasSend.put(i,r)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",i,r),new Error("Sending Topic Alias out of range")}else i.length!==0&&(this.options.autoAssignTopicAlias?(r=this.topicAliasSend.getAliasByTopic(i),r?(e.topic="",e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:r}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",i,r)):(r=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(i,r),e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:r}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",i,r))):this.options.autoUseTopicAlias&&(r=this.topicAliasSend.getAliasByTopic(i),r&&(e.topic="",e.properties=Object.assign(Object.assign({},e.properties),{topicAlias:r}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",i,r))));else if(r)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",i,r),new Error("Sending Topic Alias out of range")}}_noop(e){this.log("noop ::",e)}_writePacket(e,r){this.log("_writePacket :: packet: %O",e),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",e),this.log("_writePacket :: writing to stream");let i=Md.default.writeToStream(e,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",i),!i&&r&&r!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",r)):r&&(this.log("_writePacket :: invoking cb"),r())}_sendPacket(e,r,i,n){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),i=i||this.noop,r=r||this.noop;let s=this._applyTopicAlias(e);if(s){r(s);return}if(!this.connected){if(e.cmd==="auth"){this._writePacket(e,r);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(e,r,i);return}if(n){this._writePacket(e,r);return}switch(e.cmd){case"publish":break;case"pubrel":this._storeAndSend(e,r,i);return;default:this._writePacket(e,r);return}switch(e.qos){case 2:case 1:this._storeAndSend(e,r,i);break;case 0:default:this._writePacket(e,r);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(e,r,i){this.log("_storePacket :: packet: %o",e),this.log("_storePacket :: cb? %s",!!r),i=i||this.noop;let n=e;if(n.cmd==="publish"){n=(0,tx.default)(e);let o=this._removeTopicAliasAndRecoverTopicName(n);if(o)return r&&r(o)}let s=n.qos||0;s===0&&this.queueQoSZero||n.cmd!=="publish"?this.queue.push({packet:n,cb:r}):s>0?(r=this.outgoing[n.messageId]?this.outgoing[n.messageId].cb:null,this.outgoingStore.put(n,o=>{if(o)return r&&r(o);i()})):r&&r(new Error("No connection to broker"))}_setupKeepaliveManager(){this.log("_setupKeepaliveManager :: keepalive %d (seconds)",this.options.keepalive),!this.keepaliveManager&&this.options.keepalive&&(this.keepaliveManager=new _3.default(this,this.options.timerVariant))}_destroyKeepaliveManager(){this.keepaliveManager&&(this.log("_destroyKeepaliveManager :: destroying keepalive manager"),this.keepaliveManager.destroy(),this.keepaliveManager=null)}reschedulePing(e=!1){this.keepaliveManager&&this.options.keepalive&&(e||this.options.reschedulePings)&&this._reschedulePing()}_reschedulePing(){this.log("_reschedulePing :: rescheduling ping"),this.keepaliveManager.reschedule()}sendPing(){this.log("_sendPing :: sending pingreq"),this._sendPacket({cmd:"pingreq"})}onKeepaliveTimeout(){this.emit("error",new Error("Keepalive timeout")),this.log("onKeepaliveTimeout :: calling _cleanUp with force true"),this._cleanUp(!0)}_resubscribe(){this.log("_resubscribe");let e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&e.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let r=0;r<e.length;r++){let i={};i[e[r]]=this._resubscribeTopics[e[r]],i.resubscribe=!0,this.subscribe(i,{properties:i[e[r]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(e){if(this.disconnected){this.emit("connect",e);return}this.connackPacket=e,this.messageIdProvider.clear(),this._setupKeepaliveManager(),this.connected=!0;let r=()=>{let i=this.outgoingStore.createStream(),n=()=>{i.destroy(),i=null,this._flushStoreProcessingQueue(),s()},s=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",n),i.on("error",a=>{s(),this._flushStoreProcessingQueue(),this.removeListener("close",n),this.emit("error",a)});let o=()=>{if(!i)return;let a=i.read(1),l;if(!a){i.once("readable",o);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[a.messageId]){o();return}!this.disconnecting&&!this.reconnectTimer?(l=this.outgoing[a.messageId]?this.outgoing[a.messageId].cb:null,this.outgoing[a.messageId]={volatile:!1,cb(u,f){l&&l(u,f),o()}},this._packetIdsDuringStoreProcessing[a.messageId]=!0,this.messageIdProvider.register(a.messageId)?this._sendPacket(a,void 0,void 0,!0):this.log("messageId: %d has already used.",a.messageId)):i.destroy&&i.destroy()};i.on("end",()=>{let a=!0;for(let l in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[l]){a=!1;break}this.removeListener("close",n),a?(s(),this._invokeAllStoreProcessingQueue(),this.emit("connect",e)):r()}),o()};r()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){let e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(let e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(e,r){delete this.outgoing[e],this.outgoingStore.del({messageId:e},(i,n)=>{r(i,n),this.messageIdProvider.deallocate(e),this._invokeStoreProcessingQueue()})}};Al.VERSION=Ol.MQTTJS_VERSION;ut.default=Al});var ox=p(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});var y3=bd(),qd=class{constructor(){this.numberAllocator=new y3.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(e){return this.numberAllocator.use(e)}deallocate(e){this.numberAllocator.free(e)}clear(){this.numberAllocator.clear()}};Cd.default=qd});var Wt=p((w6,ux)=>{"use strict";var ax=["nodebuffer","arraybuffer","fragments"],lx=typeof Blob<"u";lx&&ax.push("blob");ux.exports={BINARY_TYPES:ax,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:lx,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Ps=p((v6,Ml)=>{"use strict";var{EMPTY_BUFFER:m3}=Wt(),kd=Buffer[Symbol.species];function w3(t,e){if(t.length===0)return m3;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),i=0;for(let n=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return i<e?new kd(r.buffer,r.byteOffset,i):r}function fx(t,e,r,i,n){for(let s=0;s<n;s++)r[i+s]=t[s]^e[s&3]}function cx(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function v3(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function Nd(t){if(Nd.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new kd(t):ArrayBuffer.isView(t)?e=new kd(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),Nd.readOnly=!1),e}Ml.exports={concat:w3,mask:fx,toArrayBuffer:v3,toBuffer:Nd,unmask:cx};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=E("bufferutil");Ml.exports.mask=function(e,r,i,n,s){s<48?fx(e,r,i,n,s):t.mask(e,r,i,n,s)},Ml.exports.unmask=function(e,r){e.length<32?cx(e,r):t.unmask(e,r)}}catch{}});var px=p((S6,dx)=>{"use strict";var hx=Symbol("kDone"),Ld=Symbol("kRun"),jd=class{constructor(e){this[hx]=()=>{this.pending--,this[Ld]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[Ld]()}[Ld](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[hx])}}};dx.exports=jd});var qs=p((E6,yx)=>{"use strict";var Ms=E("zlib"),gx=Ps(),S3=px(),{kStatusCode:bx}=Wt(),E3=Buffer[Symbol.species],x3=Buffer.from([0,0,255,255]),Cl=Symbol("permessage-deflate"),$t=Symbol("total-length"),Is=Symbol("callback"),wr=Symbol("buffers"),ql=Symbol("error"),Il,Dd=class{constructor(e,r,i){if(this._maxPayload=i|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!Il){let n=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;Il=new S3(n)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Is];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,i=e.find(n=>!(r.serverNoContextTakeover===!1&&n.server_no_context_takeover||n.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>n.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!n.client_max_window_bits));if(!i)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(i.server_no_context_takeover=!0),r.clientNoContextTakeover&&(i.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(i.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?i.client_max_window_bits=r.clientMaxWindowBits:(i.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete i.client_max_window_bits,i}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(i=>{let n=r[i];if(n.length>1)throw new Error(`Parameter "${i}" must have only a single value`);if(n=n[0],i==="client_max_window_bits"){if(n!==!0){let s=+n;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${i}": ${n}`);n=s}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${i}": ${n}`)}else if(i==="server_max_window_bits"){let s=+n;if(!Number.isInteger(s)||s<8||s>15)throw new TypeError(`Invalid value for parameter "${i}": ${n}`);n=s}else if(i==="client_no_context_takeover"||i==="server_no_context_takeover"){if(n!==!0)throw new TypeError(`Invalid value for parameter "${i}": ${n}`)}else throw new Error(`Unknown parameter "${i}"`);r[i]=n})}),e}decompress(e,r,i){Il.add(n=>{this._decompress(e,r,(s,o)=>{n(),i(s,o)})})}compress(e,r,i){Il.add(n=>{this._compress(e,r,(s,o)=>{n(),i(s,o)})})}_decompress(e,r,i){let n=this._isServer?"client":"server";if(!this._inflate){let s=`${n}_max_window_bits`,o=typeof this.params[s]!="number"?Ms.Z_DEFAULT_WINDOWBITS:this.params[s];this._inflate=Ms.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[Cl]=this,this._inflate[$t]=0,this._inflate[wr]=[],this._inflate.on("error",R3),this._inflate.on("data",_x)}this._inflate[Is]=i,this._inflate.write(e),r&&this._inflate.write(x3),this._inflate.flush(()=>{let s=this._inflate[ql];if(s){this._inflate.close(),this._inflate=null,i(s);return}let o=gx.concat(this._inflate[wr],this._inflate[$t]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[$t]=0,this._inflate[wr]=[],r&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),i(null,o)})}_compress(e,r,i){let n=this._isServer?"server":"client";if(!this._deflate){let s=`${n}_max_window_bits`,o=typeof this.params[s]!="number"?Ms.Z_DEFAULT_WINDOWBITS:this.params[s];this._deflate=Ms.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[$t]=0,this._deflate[wr]=[],this._deflate.on("data",T3)}this._deflate[Is]=i,this._deflate.write(e),this._deflate.flush(Ms.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let s=gx.concat(this._deflate[wr],this._deflate[$t]);r&&(s=new E3(s.buffer,s.byteOffset,s.length-4)),this._deflate[Is]=null,this._deflate[$t]=0,this._deflate[wr]=[],r&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),i(null,s)})}};yx.exports=Dd;function T3(t){this[wr].push(t),this[$t]+=t.length}function _x(t){if(this[$t]+=t.length,this[Cl]._maxPayload<1||this[$t]<=this[Cl]._maxPayload){this[wr].push(t);return}this[ql]=new RangeError("Max payload size exceeded"),this[ql].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[ql][bx]=1009,this.removeListener("data",_x),this.reset()}function R3(t){this[Cl]._inflate=null,t[bx]=1007,this[Is](t)}});var cn=p((x6,kl)=>{"use strict";var{isUtf8:mx}=E("buffer"),{hasBlob:O3}=Wt(),A3=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function P3(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function Bd(t){let e=t.length,r=0;for(;r<e;)if(!(t[r]&128))r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function M3(t){return O3&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}kl.exports={isBlob:M3,isValidStatusCode:P3,isValidUTF8:Bd,tokenChars:A3};if(mx)kl.exports.isValidUTF8=function(t){return t.length<24?Bd(t):mx(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=E("utf-8-validate");kl.exports.isValidUTF8=function(e){return e.length<32?Bd(e):t(e)}}catch{}});var Vd=p((T6,Ox)=>{"use strict";var{Writable:I3}=E("stream"),vx=qs(),{BINARY_TYPES:q3,EMPTY_BUFFER:Sx,kStatusCode:C3,kWebSocket:k3}=Wt(),{concat:Fd,toArrayBuffer:N3,unmask:L3}=Ps(),{isValidStatusCode:j3,isValidUTF8:Ex}=cn(),Nl=Buffer[Symbol.species],Ke=0,xx=1,Tx=2,Rx=3,Ud=4,Wd=5,Ll=6,$d=class extends I3{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||q3[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[k3]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=Ke}_write(e,r,i){if(this._opcode===8&&this._state==Ke)return i();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(i)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let i=this._buffers[0];return this._buffers[0]=new Nl(i.buffer,i.byteOffset+e,i.length-e),new Nl(i.buffer,i.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let i=this._buffers[0],n=r.length-e;e>=i.length?r.set(this._buffers.shift(),n):(r.set(new Uint8Array(i.buffer,i.byteOffset,e),n),this._buffers[0]=new Nl(i.buffer,i.byteOffset+e,i.length-e)),e-=i.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case Ke:this.getInfo(e);break;case xx:this.getPayloadLength16(e);break;case Tx:this.getPayloadLength64(e);break;case Rx:this.getMask();break;case Ud:this.getData(e);break;case Wd:case Ll:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if(r[0]&48){let n=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(n);return}let i=(r[0]&64)===64;if(i&&!this._extensions[vx.extensionName]){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(n);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(i){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(n);return}if(!this._fragmented){let n=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(n);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let n=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(n);return}this._compressed=i}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let n=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(n);return}if(i){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(n);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let n=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(n);return}}else{let n=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(n);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let n=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(n);return}}else if(this._masked){let n=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(n);return}this._payloadLength===126?this._state=xx:this._payloadLength===127?this._state=Tx:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),i=r.readUInt32BE(0);if(i>Math.pow(2,21)-1){let n=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(n);return}this._payloadLength=i*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=Rx:this._state=Ud}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=Ud}getData(e){let r=Sx;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3]&&L3(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=Wd,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[vx.extensionName].decompress(e,this._fin,(n,s)=>{if(n)return r(n);if(s.length){if(this._messageLength+=s.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(s)}this.dataMessage(r),this._state===Ke&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=Ke;return}let r=this._messageLength,i=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=Fd(i,r):this._binaryType==="arraybuffer"?n=N3(Fd(i,r)):this._binaryType==="blob"?n=new Blob(i):n=i,this._allowSynchronousEvents?(this.emit("message",n,!0),this._state=Ke):(this._state=Ll,setImmediate(()=>{this.emit("message",n,!0),this._state=Ke,this.startLoop(e)}))}else{let n=Fd(i,r);if(!this._skipUTF8Validation&&!Ex(n)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(s);return}this._state===Wd||this._allowSynchronousEvents?(this.emit("message",n,!1),this._state=Ke):(this._state=Ll,setImmediate(()=>{this.emit("message",n,!1),this._state=Ke,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,Sx),this.end();else{let i=e.readUInt16BE(0);if(!j3(i)){let s=this.createError(RangeError,`invalid status code ${i}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(s);return}let n=new Nl(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!Ex(n)){let s=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(s);return}this._loop=!1,this.emit("conclude",i,n),this.end()}this._state=Ke;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=Ke):(this._state=Ll,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=Ke,this.startLoop(r)}))}createError(e,r,i,n,s){this._loop=!1,this._errored=!0;let o=new e(i?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=s,o[C3]=n,o}};Ox.exports=$d});var zd=p((O6,Mx)=>{"use strict";var{Duplex:R6}=E("stream"),{randomFillSync:D3}=E("crypto"),Ax=qs(),{EMPTY_BUFFER:B3,kWebSocket:F3,NOOP:U3}=Wt(),{isBlob:hn,isValidStatusCode:W3}=cn(),{mask:Px,toBuffer:ai}=Ps(),Qe=Symbol("kByteLength"),$3=Buffer.alloc(4),jl=8*1024,li,dn=jl,ft=0,V3=1,H3=2,Hd=class t{constructor(e,r,i){this._extensions=r||{},i&&(this._generateMask=i,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=ft,this.onerror=U3,this[F3]=void 0}static frame(e,r){let i,n=!1,s=2,o=!1;r.mask&&(i=r.maskBuffer||$3,r.generateMask?r.generateMask(i):(dn===jl&&(li===void 0&&(li=Buffer.alloc(jl)),D3(li,0,jl),dn=0),i[0]=li[dn++],i[1]=li[dn++],i[2]=li[dn++],i[3]=li[dn++]),o=(i[0]|i[1]|i[2]|i[3])===0,s=6);let a;typeof e=="string"?(!r.mask||o)&&r[Qe]!==void 0?a=r[Qe]:(e=Buffer.from(e),a=e.length):(a=e.length,n=r.mask&&r.readOnly&&!o);let l=a;a>=65536?(s+=8,l=127):a>125&&(s+=2,l=126);let u=Buffer.allocUnsafe(n?a+s:s);return u[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(u[0]|=64),u[1]=l,l===126?u.writeUInt16BE(a,2):l===127&&(u[2]=u[3]=0,u.writeUIntBE(a,4,6)),r.mask?(u[1]|=128,u[s-4]=i[0],u[s-3]=i[1],u[s-2]=i[2],u[s-1]=i[3],o?[u,e]:n?(Px(e,i,u,s,a),[u]):(Px(e,i,e,0,a),[u,e])):[u,e]}close(e,r,i,n){let s;if(e===void 0)s=B3;else{if(typeof e!="number"||!W3(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)s=Buffer.allocUnsafe(2),s.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");s=Buffer.allocUnsafe(2+a),s.writeUInt16BE(e,0),typeof r=="string"?s.write(r,2):s.set(r,2)}}let o={[Qe]:s.length,fin:!0,generateMask:this._generateMask,mask:i,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==ft?this.enqueue([this.dispatch,s,!1,o,n]):this.sendFrame(t.frame(s,o),n)}ping(e,r,i){let n,s;if(typeof e=="string"?(n=Buffer.byteLength(e),s=!1):hn(e)?(n=e.size,s=!1):(e=ai(e),n=e.length,s=ai.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Qe]:n,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:s,rsv1:!1};hn(e)?this._state!==ft?this.enqueue([this.getBlobData,e,!1,o,i]):this.getBlobData(e,!1,o,i):this._state!==ft?this.enqueue([this.dispatch,e,!1,o,i]):this.sendFrame(t.frame(e,o),i)}pong(e,r,i){let n,s;if(typeof e=="string"?(n=Buffer.byteLength(e),s=!1):hn(e)?(n=e.size,s=!1):(e=ai(e),n=e.length,s=ai.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[Qe]:n,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:s,rsv1:!1};hn(e)?this._state!==ft?this.enqueue([this.getBlobData,e,!1,o,i]):this.getBlobData(e,!1,o,i):this._state!==ft?this.enqueue([this.dispatch,e,!1,o,i]):this.sendFrame(t.frame(e,o),i)}send(e,r,i){let n=this._extensions[Ax.extensionName],s=r.binary?2:1,o=r.compress,a,l;typeof e=="string"?(a=Buffer.byteLength(e),l=!1):hn(e)?(a=e.size,l=!1):(e=ai(e),a=e.length,l=ai.readOnly),this._firstFragment?(this._firstFragment=!1,o&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=n._threshold),this._compress=o):(o=!1,s=0),r.fin&&(this._firstFragment=!0);let u={[Qe]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:s,readOnly:l,rsv1:o};hn(e)?this._state!==ft?this.enqueue([this.getBlobData,e,this._compress,u,i]):this.getBlobData(e,this._compress,u,i):this._state!==ft?this.enqueue([this.dispatch,e,this._compress,u,i]):this.dispatch(e,this._compress,u,i)}getBlobData(e,r,i,n){this._bufferedBytes+=i[Qe],this._state=H3,e.arrayBuffer().then(s=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(Gd,this,a,n);return}this._bufferedBytes-=i[Qe];let o=ai(s);r?this.dispatch(o,r,i,n):(this._state=ft,this.sendFrame(t.frame(o,i),n),this.dequeue())}).catch(s=>{process.nextTick(G3,this,s,n)})}dispatch(e,r,i,n){if(!r){this.sendFrame(t.frame(e,i),n);return}let s=this._extensions[Ax.extensionName];this._bufferedBytes+=i[Qe],this._state=V3,s.compress(e,i.fin,(o,a)=>{if(this._socket.destroyed){let l=new Error("The socket was closed while data was being compressed");Gd(this,l,n);return}this._bufferedBytes-=i[Qe],this._state=ft,i.readOnly=!1,this.sendFrame(t.frame(a,i),n),this.dequeue()})}dequeue(){for(;this._state===ft&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][Qe],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][Qe],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};Mx.exports=Hd;function Gd(t,e,r){typeof r=="function"&&r(e);for(let i=0;i<t._queue.length;i++){let n=t._queue[i],s=n[n.length-1];typeof s=="function"&&s(e)}}function G3(t,e,r){Gd(t,e,r),t.onerror(e)}});var Bx=p((A6,Dx)=>{"use strict";var{kForOnEventAttribute:Cs,kListener:Yd}=Wt(),Ix=Symbol("kCode"),qx=Symbol("kData"),Cx=Symbol("kError"),kx=Symbol("kMessage"),Nx=Symbol("kReason"),pn=Symbol("kTarget"),Lx=Symbol("kType"),jx=Symbol("kWasClean"),Vt=class{constructor(e){this[pn]=null,this[Lx]=e}get target(){return this[pn]}get type(){return this[Lx]}};Object.defineProperty(Vt.prototype,"target",{enumerable:!0});Object.defineProperty(Vt.prototype,"type",{enumerable:!0});var ui=class extends Vt{constructor(e,r={}){super(e),this[Ix]=r.code===void 0?0:r.code,this[Nx]=r.reason===void 0?"":r.reason,this[jx]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[Ix]}get reason(){return this[Nx]}get wasClean(){return this[jx]}};Object.defineProperty(ui.prototype,"code",{enumerable:!0});Object.defineProperty(ui.prototype,"reason",{enumerable:!0});Object.defineProperty(ui.prototype,"wasClean",{enumerable:!0});var gn=class extends Vt{constructor(e,r={}){super(e),this[Cx]=r.error===void 0?null:r.error,this[kx]=r.message===void 0?"":r.message}get error(){return this[Cx]}get message(){return this[kx]}};Object.defineProperty(gn.prototype,"error",{enumerable:!0});Object.defineProperty(gn.prototype,"message",{enumerable:!0});var ks=class extends Vt{constructor(e,r={}){super(e),this[qx]=r.data===void 0?null:r.data}get data(){return this[qx]}};Object.defineProperty(ks.prototype,"data",{enumerable:!0});var z3={addEventListener(t,e,r={}){for(let n of this.listeners(t))if(!r[Cs]&&n[Yd]===e&&!n[Cs])return;let i;if(t==="message")i=function(s,o){let a=new ks("message",{data:o?s:s.toString()});a[pn]=this,Dl(e,this,a)};else if(t==="close")i=function(s,o){let a=new ui("close",{code:s,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[pn]=this,Dl(e,this,a)};else if(t==="error")i=function(s){let o=new gn("error",{error:s,message:s.message});o[pn]=this,Dl(e,this,o)};else if(t==="open")i=function(){let s=new Vt("open");s[pn]=this,Dl(e,this,s)};else return;i[Cs]=!!r[Cs],i[Yd]=e,r.once?this.once(t,i):this.on(t,i)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[Yd]===e&&!r[Cs]){this.removeListener(t,r);break}}};Dx.exports={CloseEvent:ui,ErrorEvent:gn,Event:Vt,EventTarget:z3,MessageEvent:ks};function Dl(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var Kd=p((P6,Fx)=>{"use strict";var{tokenChars:Ns}=cn();function qt(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function Y3(t){let e=Object.create(null),r=Object.create(null),i=!1,n=!1,s=!1,o,a,l=-1,u=-1,f=-1,c=0;for(;c<t.length;c++)if(u=t.charCodeAt(c),o===void 0)if(f===-1&&Ns[u]===1)l===-1&&(l=c);else if(c!==0&&(u===32||u===9))f===-1&&l!==-1&&(f=c);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${c}`);f===-1&&(f=c);let b=t.slice(l,f);u===44?(qt(e,b,r),r=Object.create(null)):o=b,l=f=-1}else throw new SyntaxError(`Unexpected character at index ${c}`);else if(a===void 0)if(f===-1&&Ns[u]===1)l===-1&&(l=c);else if(u===32||u===9)f===-1&&l!==-1&&(f=c);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${c}`);f===-1&&(f=c),qt(r,t.slice(l,f),!0),u===44&&(qt(e,o,r),r=Object.create(null),o=void 0),l=f=-1}else if(u===61&&l!==-1&&f===-1)a=t.slice(l,c),l=f=-1;else throw new SyntaxError(`Unexpected character at index ${c}`);else if(n){if(Ns[u]!==1)throw new SyntaxError(`Unexpected character at index ${c}`);l===-1?l=c:i||(i=!0),n=!1}else if(s)if(Ns[u]===1)l===-1&&(l=c);else if(u===34&&l!==-1)s=!1,f=c;else if(u===92)n=!0;else throw new SyntaxError(`Unexpected character at index ${c}`);else if(u===34&&t.charCodeAt(c-1)===61)s=!0;else if(f===-1&&Ns[u]===1)l===-1&&(l=c);else if(l!==-1&&(u===32||u===9))f===-1&&(f=c);else if(u===59||u===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${c}`);f===-1&&(f=c);let b=t.slice(l,f);i&&(b=b.replace(/\\/g,""),i=!1),qt(r,a,b),u===44&&(qt(e,o,r),r=Object.create(null),o=void 0),a=void 0,l=f=-1}else throw new SyntaxError(`Unexpected character at index ${c}`);if(l===-1||s||u===32||u===9)throw new SyntaxError("Unexpected end of input");f===-1&&(f=c);let h=t.slice(l,f);return o===void 0?qt(e,h,r):(a===void 0?qt(r,h,!0):i?qt(r,a,h.replace(/\\/g,"")):qt(r,a,h),qt(e,o,r)),e}function K3(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(i=>[e].concat(Object.keys(i).map(n=>{let s=i[n];return Array.isArray(s)||(s=[s]),s.map(o=>o===!0?n:`${n}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}Fx.exports={format:K3,parse:Y3}});var ep=p((q6,Zx)=>{"use strict";var Q3=E("events"),J3=E("https"),Z3=E("http"),$x=E("net"),X3=E("tls"),{randomBytes:eF,createHash:tF}=E("crypto"),{Duplex:M6,Readable:I6}=E("stream"),{URL:Qd}=E("url"),vr=qs(),rF=Vd(),iF=zd(),{isBlob:nF}=cn(),{BINARY_TYPES:Ux,EMPTY_BUFFER:Bl,GUID:sF,kForOnEventAttribute:Jd,kListener:oF,kStatusCode:aF,kWebSocket:be,NOOP:Vx}=Wt(),{EventTarget:{addEventListener:lF,removeEventListener:uF}}=Bx(),{format:fF,parse:cF}=Kd(),{toBuffer:hF}=Ps(),dF=30*1e3,Hx=Symbol("kAborted"),Zd=[8,13],Ht=["CONNECTING","OPEN","CLOSING","CLOSED"],pF=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,Z=class t extends Q3{constructor(e,r,i){super(),this._binaryType=Ux[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=Bl,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(i=r,r=[]):r=[r]),Gx(this,e,r,i)):(this._autoPong=i.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){Ux.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,i){let n=new rF({allowSynchronousEvents:i.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:i.maxPayload,skipUTF8Validation:i.skipUTF8Validation}),s=new iF(e,this._extensions,i.generateMask);this._receiver=n,this._sender=s,this._socket=e,n[be]=this,s[be]=this,e[be]=this,n.on("conclude",_F),n.on("drain",yF),n.on("error",mF),n.on("message",wF),n.on("ping",vF),n.on("pong",SF),s.onerror=EF,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",Kx),e.on("data",Ul),e.on("end",Qx),e.on("error",Jx),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[vr.extensionName]&&this._extensions[vr.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){De(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,i=>{i||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),Yx(this)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,i){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=r=void 0):typeof r=="function"&&(i=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Xd(this,e,i);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||Bl,r,i)}pong(e,r,i){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(i=e,e=r=void 0):typeof r=="function"&&(i=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Xd(this,e,i);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||Bl,r,i)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,i){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(i=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Xd(this,e,i);return}let n={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[vr.extensionName]||(n.compress=!1),this._sender.send(e||Bl,n,i)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){De(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(Z,"CONNECTING",{enumerable:!0,value:Ht.indexOf("CONNECTING")});Object.defineProperty(Z.prototype,"CONNECTING",{enumerable:!0,value:Ht.indexOf("CONNECTING")});Object.defineProperty(Z,"OPEN",{enumerable:!0,value:Ht.indexOf("OPEN")});Object.defineProperty(Z.prototype,"OPEN",{enumerable:!0,value:Ht.indexOf("OPEN")});Object.defineProperty(Z,"CLOSING",{enumerable:!0,value:Ht.indexOf("CLOSING")});Object.defineProperty(Z.prototype,"CLOSING",{enumerable:!0,value:Ht.indexOf("CLOSING")});Object.defineProperty(Z,"CLOSED",{enumerable:!0,value:Ht.indexOf("CLOSED")});Object.defineProperty(Z.prototype,"CLOSED",{enumerable:!0,value:Ht.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(Z.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(Z.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[Jd])return e[oF];return null},set(e){for(let r of this.listeners(t))if(r[Jd]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[Jd]:!0})}})});Z.prototype.addEventListener=lF;Z.prototype.removeEventListener=uF;Zx.exports=Z;function Gx(t,e,r,i){let n={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:Zd[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...i,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=n.autoPong,!Zd.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${Zd.join(", ")})`);let s;if(e instanceof Qd)s=e;else try{s=new Qd(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}s.protocol==="http:"?s.protocol="ws:":s.protocol==="https:"&&(s.protocol="wss:"),t._url=s.href;let o=s.protocol==="wss:",a=s.protocol==="ws+unix:",l;if(s.protocol!=="ws:"&&!o&&!a?l=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!s.pathname?l="The URL's pathname is empty":s.hash&&(l="The URL contains a fragment identifier"),l){let g=new SyntaxError(l);if(t._redirects===0)throw g;Fl(t,g);return}let u=o?443:80,f=eF(16).toString("base64"),c=o?J3.request:Z3.request,h=new Set,b;if(n.createConnection=n.createConnection||(o?bF:gF),n.defaultPort=n.defaultPort||u,n.port=s.port||u,n.host=s.hostname.startsWith("[")?s.hostname.slice(1,-1):s.hostname,n.headers={...n.headers,"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":f,Connection:"Upgrade",Upgrade:"websocket"},n.path=s.pathname+s.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(b=new vr(n.perMessageDeflate!==!0?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=fF({[vr.extensionName]:b.offer()})),r.length){for(let g of r){if(typeof g!="string"||!pF.test(g)||h.has(g))throw new SyntaxError("An invalid or duplicated subprotocol was specified");h.add(g)}n.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(s.username||s.password)&&(n.auth=`${s.username}:${s.password}`),a){let g=n.path.split(":");n.socketPath=g[0],n.path=g[1]}let d;if(n.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?n.socketPath:s.host;let g=i&&i.headers;if(i={...i,headers:{}},g)for(let[y,_]of Object.entries(g))i.headers[y.toLowerCase()]=_}else if(t.listenerCount("redirect")===0){let g=a?t._originalIpc?n.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:s.host===t._originalHostOrSocketPath;(!g||t._originalSecure&&!o)&&(delete n.headers.authorization,delete n.headers.cookie,g||delete n.headers.host,n.auth=void 0)}n.auth&&!i.headers.authorization&&(i.headers.authorization="Basic "+Buffer.from(n.auth).toString("base64")),d=t._req=c(n),t._redirects&&t.emit("redirect",t.url,d)}else d=t._req=c(n);n.timeout&&d.on("timeout",()=>{De(t,d,"Opening handshake has timed out")}),d.on("error",g=>{d===null||d[Hx]||(d=t._req=null,Fl(t,g))}),d.on("response",g=>{let y=g.headers.location,_=g.statusCode;if(y&&n.followRedirects&&_>=300&&_<400){if(++t._redirects>n.maxRedirects){De(t,d,"Maximum redirects exceeded");return}d.abort();let m;try{m=new Qd(y,e)}catch{let w=new SyntaxError(`Invalid URL: ${y}`);Fl(t,w);return}Gx(t,m,r,i)}else t.emit("unexpected-response",d,g)||De(t,d,`Unexpected server response: ${g.statusCode}`)}),d.on("upgrade",(g,y,_)=>{if(t.emit("upgrade",g),t.readyState!==Z.CONNECTING)return;d=t._req=null;let m=g.headers.upgrade;if(m===void 0||m.toLowerCase()!=="websocket"){De(t,y,"Invalid Upgrade header");return}let S=tF("sha1").update(f+sF).digest("base64");if(g.headers["sec-websocket-accept"]!==S){De(t,y,"Invalid Sec-WebSocket-Accept header");return}let w=g.headers["sec-websocket-protocol"],T;if(w!==void 0?h.size?h.has(w)||(T="Server sent an invalid subprotocol"):T="Server sent a subprotocol but none was requested":h.size&&(T="Server sent no subprotocol"),T){De(t,y,T);return}w&&(t._protocol=w);let M=g.headers["sec-websocket-extensions"];if(M!==void 0){if(!b){De(t,y,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let O;try{O=cF(M)}catch{De(t,y,"Invalid Sec-WebSocket-Extensions header");return}let N=Object.keys(O);if(N.length!==1||N[0]!==vr.extensionName){De(t,y,"Server indicated an extension that was not requested");return}try{b.accept(O[vr.extensionName])}catch{De(t,y,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[vr.extensionName]=b}t.setSocket(y,_,{allowSynchronousEvents:n.allowSynchronousEvents,generateMask:n.generateMask,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation})}),n.finishRequest?n.finishRequest(d,t):d.end()}function Fl(t,e){t._readyState=Z.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function gF(t){return t.path=t.socketPath,$x.connect(t)}function bF(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=$x.isIP(t.host)?"":t.host),X3.connect(t)}function De(t,e,r){t._readyState=Z.CLOSING;let i=new Error(r);Error.captureStackTrace(i,De),e.setHeader?(e[Hx]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(Fl,t,i)):(e.destroy(i),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function Xd(t,e,r){if(e){let i=nF(e)?e.size:hF(e).length;t._socket?t._sender._bufferedBytes+=i:t._bufferedAmount+=i}if(r){let i=new Error(`WebSocket is not open: readyState ${t.readyState} (${Ht[t.readyState]})`);process.nextTick(r,i)}}function _F(t,e){let r=this[be];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[be]!==void 0&&(r._socket.removeListener("data",Ul),process.nextTick(zx,r._socket),t===1005?r.close():r.close(t,e))}function yF(){let t=this[be];t.isPaused||t._socket.resume()}function mF(t){let e=this[be];e._socket[be]!==void 0&&(e._socket.removeListener("data",Ul),process.nextTick(zx,e._socket),e.close(t[aF])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function Wx(){this[be].emitClose()}function wF(t,e){this[be].emit("message",t,e)}function vF(t){let e=this[be];e._autoPong&&e.pong(t,!this._isServer,Vx),e.emit("ping",t)}function SF(t){this[be].emit("pong",t)}function zx(t){t.resume()}function EF(t){let e=this[be];e.readyState!==Z.CLOSED&&(e.readyState===Z.OPEN&&(e._readyState=Z.CLOSING,Yx(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function Yx(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),dF)}function Kx(){let t=this[be];this.removeListener("close",Kx),this.removeListener("data",Ul),this.removeListener("end",Qx),t._readyState=Z.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[be]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",Wx),t._receiver.on("finish",Wx))}function Ul(t){this[be]._receiver.write(t)||this.pause()}function Qx(){let t=this[be];t._readyState=Z.CLOSING,t._receiver.end(),this.end()}function Jx(){let t=this[be];this.removeListener("error",Jx),this.on("error",Vx),t&&(t._readyState=Z.CLOSING,this.destroy())}});var rT=p((C6,tT)=>{"use strict";var{Duplex:xF}=E("stream");function Xx(t){t.emit("close")}function TF(){!this.destroyed&&this._writableState.finished&&this.destroy()}function eT(t){this.removeListener("error",eT),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function RF(t,e){let r=!0,i=new xF({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(s,o){let a=!o&&i._readableState.objectMode?s.toString():s;i.push(a)||t.pause()}),t.once("error",function(s){i.destroyed||(r=!1,i.destroy(s))}),t.once("close",function(){i.destroyed||i.push(null)}),i._destroy=function(n,s){if(t.readyState===t.CLOSED){s(n),process.nextTick(Xx,i);return}let o=!1;t.once("error",function(l){o=!0,s(l)}),t.once("close",function(){o||s(n),process.nextTick(Xx,i)}),r&&t.terminate()},i._final=function(n){if(t.readyState===t.CONNECTING){t.once("open",function(){i._final(n)});return}t._socket!==null&&(t._socket._writableState.finished?(n(),i._readableState.endEmitted&&i.destroy()):(t._socket.once("finish",function(){n()}),t.close()))},i._read=function(){t.isPaused&&t.resume()},i._write=function(n,s,o){if(t.readyState===t.CONNECTING){t.once("open",function(){i._write(n,s,o)});return}t.send(n,o)},i.on("end",TF),i.on("error",eT),i}tT.exports=RF});var nT=p((k6,iT)=>{"use strict";var{tokenChars:OF}=cn();function AF(t){let e=new Set,r=-1,i=-1,n=0;for(n;n<t.length;n++){let o=t.charCodeAt(n);if(i===-1&&OF[o]===1)r===-1&&(r=n);else if(n!==0&&(o===32||o===9))i===-1&&r!==-1&&(i=n);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${n}`);i===-1&&(i=n);let a=t.slice(r,i);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=i=-1}else throw new SyntaxError(`Unexpected character at index ${n}`)}if(r===-1||i!==-1)throw new SyntaxError("Unexpected end of input");let s=t.slice(r,n);if(e.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return e.add(s),e}iT.exports={parse:AF}});var cT=p((L6,fT)=>{"use strict";var PF=E("events"),Wl=E("http"),{Duplex:N6}=E("stream"),{createHash:MF}=E("crypto"),sT=Kd(),fi=qs(),IF=nT(),qF=ep(),{GUID:CF,kWebSocket:kF}=Wt(),NF=/^[+/0-9A-Za-z]{22}==$/,oT=0,aT=1,uT=2,tp=class extends PF{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:qF,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Wl.createServer((i,n)=>{let s=Wl.STATUS_CODES[426];n.writeHead(426,{"Content-Length":s.length,"Content-Type":"text/plain"}),n.end(s)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let i=this.emit.bind(this,"connection");this._removeListeners=LF(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(n,s,o)=>{this.handleUpgrade(n,s,o,i)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=oT}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===uT){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Ls,this);return}if(e&&this.once("close",e),this._state!==aT)if(this._state=aT,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Ls,this):process.nextTick(Ls,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{Ls(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,i,n){r.on("error",lT);let s=e.headers["sec-websocket-key"],o=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){ci(this,e,r,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){ci(this,e,r,400,"Invalid Upgrade header");return}if(s===void 0||!NF.test(s)){ci(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==8&&a!==13){ci(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){js(r,400);return}let l=e.headers["sec-websocket-protocol"],u=new Set;if(l!==void 0)try{u=IF.parse(l)}catch{ci(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let f=e.headers["sec-websocket-extensions"],c={};if(this.options.perMessageDeflate&&f!==void 0){let h=new fi(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let b=sT.parse(f);b[fi.extensionName]&&(h.accept(b[fi.extensionName]),c[fi.extensionName]=h)}catch{ci(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let h={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(h,(b,d,g,y)=>{if(!b)return js(r,d||401,g,y);this.completeUpgrade(c,s,u,e,r,i,n)});return}if(!this.options.verifyClient(h))return js(r,401)}this.completeUpgrade(c,s,u,e,r,i,n)}completeUpgrade(e,r,i,n,s,o,a){if(!s.readable||!s.writable)return s.destroy();if(s[kF])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>oT)return js(s,503);let u=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${MF("sha1").update(r+CF).digest("base64")}`],f=new this.options.WebSocket(null,void 0,this.options);if(i.size){let c=this.options.handleProtocols?this.options.handleProtocols(i,n):i.values().next().value;c&&(u.push(`Sec-WebSocket-Protocol: ${c}`),f._protocol=c)}if(e[fi.extensionName]){let c=e[fi.extensionName].params,h=sT.format({[fi.extensionName]:[c]});u.push(`Sec-WebSocket-Extensions: ${h}`),f._extensions=e}this.emit("headers",u,n),s.write(u.concat(`\r
`).join(`\r
`)),s.removeListener("error",lT),f.setSocket(s,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(f),f.on("close",()=>{this.clients.delete(f),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Ls,this)})),a(f,n)}};fT.exports=tp;function LF(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let i of Object.keys(e))t.removeListener(i,e[i])}}function Ls(t){t._state=uT,t.emit("close")}function lT(){this.destroy()}function js(t,e,r,i){r=r||Wl.STATUS_CODES[e],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...i},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${Wl.STATUS_CODES[e]}\r
`+Object.keys(i).map(n=>`${n}: ${i[n]}`).join(`\r
`)+`\r
\r
`+r)}function ci(t,e,r,i,n){if(t.listenerCount("wsClientError")){let s=new Error(n);Error.captureStackTrace(s,ci),t.emit("wsClientError",s,r,e)}else js(r,i,n)}});var dT=p((j6,hT)=>{"use strict";var Gt=ep();Gt.createWebSocketStream=rT();Gt.Server=cT();Gt.Receiver=Vd();Gt.Sender=zd();Gt.WebSocket=Gt;Gt.WebSocketServer=Gt.Server;hT.exports=Gt});var $l=p(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});bn.BufferedDuplex=bn.writev=void 0;var jF=hr(),pT=E("buffer");function gT(t,e){let r=new Array(t.length);for(let i=0;i<t.length;i++)typeof t[i].chunk=="string"?r[i]=pT.Buffer.from(t[i].chunk,"utf8"):r[i]=t[i].chunk;this._write(pT.Buffer.concat(r),"binary",e)}bn.writev=gT;var rp=class extends jF.Duplex{constructor(e,r,i){super({objectMode:!0}),this.proxy=r,this.socket=i,this.writeQueue=[],e.objectMode||(this._writev=gT.bind(this)),this.isSocketOpen=!1,this.proxy.on("data",n=>{this.destroyed||this.push(n)})}_read(e){this.proxy.read(e)}_write(e,r,i){this.isSocketOpen?this.writeToProxy(e,r,i):this.writeQueue.push({chunk:e,encoding:r,cb:i})}_final(e){this.writeQueue=[],this.proxy.end(e)}_destroy(e,r){this.writeQueue=[],this.proxy.destroy(),r(e)}socketReady(){this.emit("connect"),this.isSocketOpen=!0,this.processWriteQueue()}writeToProxy(e,r,i){this.proxy.write(e,r)===!1?this.proxy.once("drain",i):i()}processWriteQueue(){for(;this.writeQueue.length>0;){let{chunk:e,encoding:r,cb:i}=this.writeQueue.shift();this.writeToProxy(e,r,i)}}};bn.BufferedDuplex=rp});var Ds=p(Er=>{"use strict";var np=Er&&Er.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Er,"__esModule",{value:!0});Er.streamBuilder=Er.browserStreamBuilder=void 0;var Vl=E("buffer"),bT=np(dT()),DF=np(Tt()),BF=hr(),FF=np(Os()),ip=$l(),Sr=(0,DF.default)("mqttjs:ws"),UF=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function _T(t,e){let r=`${t.protocol}://${t.hostname}:${t.port}${t.path}`;return typeof t.transformWsUrl=="function"&&(r=t.transformWsUrl(r,t,e)),r}function yT(t){let e=t;return t.port||(t.protocol==="wss"?e.port=443:e.port=80),t.path||(e.path="/"),t.wsOptions||(e.wsOptions={}),!FF.default&&!t.forceNativeWebSocket&&t.protocol==="wss"&&UF.forEach(r=>{Object.prototype.hasOwnProperty.call(t,r)&&!Object.prototype.hasOwnProperty.call(t.wsOptions,r)&&(e.wsOptions[r]=t[r])}),e}function WF(t){let e=yT(t);if(e.hostname||(e.hostname=e.host),!e.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");let r=new URL(document.URL);e.hostname=r.hostname,e.port||(e.port=Number(r.port))}return e.objectMode===void 0&&(e.objectMode=!(e.binary===!0||e.binary===void 0)),e}function $F(t,e,r){Sr("createWebSocket"),Sr(`protocol: ${r.protocolId} ${r.protocolVersion}`);let i=r.protocolId==="MQIsdp"&&r.protocolVersion===3?"mqttv3.1":"mqtt";Sr(`creating new Websocket for url: ${e} and protocol: ${i}`);let n;return r.createWebsocket?n=r.createWebsocket(e,[i],r):n=new bT.default(e,[i],r.wsOptions),n}function VF(t,e){let r=e.protocolId==="MQIsdp"&&e.protocolVersion===3?"mqttv3.1":"mqtt",i=_T(e,t),n;return e.createWebsocket?n=e.createWebsocket(i,[r],e):n=new WebSocket(i,[r]),n.binaryType="arraybuffer",n}var HF=(t,e)=>{Sr("streamBuilder");let r=yT(e);r.hostname=r.hostname||r.host||"localhost";let i=_T(r,t),n=$F(t,i,r),s=bT.default.createWebSocketStream(n,r.wsOptions);return s.url=i,n.on("close",()=>{s.destroy()}),s};Er.streamBuilder=HF;var GF=(t,e)=>{Sr("browserStreamBuilder");let r,n=WF(e).browserBufferSize||1024*512,s=e.browserBufferTimeout||1e3,o=!e.objectMode,a=VF(t,e),l=f(e,g,y);e.objectMode||(l._writev=ip.writev.bind(l)),l.on("close",()=>{a.close()});let u=typeof a.addEventListener<"u";a.readyState===a.OPEN?(r=l,r.socket=a):(r=new ip.BufferedDuplex(e,l,a),u?a.addEventListener("open",c):a.onopen=c),u?(a.addEventListener("close",h),a.addEventListener("error",b),a.addEventListener("message",d)):(a.onclose=h,a.onerror=b,a.onmessage=d);function f(_,m,S){let w=new BF.Transform({objectMode:_.objectMode});return w._write=m,w._flush=S,w}function c(){Sr("WebSocket onOpen"),r instanceof ip.BufferedDuplex&&r.socketReady()}function h(_){Sr("WebSocket onClose",_),r.end(),r.destroy()}function b(_){Sr("WebSocket onError",_);let m=new Error("WebSocket error");m.event=_,r.destroy(m)}async function d(_){let{data:m}=_;m instanceof ArrayBuffer?m=Vl.Buffer.from(m):m instanceof Blob?m=Vl.Buffer.from(await new Response(m).arrayBuffer()):m=Vl.Buffer.from(m,"utf8"),l&&!l.destroyed&&l.push(m)}function g(_,m,S){if(a.bufferedAmount>n){setTimeout(g,s,_,m,S);return}o&&typeof _=="string"&&(_=Vl.Buffer.from(_,"utf8"));try{a.send(_)}catch(w){return S(w)}S()}function y(_){a.close(),_()}return r};Er.browserStreamBuilder=GF});var sp=p(Bs=>{"use strict";var mT=Bs&&Bs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bs,"__esModule",{value:!0});var zF=mT(E("net")),YF=mT(Tt()),KF=(0,YF.default)("mqttjs:tcp"),QF=(t,e)=>{e.port=e.port||1883,e.hostname=e.hostname||e.host||"localhost";let{port:r,path:i}=e,n=e.hostname;return KF("port %d and host %s",r,n),zF.default.createConnection({port:r,host:n,path:i})};Bs.default=QF});var ap=p(Fs=>{"use strict";var op=Fs&&Fs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fs,"__esModule",{value:!0});var JF=op(E("tls")),ZF=op(E("net")),XF=op(Tt()),eU=(0,XF.default)("mqttjs:tls"),tU=(t,e)=>{e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",ZF.default.isIP(e.host)===0&&(e.servername=e.host),e.rejectUnauthorized=e.rejectUnauthorized!==!1,delete e.path,eU("port %d host %s rejectUnauthorized %b",e.port,e.host,e.rejectUnauthorized);let r=JF.default.connect(e);r.on("secureConnect",()=>{e.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",i)});function i(n){e.rejectUnauthorized&&t.emit("error",n),r.end()}return r.on("error",i),r};Fs.default=tU});var fp=p(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});var wT=E("buffer"),rU=hr(),iU=$l(),Ct,lp,Be;function nU(){let t=new rU.Transform;return t._write=(e,r,i)=>{Ct.send({data:e.buffer,success(){i()},fail(n){i(new Error(n))}})},t._flush=e=>{Ct.close({success(){e()}})},t}function sU(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}function oU(t,e){let r=t.protocol==="wxs"?"wss":"ws",i=`${r}://${t.hostname}${t.path}`;return t.port&&t.port!==80&&t.port!==443&&(i=`${r}://${t.hostname}:${t.port}${t.path}`),typeof t.transformWsUrl=="function"&&(i=t.transformWsUrl(i,t,e)),i}function aU(){Ct.onOpen(()=>{Be.socketReady()}),Ct.onMessage(t=>{let{data:e}=t;e instanceof ArrayBuffer?e=wT.Buffer.from(e):e=wT.Buffer.from(e,"utf8"),lp.push(e)}),Ct.onClose(()=>{Be.emit("close"),Be.end(),Be.destroy()}),Ct.onError(t=>{let e=new Error(t.errMsg);Be.destroy(e)})}var lU=(t,e)=>{if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");let r=e.protocolId==="MQIsdp"&&e.protocolVersion===3?"mqttv3.1":"mqtt";sU(e);let i=oU(e,t);Ct=wx.connectSocket({url:i,protocols:[r]}),lp=nU(),Be=new iU.BufferedDuplex(e,lp,Ct),Be._destroy=(s,o)=>{Ct.close({success(){o&&o(s)}})};let n=Be.destroy;return Be.destroy=(s,o)=>(Be.destroy=n,setTimeout(()=>{Ct.close({fail(){Be._destroy(s,o)}})},0),Be),aU(),Be};up.default=lU});var dp=p(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});var cp=E("buffer"),uU=hr(),fU=$l(),zt,Hl,_n,vT=!1;function cU(){let t=new uU.Transform;return t._write=(e,r,i)=>{zt.sendSocketMessage({data:e.buffer,success(){i()},fail(){i(new Error)}})},t._flush=e=>{zt.closeSocket({success(){e()}})},t}function hU(t){t.hostname||(t.hostname="localhost"),t.path||(t.path="/"),t.wsOptions||(t.wsOptions={})}function dU(t,e){let r=t.protocol==="alis"?"wss":"ws",i=`${r}://${t.hostname}${t.path}`;return t.port&&t.port!==80&&t.port!==443&&(i=`${r}://${t.hostname}:${t.port}${t.path}`),typeof t.transformWsUrl=="function"&&(i=t.transformWsUrl(i,t,e)),i}function pU(){vT||(vT=!0,zt.onSocketOpen(()=>{_n.socketReady()}),zt.onSocketMessage(t=>{if(typeof t.data=="string"){let e=cp.Buffer.from(t.data,"base64");Hl.push(e)}else{let e=new FileReader;e.addEventListener("load",()=>{let r=e.result;r instanceof ArrayBuffer?r=cp.Buffer.from(r):r=cp.Buffer.from(r,"utf8"),Hl.push(r)}),e.readAsArrayBuffer(t.data)}}),zt.onSocketClose(()=>{_n.end(),_n.destroy()}),zt.onSocketError(t=>{_n.destroy(t)}))}var gU=(t,e)=>{if(e.hostname=e.hostname||e.host,!e.hostname)throw new Error("Could not determine host. Specify host manually.");let r=e.protocolId==="MQIsdp"&&e.protocolVersion===3?"mqttv3.1":"mqtt";hU(e);let i=dU(e,t);return zt=e.my,zt.connectSocket({url:i,protocols:r}),Hl=cU(),_n=new fU.BufferedDuplex(e,Hl,zt),pU(),_n};hp.default=gU});var xT=p(hi=>{"use strict";var Gl=hi&&hi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hi,"__esModule",{value:!0});hi.connectAsync=void 0;var bU=Gl(Tt()),_U=Gl(E("url")),yU=Gl(Pl()),mU=Gl(Os());typeof(process==null?void 0:process.nextTick)!="function"&&(process.nextTick=setImmediate);var ST=(0,bU.default)("mqttjs"),he=null;function wU(t){let e;t.auth&&(e=t.auth.match(/^(.+):(.+)$/),e?(t.username=e[1],t.password=e[2]):t.username=t.auth)}function ET(t,e){var r,i,n,s;if(ST("connecting to an MQTT broker..."),typeof t=="object"&&!e&&(e=t,t=""),e=e||{},t&&typeof t=="string"){let l=_U.default.parse(t,!0),u={};if(l.port!=null&&(u.port=Number(l.port)),u.host=l.hostname,u.query=l.query,u.auth=l.auth,u.protocol=l.protocol,u.path=l.path,u.protocol=(r=u.protocol)===null||r===void 0?void 0:r.replace(/:$/,""),e=Object.assign(Object.assign({},u),e),!e.protocol)throw new Error("Missing protocol")}if(e.unixSocket=e.unixSocket||((i=e.protocol)===null||i===void 0?void 0:i.includes("+unix")),e.unixSocket?e.protocol=e.protocol.replace("+unix",""):!(!((n=e.protocol)===null||n===void 0)&&n.startsWith("ws"))&&!(!((s=e.protocol)===null||s===void 0)&&s.startsWith("wx"))&&delete e.path,wU(e),e.query&&typeof e.query.clientId=="string"&&(e.clientId=e.query.clientId),e.cert&&e.key)if(e.protocol){if(["mqtts","wss","wxs","alis"].indexOf(e.protocol)===-1)switch(e.protocol){case"mqtt":e.protocol="mqtts";break;case"ws":e.protocol="wss";break;case"wx":e.protocol="wxs";break;case"ali":e.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${e.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(he||(he={},!mU.default&&!e.forceNativeWebSocket?(he.ws=Ds().streamBuilder,he.wss=Ds().streamBuilder,he.mqtt=sp().default,he.tcp=sp().default,he.ssl=ap().default,he.tls=he.ssl,he.mqtts=ap().default):(he.ws=Ds().browserStreamBuilder,he.wss=Ds().browserStreamBuilder,he.wx=fp().default,he.wxs=fp().default,he.ali=dp().default,he.alis=dp().default)),!he[e.protocol]){let l=["mqtts","wss"].indexOf(e.protocol)!==-1;e.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((u,f)=>l&&f%2===0?!1:typeof he[u]=="function")[0]}if(e.clean===!1&&!e.clientId)throw new Error("Missing clientId for unclean clients");e.protocol&&(e.defaultProtocol=e.protocol);function o(l){return e.servers&&((!l._reconnectCount||l._reconnectCount===e.servers.length)&&(l._reconnectCount=0),e.host=e.servers[l._reconnectCount].host,e.port=e.servers[l._reconnectCount].port,e.protocol=e.servers[l._reconnectCount].protocol?e.servers[l._reconnectCount].protocol:e.defaultProtocol,e.hostname=e.host,l._reconnectCount++),ST("calling streambuilder for",e.protocol),he[e.protocol](l,e)}let a=new yU.default(o,e);return a.on("error",()=>{}),a}function vU(t,e,r=!0){return new Promise((i,n)=>{let s=ET(t,e),o={connect:l=>{a(),i(s)},end:()=>{a(),i(s)},error:l=>{a(),s.end(),n(l)}};r===!1&&(o.close=()=>{o.error(new Error("Couldn't connect to server"))});function a(){Object.keys(o).forEach(l=>{s.off(l,o[l])})}Object.keys(o).forEach(l=>{s.on(l,o[l])})})}hi.connectAsync=vU;hi.default=ET});var pp=p(G=>{"use strict";var TT=G&&G.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),SU=G&&G.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),EU=G&&G.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&TT(e,t,r);return SU(e,t),e},RT=G&&G.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&TT(e,t,r)},Us=G&&G.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(G,"__esModule",{value:!0});G.ReasonCodes=G.KeepaliveManager=G.UniqueMessageIdProvider=G.DefaultMessageIdProvider=G.Store=G.MqttClient=G.connectAsync=G.connect=G.Client=void 0;var OT=Us(Pl());G.MqttClient=OT.default;var xU=Us(Ch());G.DefaultMessageIdProvider=xU.default;var TU=Us(ox());G.UniqueMessageIdProvider=TU.default;var RU=Us(Lh());G.Store=RU.default;var AT=EU(xT());G.connect=AT.default;Object.defineProperty(G,"connectAsync",{enumerable:!0,get:function(){return AT.connectAsync}});var OU=Us(Pd());G.KeepaliveManager=OU.default;G.Client=OT.default;RT(Pl(),G);RT(Xr(),G);var AU=Ss();Object.defineProperty(G,"ReasonCodes",{enumerable:!0,get:function(){return AU.ReasonCodes}})});var MT=p(Je=>{"use strict";var PT=Je&&Je.__createBinding||(Object.create?function(t,e,r,i){i===void 0&&(i=r);var n=Object.getOwnPropertyDescriptor(e,r);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,i,n)}:function(t,e,r,i){i===void 0&&(i=r),t[i]=e[r]}),PU=Je&&Je.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),MU=Je&&Je.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PT(e,t,r);return PU(e,t),e},IU=Je&&Je.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&PT(e,t,r)};Object.defineProperty(Je,"__esModule",{value:!0});var qU=MU(pp());Je.default=qU;IU(pp(),Je)});var G0=wn(Xl(),1),mt=wn(H0(),1),tC=G0.default.get("LOG_LEVEL").default("info").asString(),rC=(0,mt.createLogger)({level:tC,format:mt.format.combine(mt.format.errors({stack:!0}),mt.format.colorize(),mt.format.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),mt.format.printf(({timestamp:t,level:e,message:r,stack:i})=>{let n=`[${t}] [${e}]: ${r}`;return typeof i=="string"&&(n=`${n}
${i}`),n})),transports:[new mt.transports.Console]}),Te=rC;var Q0=wn(K0(),1);import{setTimeout as uC}from"timers/promises";var fC=250;async function nc(t,e){let r=await(0,Q0.requestGPIOAccess)(),i=r.ports.get(t);if(!i)throw new Error(`GPIO(${t}) initialization failed.`);await i.export("out");let n=r.ports.get(e);if(!n)throw new Error(`GPIO(${e}) initialization failed.`);return await n.export("in"),Te.info("jema: initialized",{controlGpio:t,monitorGpio:e}),{sendControl:async()=>{Te.debug("sendControl"),await i.write(1),await uC(fC),await i.write(0)},getMonitor:async()=>{let s=await n.read();return Te.debug(`getMonitor: ${s}`),s===1},setMonitorListener:s=>{n.onchange=({value:o})=>(Te.debug(`onchange: ${o}`),s(o===1))},close:async()=>{for(let s of[i,n]){let{portNumber:o}=s;try{await s.unexport(),Te.info(`jema: GPIO(${o}) successfully unexported.`)}catch(a){Te.error(`jema: Failed to unexport GPIO(${o}):`,a)}}}}}var gi=wn(Xl(),1),IT=wn(MT(),1);import CU from"fs/promises";var di={COMMAND:"set",STATE:"state",AVAILABILITY:"availability"},xr={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"};function pi(t,e){return`jema2mqtt/${t.id}/${e}`}async function kU(){Te.info("jema2mqtt: start");let t=gi.default.get("HA_DISCOVERY_PREFIX").default("homeassistant").asString(),e=gi.default.get("QOS").default(1).asIntPositive(),{deviceId:r,entities:i}=JSON.parse(await CU.readFile("./config.json","utf-8")),n=c=>{let h={unique_id:`jema2mqtt_${r}_${c.id}`,name:c.name,optimistic:!1,device:{identifiers:[`jema2mqtt_${r}`],name:`jema2mqtt.${r}`,model:"jema2mqtt",manufacturer:"nana4rider"},origin:{name:"jema2mqtt",sw_version:"1.0.0",support_url:"https://github.com/nana4rider/jema2mqtt"}},{domain:b}=c;if(b==="lock"||b==="switch")return{...h,command_topic:pi(c,di.COMMAND),state_topic:pi(c,di.STATE),availability_topic:pi(c,di.AVAILABILITY),payload_lock:xr.ACTIVE,payload_unlock:xr.INACTIVE,state_locked:xr.ACTIVE,state_unlocked:xr.INACTIVE,qos:e,retain:!0};throw new Error(`unknown domain: ${c.domain}`)},s=new Map(await Promise.all(i.map(async({id:c,controlGpio:h,monitorGpio:b})=>{let d=await nc(h,b);return[c,d]}))),o=await IT.default.connectAsync(gi.default.get("MQTT_BROKER").required().asString(),{username:gi.default.get("MQTT_USERNAME").asString(),password:gi.default.get("MQTT_PASSWORD").asString()});Te.info("mqtt-client: connected"),await o.subscribeAsync(i.map(c=>{let h=pi(c,di.COMMAND);return Te.debug(`subscribe: ${h}`),h}));let a=async(c,h)=>{let b=i.find(y=>pi(y,di.COMMAND)===c);if(!b)return;let d=s.get(b.id),g=await d.getMonitor();(h===xr.ACTIVE&&!g||h===xr.INACTIVE&&g)&&await d.sendControl()};o.on("message",(c,h)=>{a(c,h.toString())}),await Promise.all(i.map(async c=>{let h=g=>o.publishAsync(pi(c,di.STATE),g?xr.ACTIVE:xr.INACTIVE,{retain:!0}),b=s.get(c.id);b.setMonitorListener(g=>void h(g)),await h(await b.getMonitor());let d=n(c);await o.publishAsync(`${t}/${c.domain}/${d.unique_id}/config`,JSON.stringify(d),{retain:!0})}));let l=c=>Promise.all(i.map(h=>o.publishAsync(pi(h,di.AVAILABILITY),c))),u=setInterval(()=>void l("online"),gi.default.get("AVAILABILITY_INTERVAL").default(1e4).asIntPositive()),f=async()=>{Te.info("jema2mqtt: shutdown"),clearInterval(u),await l("offline"),await o.endAsync(),Te.info("mqtt-client: closed"),await Promise.all(Array.from(s.values())),process.exit(0)};process.on("SIGINT",()=>void f()),process.on("SIGTERM",()=>void f()),await l("online"),Te.info("jema2mqtt: ready")}try{await kU()}catch(t){Te.error("jema2mqtt:",t),process.exit(1)}
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
